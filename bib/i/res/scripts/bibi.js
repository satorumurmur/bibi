/*!
 *
 * # BiB/i - http://bibi.epub.link/ or https://github.com/satorumurmur/bibi - Copyright (c) Satoru MATSUSHIMA - Licensed under the MIT license.
 *
 * - Open Source Libraries:
 *
 *     1. dev-bib/i/res/scripts/__lib/jszip.min.js  - JSZip - http://stuartk.com/jszip - Copyright (c) Stuart Knightley - Dual licensed under the MIT license or GPLv3.
 *     2. dev-bib/i/res/scripts/__lib/base64.js     - base64.js - https://github.com/dankogai/js-base64 - Copyright (c) dankogai - Licensed under the MIT license.
 *     3. dev-bib/i/res/scripts/__lib/npo.src.js    - Native Promise Only - https://github.com/getify/native-promise-only - Copyright (c) Kyle Simpson - Licensed under the MIT license.
 *     4. dev-bib/i/res/scripts/__lib/hammer.min.js - Hammer.js - http://hammerjs.github.io/ - Copyright (c) Jorik Tangelder - Licensed under the MIT license.
 *     5. dev-bib/i/res/scripts/__lib/easing.js     - easing.js - https://github.com/danro/easing-js - Copyright (c) Dan Rogers - Licensed under the MIT license.
 *     6. dev-bib/i/res/scripts/__lib/sML.js        - sML - https://github.com/satorumurmur/sML - Copyright (c) Satoru MATSUSHIMA - Licensed under the MIT license.
 *
 * - BiB/i Components:
 *
 *     1. dev-bib/i/res/scripts/bibi.core.js        - BiB/i Core
 *     2. dev-bib/i/res/scripts/bibi.epubcfi.js     - BiB/i EPUBCFI Utilities
 *
 */
/*!

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.JSZip=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(a){for(var b,c,e,f,g,h,i,j="",k=0;k<a.length;)b=a.charCodeAt(k++),c=a.charCodeAt(k++),e=a.charCodeAt(k++),f=b>>2,g=(3&b)<<4|c>>4,h=(15&c)<<2|e>>6,i=63&e,isNaN(c)?h=i=64:isNaN(e)&&(i=64),j=j+d.charAt(f)+d.charAt(g)+d.charAt(h)+d.charAt(i);return j},c.decode=function(a){var b,c,e,f,g,h,i,j="",k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)f=d.indexOf(a.charAt(k++)),g=d.indexOf(a.charAt(k++)),h=d.indexOf(a.charAt(k++)),i=d.indexOf(a.charAt(k++)),b=f<<2|g>>4,c=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(b),64!=h&&(j+=String.fromCharCode(c)),64!=i&&(j+=String.fromCharCode(e));return j}},{}],2:[function(a,b){"use strict";function c(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}c.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},b.exports=c},{}],3:[function(a,b,c){"use strict";c.STORE={magic:"\x00\x00",compress:function(a){return a},uncompress:function(a){return a},compressInputType:null,uncompressInputType:null},c.DEFLATE=a("./flate")},{"./flate":8}],4:[function(a,b){"use strict";var c=a("./utils"),d=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];b.exports=function(a,b){if("undefined"==typeof a||!a.length)return 0;var e="string"!==c.getTypeOf(a);"undefined"==typeof b&&(b=0);var f=0,g=0,h=0;b=-1^b;for(var i=0,j=a.length;j>i;i++)h=e?a[i]:a.charCodeAt(i),g=255&(b^h),f=d[g],b=b>>>8^f;return-1^b}},{"./utils":21}],5:[function(a,b){"use strict";function c(){this.data=null,this.length=0,this.index=0}var d=a("./utils");c.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<a||0>a)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var b,c=0;for(this.checkOffset(a),b=this.index+a-1;b>=this.index;b--)c=(c<<8)+this.byteAt(b);return this.index+=a,c},readString:function(a){return d.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1)}},b.exports=c},{"./utils":21}],6:[function(a,b,c){"use strict";c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!1,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],7:[function(a,b,c){"use strict";var d=a("./utils");c.string2binary=function(a){return d.string2binary(a)},c.string2Uint8Array=function(a){return d.transformTo("uint8array",a)},c.uint8Array2String=function(a){return d.transformTo("string",a)},c.string2Blob=function(a){var b=d.transformTo("arraybuffer",a);return d.arrayBuffer2Blob(b)},c.arrayBuffer2Blob=function(a){return d.arrayBuffer2Blob(a)},c.transformTo=function(a,b){return d.transformTo(a,b)},c.getTypeOf=function(a){return d.getTypeOf(a)},c.checkSupport=function(a){return d.checkSupport(a)},c.MAX_VALUE_16BITS=d.MAX_VALUE_16BITS,c.MAX_VALUE_32BITS=d.MAX_VALUE_32BITS,c.pretty=function(a){return d.pretty(a)},c.findCompression=function(a){return d.findCompression(a)},c.isRegExp=function(a){return d.isRegExp(a)}},{"./utils":21}],8:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,e=a("pako");c.uncompressInputType=d?"uint8array":"array",c.compressInputType=d?"uint8array":"array",c.magic="\b\x00",c.compress=function(a,b){return e.deflateRaw(a,{level:b.level||-1})},c.uncompress=function(a){return e.inflateRaw(a)}},{pako:24}],9:[function(a,b){"use strict";function c(a,b){return this instanceof c?(this.files={},this.comment=null,this.root="",a&&this.load(a,b),void(this.clone=function(){var a=new c;for(var b in this)"function"!=typeof this[b]&&(a[b]=this[b]);return a})):new c(a,b)}var d=a("./base64");c.prototype=a("./object"),c.prototype.load=a("./load"),c.support=a("./support"),c.defaults=a("./defaults"),c.utils=a("./deprecatedPublicUtils"),c.base64={encode:function(a){return d.encode(a)},decode:function(a){return d.decode(a)}},c.compressions=a("./compressions"),b.exports=c},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(a,b){"use strict";var c=a("./base64"),d=a("./zipEntries");b.exports=function(a,b){var e,f,g,h;for(b=b||{},b.base64&&(a=c.decode(a)),f=new d(a,b),e=f.files,g=0;g<e.length;g++)h=e[g],this.file(h.fileName,h.decompressed,{binary:!0,optimizedBinaryString:!0,date:h.date,dir:h.dir,comment:h.fileComment.length?h.fileComment:null,unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions,createFolders:b.createFolders});return f.zipComment.length&&(this.comment=f.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(a,b){(function(a){"use strict";b.exports=function(b,c){return new a(b,c)},b.exports.test=function(b){return a.isBuffer(b)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(a,b){"use strict";function c(a){this.data=a,this.length=this.data.length,this.index=0}var d=a("./uint8ArrayReader");c.prototype=new d,c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.index,this.index+a);return this.index+=a,b},b.exports=c},{"./uint8ArrayReader":18}],13:[function(a,b){"use strict";var c=a("./support"),d=a("./utils"),e=a("./crc32"),f=a("./signature"),g=a("./defaults"),h=a("./base64"),i=a("./compressions"),j=a("./compressedObject"),k=a("./nodeBuffer"),l=a("./utf8"),m=a("./stringWriter"),n=a("./uint8ArrayWriter"),o=function(a){if(a._data instanceof j&&(a._data=a._data.getContent(),a.options.binary=!0,a.options.base64=!1,"uint8array"===d.getTypeOf(a._data))){var b=a._data;a._data=new Uint8Array(b.length),0!==b.length&&a._data.set(b,0)}return a._data},p=function(a){var b=o(a),e=d.getTypeOf(b);return"string"===e?!a.options.binary&&c.nodebuffer?k(b,"utf-8"):a.asBinary():b},q=function(a){var b=o(this);return null===b||"undefined"==typeof b?"":(this.options.base64&&(b=h.decode(b)),b=a&&this.options.binary?D.utf8decode(b):d.transformTo("string",b),a||this.options.binary||(b=d.transformTo("string",D.utf8encode(b))),b)},r=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this.options=c,this._initialMetadata={dir:c.dir,date:c.date}};r.prototype={asText:function(){return q.call(this,!0)},asBinary:function(){return q.call(this,!1)},asNodeBuffer:function(){var a=p(this);return d.transformTo("nodebuffer",a)},asUint8Array:function(){var a=p(this);return d.transformTo("uint8array",a)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var s=function(a,b){var c,d="";for(c=0;b>c;c++)d+=String.fromCharCode(255&a),a>>>=8;return d},t=function(){var a,b,c={};for(a=0;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&"undefined"==typeof c[b]&&(c[b]=arguments[a][b]);return c},u=function(a){return a=a||{},a.base64!==!0||null!==a.binary&&void 0!==a.binary||(a.binary=!0),a=t(a,g),a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),a},v=function(a,b,c){var e,f=d.getTypeOf(b);if(c=u(c),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(a=x(a)),c.createFolders&&(e=w(a))&&y.call(this,e,!0),c.dir||null===b||"undefined"==typeof b)c.base64=!1,c.binary=!1,b=null,f=null;else if("string"===f)c.binary&&!c.base64&&c.optimizedBinaryString!==!0&&(b=d.string2binary(b));else{if(c.base64=!1,c.binary=!0,!(f||b instanceof j))throw new Error("The data of '"+a+"' is in an unsupported format !");"arraybuffer"===f&&(b=d.transformTo("uint8array",b))}var g=new r(a,b,c);return this.files[a]=g,g},w=function(a){"/"==a.slice(-1)&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},x=function(a){return"/"!=a.slice(-1)&&(a+="/"),a},y=function(a,b){return b="undefined"!=typeof b?b:!1,a=x(a),this.files[a]||v.call(this,a,null,{dir:!0,createFolders:b}),this.files[a]},z=function(a,b,c){var f,g=new j;return a._data instanceof j?(g.uncompressedSize=a._data.uncompressedSize,g.crc32=a._data.crc32,0===g.uncompressedSize||a.dir?(b=i.STORE,g.compressedContent="",g.crc32=0):a._data.compressionMethod===b.magic?g.compressedContent=a._data.getCompressedContent():(f=a._data.getContent(),g.compressedContent=b.compress(d.transformTo(b.compressInputType,f),c))):(f=p(a),(!f||0===f.length||a.dir)&&(b=i.STORE,f=""),g.uncompressedSize=f.length,g.crc32=e(f),g.compressedContent=b.compress(d.transformTo(b.compressInputType,f),c)),g.compressedSize=g.compressedContent.length,g.compressionMethod=b.magic,g},A=function(a,b){var c=a;return a||(c=b?16893:33204),(65535&c)<<16},B=function(a){return 63&(a||0)},C=function(a,b,c,g,h){var i,j,k,m,n=(c.compressedContent,d.transformTo("string",l.utf8encode(b.name))),o=b.comment||"",p=d.transformTo("string",l.utf8encode(o)),q=n.length!==b.name.length,r=p.length!==o.length,t=b.options,u="",v="",w="";k=b._initialMetadata.dir!==b.dir?b.dir:t.dir,m=b._initialMetadata.date!==b.date?b.date:t.date;var x=0,y=0;k&&(x|=16),"UNIX"===h?(y=798,x|=A(b.unixPermissions,k)):(y=20,x|=B(b.dosPermissions,k)),i=m.getHours(),i<<=6,i|=m.getMinutes(),i<<=5,i|=m.getSeconds()/2,j=m.getFullYear()-1980,j<<=4,j|=m.getMonth()+1,j<<=5,j|=m.getDate(),q&&(v=s(1,1)+s(e(n),4)+n,u+="up"+s(v.length,2)+v),r&&(w=s(1,1)+s(this.crc32(p),4)+p,u+="uc"+s(w.length,2)+w);var z="";z+="\n\x00",z+=q||r?"\x00\b":"\x00\x00",z+=c.compressionMethod,z+=s(i,2),z+=s(j,2),z+=s(c.crc32,4),z+=s(c.compressedSize,4),z+=s(c.uncompressedSize,4),z+=s(n.length,2),z+=s(u.length,2);var C=f.LOCAL_FILE_HEADER+z+n+u,D=f.CENTRAL_FILE_HEADER+s(y,2)+z+s(p.length,2)+"\x00\x00\x00\x00"+s(x,4)+s(g,4)+n+u+p;return{fileRecord:C,dirRecord:D,compressedObject:c}},D={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(a){var b,c,d,e,f=[];for(b in this.files)this.files.hasOwnProperty(b)&&(d=this.files[b],e=new r(d.name,d._data,t(d.options)),c=b.slice(this.root.length,b.length),b.slice(0,this.root.length)===this.root&&a(c,e)&&f.push(e));return f},file:function(a,b,c){if(1===arguments.length){if(d.isRegExp(a)){var e=a;return this.filter(function(a,b){return!b.dir&&e.test(a)})}return this.filter(function(b,c){return!c.dir&&b===a})[0]||null}return a=this.root+a,v.call(this,a,b,c),this},folder:function(a){if(!a)return this;if(d.isRegExp(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a,c=y.call(this,b),e=this.clone();return e.root=c.name,e},remove:function(a){a=this.root+a;var b=this.files[a];if(b||("/"!=a.slice(-1)&&(a+="/"),b=this.files[a]),b&&!b.dir)delete this.files[a];else for(var c=this.filter(function(b,c){return c.name.slice(0,a.length)===a}),d=0;d<c.length;d++)delete this.files[c[d].name];return this},generate:function(a){a=t(a||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),d.checkSupport(a.type),("darwin"===a.platform||"freebsd"===a.platform||"linux"===a.platform||"sunos"===a.platform)&&(a.platform="UNIX"),"win32"===a.platform&&(a.platform="DOS");var b,c,e=[],g=0,j=0,k=d.transformTo("string",this.utf8encode(a.comment||this.comment||""));for(var l in this.files)if(this.files.hasOwnProperty(l)){var o=this.files[l],p=o.options.compression||a.compression.toUpperCase(),q=i[p];if(!q)throw new Error(p+" is not a valid compression method !");var r=o.options.compressionOptions||a.compressionOptions||{},u=z.call(this,o,q,r),v=C.call(this,l,o,u,g,a.platform);g+=v.fileRecord.length+u.compressedSize,j+=v.dirRecord.length,e.push(v)}var w="";w=f.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+s(e.length,2)+s(e.length,2)+s(j,4)+s(g,4)+s(k.length,2)+k;var x=a.type.toLowerCase();for(b="uint8array"===x||"arraybuffer"===x||"blob"===x||"nodebuffer"===x?new n(g+j+w.length):new m(g+j+w.length),c=0;c<e.length;c++)b.append(e[c].fileRecord),b.append(e[c].compressedObject.compressedContent);for(c=0;c<e.length;c++)b.append(e[c].dirRecord);b.append(w);var y=b.finalize();switch(a.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return d.transformTo(a.type.toLowerCase(),y);case"blob":return d.arrayBuffer2Blob(d.transformTo("arraybuffer",y),a.mimeType);case"base64":return a.base64?h.encode(y):y;default:return y}},crc32:function(a,b){return e(a,b)},utf8encode:function(a){return d.transformTo("string",l.utf8encode(a))},utf8decode:function(a){return l.utf8decode(a)}};b.exports=D},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(a,b,c){"use strict";c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\b"},{}],15:[function(a,b){"use strict";function c(a,b){this.data=a,b||(this.data=e.string2binary(this.data)),this.length=this.data.length,this.index=0}var d=a("./dataReader"),e=a("./utils");c.prototype=new d,c.prototype.byteAt=function(a){return this.data.charCodeAt(a)},c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)},c.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.index,this.index+a);return this.index+=a,b},b.exports=c},{"./dataReader":5,"./utils":21}],16:[function(a,b){"use strict";var c=a("./utils"),d=function(){this.data=[]};d.prototype={append:function(a){a=c.transformTo("string",a),this.data.push(a)},finalize:function(){return this.data.join("")}},b.exports=d},{"./utils":21}],17:[function(a,b,c){(function(a){"use strict";if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,c.nodebuffer="undefined"!=typeof a,c.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)c.blob=!1;else{var b=new ArrayBuffer(0);try{c.blob=0===new Blob([b],{type:"application/zip"}).size}catch(d){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;f.append(b),c.blob=0===f.getBlob("application/zip").size}catch(d){c.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(a,b){"use strict";function c(a){a&&(this.data=a,this.length=this.data.length,this.index=0)}var d=a("./dataReader");c.prototype=new d,c.prototype.byteAt=function(a){return this.data[a]},c.prototype.lastIndexOfSignature=function(a){for(var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===b&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===e)return f;return-1},c.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var b=this.data.subarray(this.index,this.index+a);return this.index+=a,b},b.exports=c},{"./dataReader":5}],19:[function(a,b){"use strict";var c=a("./utils"),d=function(a){this.data=new Uint8Array(a),this.index=0};d.prototype={append:function(a){0!==a.length&&(a=c.transformTo("uint8array",a),this.data.set(a,this.index),this.index+=a.length)},finalize:function(){return this.data}},b.exports=d},{"./utils":21}],20:[function(a,b,c){"use strict";for(var d=a("./utils"),e=a("./support"),f=a("./nodeBuffer"),g=new Array(256),h=0;256>h;h++)g[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;g[254]=g[254]=1;var i=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=e.uint8array?new Uint8Array(i):new Array(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},j=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+g[a[c]]>b?c:b},k=function(a){var b,c,e,f,h=a.length,i=new Array(2*h);for(c=0,b=0;h>b;)if(e=a[b++],128>e)i[c++]=e;else if(f=g[e],f>4)i[c++]=65533,b+=f-1;else{for(e&=2===f?31:3===f?15:7;f>1&&h>b;)e=e<<6|63&a[b++],f--;f>1?i[c++]=65533:65536>e?i[c++]=e:(e-=65536,i[c++]=55296|e>>10&1023,i[c++]=56320|1023&e)}return i.length!==c&&(i.subarray?i=i.subarray(0,c):i.length=c),d.applyFromCharCode(i)};c.utf8encode=function(a){return e.nodebuffer?f(a,"utf-8"):i(a)},c.utf8decode=function(a){if(e.nodebuffer)return d.transformTo("nodebuffer",a).toString("utf-8");a=d.transformTo(e.uint8array?"uint8array":"array",a);for(var b=[],c=0,f=a.length,g=65536;f>c;){var h=j(a,Math.min(c+g,f));b.push(k(e.uint8array?a.subarray(c,h):a.slice(c,h))),c=h}return b.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(a,b,c){"use strict";function d(a){return a}function e(a,b){for(var c=0;c<a.length;++c)b[c]=255&a.charCodeAt(c);return b}function f(a){var b=65536,d=[],e=a.length,f=c.getTypeOf(a),g=0,h=!0;try{switch(f){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,j(0))}}catch(i){h=!1}if(!h){for(var k="",l=0;l<a.length;l++)k+=String.fromCharCode(a[l]);return k}for(;e>g&&b>1;)try{d.push("array"===f||"nodebuffer"===f?String.fromCharCode.apply(null,a.slice(g,Math.min(g+b,e))):String.fromCharCode.apply(null,a.subarray(g,Math.min(g+b,e)))),g+=b}catch(i){b=Math.floor(b/2)}return d.join("")}function g(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var h=a("./support"),i=a("./compressions"),j=a("./nodeBuffer");c.string2binary=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(255&a.charCodeAt(c));return b},c.arrayBuffer2Blob=function(a,b){c.checkSupport("blob"),b=b||"application/zip";try{return new Blob([a],{type:b})}catch(d){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;return f.append(a),f.getBlob(b)}catch(d){throw new Error("Bug : can't construct the Blob.")}}},c.applyFromCharCode=f;var k={};k.string={string:d,array:function(a){return e(a,new Array(a.length))},arraybuffer:function(a){return k.string.uint8array(a).buffer},uint8array:function(a){return e(a,new Uint8Array(a.length))},nodebuffer:function(a){return e(a,j(a.length))}},k.array={string:f,array:d,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return j(a)}},k.arraybuffer={string:function(a){return f(new Uint8Array(a))},array:function(a){return g(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:d,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return j(new Uint8Array(a))}},k.uint8array={string:f,array:function(a){return g(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:d,nodebuffer:function(a){return j(a)}},k.nodebuffer={string:f,array:function(a){return g(a,new Array(a.length))},arraybuffer:function(a){return k.nodebuffer.uint8array(a).buffer},uint8array:function(a){return g(a,new Uint8Array(a.length))},nodebuffer:d},c.transformTo=function(a,b){if(b||(b=""),!a)return b;c.checkSupport(a);var d=c.getTypeOf(b),e=k[d][a](b);return e},c.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":h.nodebuffer&&j.test(a)?"nodebuffer":h.uint8array&&a instanceof Uint8Array?"uint8array":h.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(a){var b=h[a.toLowerCase()];if(!b)throw new Error(a+" is not supported by this browser")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(a){var b,c,d="";for(c=0;c<(a||"").length;c++)b=a.charCodeAt(c),d+="\\x"+(16>b?"0":"")+b.toString(16).toUpperCase();return d},c.findCompression=function(a){for(var b in i)if(i.hasOwnProperty(b)&&i[b].magic===a)return i[b];return null},c.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(a,b){"use strict";function c(a,b){this.files=[],this.loadOptions=b,a&&this.load(a)}var d=a("./stringReader"),e=a("./nodeBufferReader"),f=a("./uint8ArrayReader"),g=a("./utils"),h=a("./signature"),i=a("./zipEntry"),j=a("./support"),k=a("./object");c.prototype={checkSignature:function(a){var b=this.reader.readString(4);if(b!==a)throw new Error("Corrupted zip or bug : unexpected signature ("+g.pretty(b)+", expected "+g.pretty(a)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=k.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a,b,c,d=this.zip64EndOfCentralSize-44,e=0;d>e;)a=this.reader.readInt(2),b=this.reader.readInt(4),c=this.reader.readString(b),this.zip64ExtensibleData[a]={id:a,length:b,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===h.CENTRAL_FILE_HEADER;)a=new i({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(-1===a){var b=!0;try{this.reader.setIndex(0),this.checkSignature(h.LOCAL_FILE_HEADER),b=!1}catch(c){}throw new Error(b?"Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html":"Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(a),this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===a)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(a),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(a){var b=g.getTypeOf(a);this.reader="string"!==b||j.uint8array?"nodebuffer"===b?new e(a):new f(g.transformTo("uint8array",a)):new d(a,this.loadOptions.optimizedBinaryString)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=c},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(a,b){"use strict";function c(a,b){this.options=a,this.loadOptions=b}var d=a("./stringReader"),e=a("./utils"),f=a("./compressedObject"),g=a("./object"),h=0,i=3;c.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(a,b,c){return function(){var d=a.index;a.setIndex(b);var e=a.readData(c);return a.setIndex(d),e}},prepareContent:function(a,b,c,d,f){return function(){var a=e.transformTo(d.uncompressInputType,this.getCompressedContent()),b=d.uncompress(a);if(b.length!==f)throw new Error("Bug : uncompressed data size mismatch");return b}},readLocalPart:function(a){var b,c;if(a.skip(22),this.fileNameLength=a.readInt(2),c=a.readInt(2),this.fileName=a.readString(this.fileNameLength),a.skip(c),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(b=e.findCompression(this.compressionMethod),null===b)throw new Error("Corrupted zip : compression "+e.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new f,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(a,a.index,this.compressedSize,b),this.decompressed.getContent=this.prepareContent(a,a.index,this.compressedSize,b,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=e.transformTo("string",this.decompressed.getContent()),g.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(a){if(this.versionMadeBy=a.readInt(2),this.versionNeeded=a.readInt(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4),this.fileNameLength=a.readInt(2),this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=a.readString(this.fileNameLength),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=16&this.externalFileAttributes?!0:!1,a===h&&(this.dosPermissions=63&this.externalFileAttributes),a===i&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var a=new d(this.extraFields[1].value);this.uncompressedSize===e.MAX_VALUE_32BITS&&(this.uncompressedSize=a.readInt(8)),this.compressedSize===e.MAX_VALUE_32BITS&&(this.compressedSize=a.readInt(8)),this.localHeaderOffset===e.MAX_VALUE_32BITS&&(this.localHeaderOffset=a.readInt(8)),this.diskNumberStart===e.MAX_VALUE_32BITS&&(this.diskNumberStart=a.readInt(4))}},readExtraFields:function(a){var b,c,d,e=a.index;for(this.extraFields=this.extraFields||{};a.index<e+this.extraFieldsLength;)b=a.readInt(2),c=a.readInt(2),d=a.readString(c),this.extraFields[b]={id:b,length:c,value:d}},handleUTF8:function(){if(this.useUTF8())this.fileName=g.utf8decode(this.fileName),this.fileComment=g.utf8decode(this.fileComment);else{var a=this.findExtraFieldUnicodePath();null!==a&&(this.fileName=a);var b=this.findExtraFieldUnicodeComment();null!==b&&(this.fileComment=b)}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var b=new d(a.value);return 1!==b.readInt(1)?null:g.crc32(this.fileName)!==b.readInt(4)?null:g.utf8decode(b.readString(a.length-5));

}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var b=new d(a.value);return 1!==b.readInt(1)?null:g.crc32(this.fileComment)!==b.readInt(4)?null:g.utf8decode(b.readString(a.length-5))}return null}},b.exports=c},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(a,b){"use strict";var c=a("./lib/utils/common").assign,d=a("./lib/deflate"),e=a("./lib/inflate"),f=a("./lib/zlib/constants"),g={};c(g,d,e,f),b.exports=g},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(a,b,c){"use strict";function d(a,b){var c=new s(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function e(a,b){return b=b||{},b.raw=!0,d(a,b)}function f(a,b){return b=b||{},b.gzip=!0,d(a,b)}var g=a("./zlib/deflate.js"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/messages"),k=a("./zlib/zstream"),l=0,m=4,n=0,o=1,p=-1,q=0,r=8,s=function(a){this.options=h.assign({level:p,method:r,chunkSize:16384,windowBits:15,memLevel:8,strategy:q,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var c=g.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==n)throw new Error(j[c]);b.header&&g.deflateSetHeader(this.strm,b.header)};s.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?m:l,e.input="string"==typeof a?i.string2buf(a):a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new h.Buf8(f),e.next_out=0,e.avail_out=f),c=g.deflate(e,d),c!==o&&c!==n)return this.onEnd(c),this.ended=!0,!1;(0===e.avail_out||0===e.avail_in&&d===m)&&this.onData("string"===this.options.to?i.buf2binstring(h.shrinkBuf(e.output,e.next_out)):h.shrinkBuf(e.output,e.next_out))}while((e.avail_in>0||0===e.avail_out)&&c!==o);return d===m?(c=g.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===n):!0},s.prototype.onData=function(a){this.chunks.push(a)},s.prototype.onEnd=function(a){a===n&&(this.result="string"===this.options.to?this.chunks.join(""):h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=s,c.deflate=d,c.deflateRaw=e,c.gzip=f},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(a,b,c){"use strict";function d(a,b){var c=new m(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function e(a,b){return b=b||{},b.raw=!0,d(a,b)}var f=a("./zlib/inflate.js"),g=a("./utils/common"),h=a("./utils/strings"),i=a("./zlib/constants"),j=a("./zlib/messages"),k=a("./zlib/zstream"),l=a("./zlib/gzheader"),m=function(a){this.options=g.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var c=f.inflateInit2(this.strm,b.windowBits);if(c!==i.Z_OK)throw new Error(j[c]);this.header=new l,f.inflateGetHeader(this.strm,this.header)};m.prototype.push=function(a,b){var c,d,e,j,k,l=this.strm,m=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?i.Z_FINISH:i.Z_NO_FLUSH,l.input="string"==typeof a?h.binstring2buf(a):a,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new g.Buf8(m),l.next_out=0,l.avail_out=m),c=f.inflate(l,i.Z_NO_FLUSH),c!==i.Z_STREAM_END&&c!==i.Z_OK)return this.onEnd(c),this.ended=!0,!1;l.next_out&&(0===l.avail_out||c===i.Z_STREAM_END||0===l.avail_in&&d===i.Z_FINISH)&&("string"===this.options.to?(e=h.utf8border(l.output,l.next_out),j=l.next_out-e,k=h.buf2string(l.output,e),l.next_out=j,l.avail_out=m-j,j&&g.arraySet(l.output,l.output,e,j,0),this.onData(k)):this.onData(g.shrinkBuf(l.output,l.next_out)))}while(l.avail_in>0&&c!==i.Z_STREAM_END);return c===i.Z_STREAM_END&&(d=i.Z_FINISH),d===i.Z_FINISH?(c=f.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===i.Z_OK):!0},m.prototype.onData=function(a){this.chunks.push(a)},m.prototype.onEnd=function(a){a===i.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):g.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=m,c.inflate=d,c.inflateRaw=e,c.ungzip=d},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;c>b;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;c>b;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],28:[function(a,b,c){"use strict";function d(a,b){if(65537>b&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;b>d;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(h){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){g=!1}for(var i=new e.Buf8(256),j=0;256>j;j++)i[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;i[254]=i[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=new e.Buf8(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;d>c;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,h=b||a.length,j=new Array(2*h);for(e=0,c=0;h>c;)if(f=a[c++],128>f)j[e++]=f;else if(g=i[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&h>c;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:65536>f?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+i[a[c]]>b?c:b}},{"./common":27}],29:[function(a,b){"use strict";function c(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=c},{}],30:[function(a,b){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(a,b){"use strict";function c(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function d(a,b,c,d){var f=e,g=d+c;a=-1^a;for(var h=d;g>h;h++)a=a>>>8^f[255&(a^b[h])];return-1^a}var e=c();b.exports=d},{}],32:[function(a,b,c){"use strict";function d(a,b){return a.msg=G[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(C.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function h(a,b){D._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,C.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=E(a.adler,b,e,c):2===a.state.wrap&&(a.adler=F(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-ja?a.strstart-(a.w_size-ja):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ia,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&m>f);if(d=ia-(m-f),f=m-ia,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-ja)){C.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=ha)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+ha-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<ha)););}while(a.lookahead<ja&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===H)return sa;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return sa;if(a.strstart-a.block_start>=a.w_size-ja&&(h(a,!1),0===a.strm.avail_out))return sa}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ua:va):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?sa:sa}function o(a,b){for(var c,d;;){if(a.lookahead<ja){if(m(a),a.lookahead<ja&&b===H)return sa;if(0===a.lookahead)break}if(c=0,a.lookahead>=ha&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ha-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-ja&&(a.match_length=l(a,c)),a.match_length>=ha)if(d=D._tr_tally(a,a.strstart-a.match_start,a.match_length-ha),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=ha){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ha-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return sa}return a.insert=a.strstart<ha-1?a.strstart:ha-1,b===K?(h(a,!0),0===a.strm.avail_out?ua:va):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sa:ta}function p(a,b){for(var c,d,e;;){if(a.lookahead<ja){if(m(a),a.lookahead<ja&&b===H)return sa;if(0===a.lookahead)break}if(c=0,a.lookahead>=ha&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ha-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=ha-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-ja&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===S||a.match_length===ha&&a.strstart-a.match_start>4096)&&(a.match_length=ha-1)),a.prev_length>=ha&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-ha,d=D._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-ha),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ha-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=ha-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return sa}else if(a.match_available){if(d=D._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return sa}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=D._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<ha-1?a.strstart:ha-1,b===K?(h(a,!0),0===a.strm.avail_out?ua:va):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sa:ta}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ia){if(m(a),a.lookahead<=ia&&b===H)return sa;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=ha&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ia;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&f>e);a.match_length=ia-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=ha?(c=D._tr_tally(a,1,a.match_length-ha),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return sa}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ua:va):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sa:ta}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===H)return sa;break}if(a.match_length=0,c=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return sa}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ua:va):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sa:ta}function s(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=B[a.level].max_lazy,a.good_match=B[a.level].good_length,a.nice_match=B[a.level].nice_length,a.max_chain_length=B[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=ha-1,a.match_available=0,a.ins_h=0}function t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*fa),this.dyn_dtree=new C.Buf16(2*(2*da+1)),this.bl_tree=new C.Buf16(2*(2*ea+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(ga+1),this.heap=new C.Buf16(2*ca+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*ca+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function u(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=X,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?la:qa,a.adler=2===b.wrap?0:1,b.last_flush=H,D._tr_init(b),M):d(a,O)}function v(a){var b=u(a);return b===M&&s(a.state),b}function w(a,b){return a&&a.state?2!==a.state.wrap?O:(a.state.gzhead=b,M):O}function x(a,b,c,e,f,g){if(!a)return O;var h=1;if(b===R&&(b=6),0>e?(h=0,e=-e):e>15&&(h=2,e-=16),1>f||f>Z||c!==Y||8>e||e>15||0>b||b>9||0>g||g>V)return d(a,O);8===e&&(e=9);var i=new t;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+ha-1)/ha),i.window=new C.Buf8(2*i.w_size),i.head=new C.Buf16(i.hash_size),i.prev=new C.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new C.Buf8(i.pending_buf_size),i.d_buf=i.lit_bufsize>>1,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,v(a)}function y(a,b){return x(a,b,Y,$,_,W)}function z(a,b){var c,h,k,l;if(!a||!a.state||b>L||0>b)return a?d(a,O):O;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===ra&&b!==K)return d(a,0===a.avail_out?Q:O);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===la)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=T||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=F(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=ma):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=T||h.level<2?4:0),i(h,wa),h.status=qa);else{var m=Y+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=T||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=ka),m+=31-m%31,h.status=qa,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===ma)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=na)}else h.status=na;if(h.status===na)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=oa)}else h.status=oa;if(h.status===oa)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=pa)}else h.status=pa;if(h.status===pa&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=qa)):h.status=qa),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,M}else if(0===a.avail_in&&e(b)<=e(c)&&b!==K)return d(a,Q);if(h.status===ra&&0!==a.avail_in)return d(a,Q);if(0!==a.avail_in||0!==h.lookahead||b!==H&&h.status!==ra){var o=h.strategy===T?r(h,b):h.strategy===U?q(h,b):B[h.level].func(h,b);if((o===ua||o===va)&&(h.status=ra),o===sa||o===ua)return 0===a.avail_out&&(h.last_flush=-1),M;if(o===ta&&(b===I?D._tr_align(h):b!==L&&(D._tr_stored_block(h,0,0,!1),b===J&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,M}return b!==K?M:h.wrap<=0?N:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?M:N)}function A(a){var b;return a&&a.state?(b=a.state.status,b!==la&&b!==ma&&b!==na&&b!==oa&&b!==pa&&b!==qa&&b!==ra?d(a,O):(a.state=null,b===qa?d(a,P):M)):O}var B,C=a("../utils/common"),D=a("./trees"),E=a("./adler32"),F=a("./crc32"),G=a("./messages"),H=0,I=1,J=3,K=4,L=5,M=0,N=1,O=-2,P=-3,Q=-5,R=-1,S=1,T=2,U=3,V=4,W=0,X=2,Y=8,Z=9,$=15,_=8,aa=29,ba=256,ca=ba+1+aa,da=30,ea=19,fa=2*ca+1,ga=15,ha=3,ia=258,ja=ia+ha+1,ka=32,la=42,ma=69,na=73,oa=91,pa=103,qa=113,ra=666,sa=1,ta=2,ua=3,va=4,wa=3,xa=function(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e};B=[new xa(0,0,0,0,n),new xa(4,4,8,4,o),new xa(4,5,16,8,o),new xa(4,6,32,32,o),new xa(4,4,16,16,p),new xa(8,16,32,32,p),new xa(8,16,128,128,p),new xa(8,32,128,256,p),new xa(32,128,258,1024,p),new xa(32,258,258,4096,p)],c.deflateInit=y,c.deflateInit2=x,c.deflateReset=v,c.deflateResetKeep=u,c.deflateSetHeader=w,c.deflate=z,c.deflateEnd=A,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(a,b){"use strict";function c(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=c},{}],34:[function(a,b){"use strict";var c=30,d=12;b.exports=function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;e=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=e.dmax,l=e.wsize,m=e.whave,n=e.wnext,o=e.window,p=e.hold,q=e.bits,r=e.lencode,s=e.distcode,t=(1<<e.lenbits)-1,u=(1<<e.distbits)-1;a:do{15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){e.mode=d;break a}a.msg="invalid literal/length code",e.mode=c;break a}x=65535&v,w&=15,w&&(w>q&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",e.mode=c;break a}if(y=65535&v,w&=15,w>q&&(p+=B[f++]<<q,q+=8,w>q&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",e.mode=c;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&e.sane){a.msg="invalid distance too far back",e.mode=c;break a}if(z=0,A=o,0===n){if(z+=l-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(w>n){if(z+=l+n-w,w-=n,x>w){x-=w;do C[h++]=o[z++];while(--w);if(z=0,x>n){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(g>f&&j>h);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=g>f?5+(g-f):5-(f-g),a.avail_out=j>h?257+(j-h):257-(h-j),e.hold=p,e.bits=q}},{}],35:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=K,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new r.Buf32(oa),b.distcode=b.distdyn=new r.Buf32(pa),b.sane=1,b.back=-1,C):F}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):F}function h(a,b){var c,d;return a&&a.state?(d=a.state,0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15)),b&&(8>b||b>15)?F:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):F}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==C&&(a.state=null),c):F}function j(a){return i(a,ra)}function k(a){if(sa){var b;for(p=new r.Buf32(512),q=new r.Buf32(32),b=0;144>b;)a.lens[b++]=8;for(;256>b;)a.lens[b++]=9;for(;280>b;)a.lens[b++]=7;for(;288>b;)a.lens[b++]=8;for(v(x,a.lens,0,288,p,0,a.work,{bits:9}),b=0;32>b;)a.lens[b++]=5;v(y,a.lens,0,32,q,0,a.work,{bits:5}),sa=!1}a.lencode=p,a.lenbits=9,a.distcode=q,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new r.Buf8(f.wsize)),d>=f.wsize?(r.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),r.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(r.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=0,Ba=new r.Buf8(4),Ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return F;c=a.state,c.mode===V&&(c.mode=W),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xa=C;a:for(;;)switch(c.mode){case K:if(0===c.wrap){c.mode=W;break}for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=t(c.check,Ba,2,0),m=0,n=0,c.mode=L;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=la;break}if((15&m)!==J){a.msg="unknown compression method",c.mode=la;break}if(m>>>=4,n-=4,wa=(15&m)+8,0===c.wbits)c.wbits=wa;else if(wa>c.wbits){a.msg="invalid window size",c.mode=la;break}c.dmax=1<<wa,a.adler=c.check=1,c.mode=512&m?T:V,m=0,n=0;break;case L:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==J){a.msg="unknown compression method",c.mode=la;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=la;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=t(c.check,Ba,2,0)),m=0,n=0,c.mode=M;case M:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,Ba[2]=m>>>16&255,Ba[3]=m>>>24&255,c.check=t(c.check,Ba,4,0)),m=0,n=0,c.mode=N;case N:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=t(c.check,Ba,2,0)),m=0,n=0,c.mode=O;case O:if(1024&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=t(c.check,Ba,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=P;case P:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wa=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),r.arraySet(c.head.extra,e,g,q,wa)),512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=Q;case Q:if(2048&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.name+=String.fromCharCode(wa));while(wa&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=R;case R:if(4096&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.comment+=String.fromCharCode(wa));while(wa&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.comment=null);c.mode=S;case S:if(512&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=la;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=V;break;case T:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=U;case U:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,E;a.adler=c.check=1,c.mode=V;case V:if(b===A||b===B)break a;case W:if(c.last){m>>>=7&n,n-=7&n,c.mode=ia;break}for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=X;break;case 1:if(k(c),c.mode=ba,b===B){m>>>=2,n-=2;break a}break;case 2:c.mode=$;break;case 3:a.msg="invalid block type",c.mode=la}m>>>=2,n-=2;break;case X:for(m>>>=7&n,n-=7&n;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=la;break}if(c.length=65535&m,m=0,n=0,c.mode=Y,b===B)break a;case Y:c.mode=Z;case Z:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;r.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=V;break;case $:for(;14>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=la;break}c.have=0,c.mode=_;case _:for(;c.have<c.ncode;){for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Ca[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Ca[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,ya={bits:c.lenbits},xa=v(w,c.lens,0,19,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid code lengths set",c.mode=la;break}c.have=0,c.mode=aa;case aa:for(;c.have<c.nlen+c.ndist;){for(;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(16>sa)m>>>=qa,n-=qa,c.lens[c.have++]=sa;else{if(16===sa){for(za=qa+2;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qa,n-=qa,0===c.have){a.msg="invalid bit length repeat",c.mode=la;break}wa=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sa){for(za=qa+3;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=3+(7&m),m>>>=3,n-=3}else{for(za=qa+7;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=la;break}for(;q--;)c.lens[c.have++]=wa}}if(c.mode===la)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=la;break}if(c.lenbits=9,ya={bits:c.lenbits},xa=v(x,c.lens,0,c.nlen,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid literal/lengths set",c.mode=la;break}if(c.distbits=6,c.distcode=c.distdyn,ya={bits:c.distbits},xa=v(y,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,ya),c.distbits=ya.bits,xa){a.msg="invalid distances set",c.mode=la;break}if(c.mode=ba,b===B)break a;case ba:c.mode=ca;case ca:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,u(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,
n=c.bits,c.mode===V&&(c.back=-1);break}for(c.back=0;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(ra&&0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.lencode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=ta+qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,c.length=sa,0===ra){c.mode=ha;break}if(32&ra){c.back=-1,c.mode=V;break}if(64&ra){a.msg="invalid literal/length code",c.mode=la;break}c.extra=15&ra,c.mode=da;case da:if(c.extra){for(za=c.extra;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=ea;case ea:for(;Aa=c.distcode[m&(1<<c.distbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.distcode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=ta+qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,64&ra){a.msg="invalid distance code",c.mode=la;break}c.offset=sa,c.extra=15&ra,c.mode=fa;case fa:if(c.extra){for(za=c.extra;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=la;break}c.mode=ga;case ga:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=la;break}q>c.wnext?(q-=c.wnext,oa=c.wsize-q):oa=c.wnext-q,q>c.length&&(q=c.length),pa=c.window}else pa=f,oa=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pa[oa++];while(--q);0===c.length&&(c.mode=ca);break;case ha:if(0===j)break a;f[h++]=c.length,j--,c.mode=ca;break;case ia:if(c.wrap){for(;32>n;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?t(c.check,f,p,h-p):s(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=la;break}m=0,n=0}c.mode=ja;case ja:if(c.wrap&&c.flags){for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=la;break}m=0,n=0}c.mode=ka;case ka:xa=D;break a;case la:xa=G;break a;case ma:return H;case na:default:return F}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<la&&(c.mode<ia||b!==z))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=ma,H):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?t(c.check,f,p,a.next_out-p):s(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===V?128:0)+(c.mode===ba||c.mode===Y?256:0),(0===o&&0===p||b===z)&&xa===C&&(xa=I),xa)}function n(a){if(!a||!a.state)return F;var b=a.state;return b.window&&(b.window=null),a.state=null,C}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?F:(c.head=b,b.done=!1,C)):F}var p,q,r=a("../utils/common"),s=a("./adler32"),t=a("./crc32"),u=a("./inffast"),v=a("./inftrees"),w=0,x=1,y=2,z=4,A=5,B=6,C=0,D=1,E=2,F=-2,G=-3,H=-4,I=-5,J=8,K=1,L=2,M=3,N=4,O=5,P=6,Q=7,R=8,S=9,T=10,U=11,V=12,W=13,X=14,Y=15,Z=16,$=17,_=18,aa=19,ba=20,ca=21,da=22,ea=23,fa=24,ga=25,ha=26,ia=27,ja=28,ka=29,la=30,ma=31,na=32,oa=852,pa=592,qa=15,ra=qa,sa=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(a,b){"use strict";var c=a("../utils/common"),d=15,e=852,f=592,g=0,h=1,i=2,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,n,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new c.Buf16(d+1),Q=new c.Buf16(d+1),R=null,S=0;for(D=0;d>=D;D++)P[D]=0;for(E=0;o>E;E++)P[b[n+E]]++;for(H=C,G=d;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;G>F&&0===P[F];F++);for(F>H&&(H=F),K=1,D=1;d>=D;D++)if(K<<=1,K-=P[D],0>K)return-1;if(K>0&&(a===g||1!==G))return-1;for(Q[1]=0,D=1;d>D;D++)Q[D+1]=Q[D]+P[D];for(E=0;o>E;E++)0!==b[n+E]&&(r[Q[b[n+E]]++]=E);if(a===g?(N=R=r,y=19):a===h?(N=j,O-=257,R=k,S-=257,y=256):(N=l,R=m,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===h&&L>e||a===i&&L>f)return 1;for(var T=0;;){T++,z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[n+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;G>I+J&&(K-=P[I+J],!(0>=K));)I++,K<<=1;if(L+=1<<I,a===h&&L>e||a===i&&L>f)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":27}],37:[function(a,b){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a){return 256>a?ga[a]:ga[256+(a>>>7)]}function f(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function g(a,b,c){a.bi_valid>V-c?(a.bi_buf|=b<<a.bi_valid&65535,f(a,a.bi_buf),a.bi_buf=b>>V-a.bi_valid,a.bi_valid+=c-V):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function h(a,b,c){g(a,c[2*b],c[2*b+1])}function i(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function j(a){16===a.bi_valid?(f(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function k(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;U>=f;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;T>c;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function l(a,b,c){var d,e,f=new Array(U+1),g=0;for(d=1;U>=d;d++)f[d]=g=g+c[d-1]<<1;for(e=0;b>=e;e++){var h=a[2*e+1];0!==h&&(a[2*e]=i(f[h]++,h))}}function m(){var a,b,c,d,e,f=new Array(U+1);for(c=0,d=0;O-1>d;d++)for(ia[d]=c,a=0;a<1<<_[d];a++)ha[c++]=d;for(ha[c-1]=d,e=0,d=0;16>d;d++)for(ja[d]=e,a=0;a<1<<aa[d];a++)ga[e++]=d;for(e>>=7;R>d;d++)for(ja[d]=e<<7,a=0;a<1<<aa[d]-7;a++)ga[256+e++]=d;for(b=0;U>=b;b++)f[b]=0;for(a=0;143>=a;)ea[2*a+1]=8,a++,f[8]++;for(;255>=a;)ea[2*a+1]=9,a++,f[9]++;for(;279>=a;)ea[2*a+1]=7,a++,f[7]++;for(;287>=a;)ea[2*a+1]=8,a++,f[8]++;for(l(ea,Q+1,f),a=0;R>a;a++)fa[2*a+1]=5,fa[2*a]=i(a,5);ka=new na(ea,_,P+1,Q,U),la=new na(fa,aa,0,R,U),ma=new na(new Array(0),ba,0,S,W)}function n(a){var b;for(b=0;Q>b;b++)a.dyn_ltree[2*b]=0;for(b=0;R>b;b++)a.dyn_dtree[2*b]=0;for(b=0;S>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*X]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function o(a){a.bi_valid>8?f(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function p(a,b,c,d){o(a),d&&(f(a,c),f(a,~c)),E.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function q(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function r(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&q(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!q(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function s(a,b,c){var d,f,i,j,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],f=a.pending_buf[a.l_buf+k],k++,0===d?h(a,f,b):(i=ha[f],h(a,i+P+1,b),j=_[i],0!==j&&(f-=ia[i],g(a,f,j)),d--,i=e(d),h(a,i,c),j=aa[i],0!==j&&(d-=ja[i],g(a,d,j)));while(k<a.last_lit);h(a,X,b)}function t(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=T,c=0;i>c;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=2>j?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)r(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],r(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,r(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],k(a,b),l(f,j,a.bl_count)}function u(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;c>=d;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(j>h?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*Y]++):10>=h?a.bl_tree[2*Z]++:a.bl_tree[2*$]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function v(a,b,c){var d,e,f=-1,i=b[1],j=0,k=7,l=4;for(0===i&&(k=138,l=3),d=0;c>=d;d++)if(e=i,i=b[2*(d+1)+1],!(++j<k&&e===i)){if(l>j){do h(a,e,a.bl_tree);while(0!==--j)}else 0!==e?(e!==f&&(h(a,e,a.bl_tree),j--),h(a,Y,a.bl_tree),g(a,j-3,2)):10>=j?(h(a,Z,a.bl_tree),g(a,j-3,3)):(h(a,$,a.bl_tree),g(a,j-11,7));j=0,f=e,0===i?(k=138,l=3):e===i?(k=6,l=3):(k=7,l=4)}}function w(a){var b;for(u(a,a.dyn_ltree,a.l_desc.max_code),u(a,a.dyn_dtree,a.d_desc.max_code),t(a,a.bl_desc),b=S-1;b>=3&&0===a.bl_tree[2*ca[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function x(a,b,c,d){var e;for(g(a,b-257,5),g(a,c-1,5),g(a,d-4,4),e=0;d>e;e++)g(a,a.bl_tree[2*ca[e]+1],3);v(a,a.dyn_ltree,b-1),v(a,a.dyn_dtree,c-1)}function y(a){var b,c=4093624447;for(b=0;31>=b;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return G;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return H;for(b=32;P>b;b++)if(0!==a.dyn_ltree[2*b])return H;return G}function z(a){pa||(m(),pa=!0),a.l_desc=new oa(a.dyn_ltree,ka),a.d_desc=new oa(a.dyn_dtree,la),a.bl_desc=new oa(a.bl_tree,ma),a.bi_buf=0,a.bi_valid=0,n(a)}function A(a,b,c,d){g(a,(J<<1)+(d?1:0),3),p(a,b,c,!0)}function B(a){g(a,K<<1,3),h(a,X,ea),j(a)}function C(a,b,c,d){var e,f,h=0;a.level>0?(a.strm.data_type===I&&(a.strm.data_type=y(a)),t(a,a.l_desc),t(a,a.d_desc),h=w(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,e>=f&&(e=f)):e=f=c+5,e>=c+4&&-1!==b?A(a,b,c,d):a.strategy===F||f===e?(g(a,(K<<1)+(d?1:0),3),s(a,ea,fa)):(g(a,(L<<1)+(d?1:0),3),x(a,a.l_desc.max_code+1,a.d_desc.max_code+1,h+1),s(a,a.dyn_ltree,a.dyn_dtree)),n(a),d&&o(a)}function D(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(ha[c]+P+1)]++,a.dyn_dtree[2*e(b)]++),a.last_lit===a.lit_bufsize-1}var E=a("../utils/common"),F=4,G=0,H=1,I=2,J=0,K=1,L=2,M=3,N=258,O=29,P=256,Q=P+1+O,R=30,S=19,T=2*Q+1,U=15,V=16,W=7,X=256,Y=16,Z=17,$=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],aa=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ba=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],da=512,ea=new Array(2*(Q+2));d(ea);var fa=new Array(2*R);d(fa);var ga=new Array(da);d(ga);var ha=new Array(N-M+1);d(ha);var ia=new Array(O);d(ia);var ja=new Array(R);d(ja);var ka,la,ma,na=function(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length},oa=function(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b},pa=!1;c._tr_init=z,c._tr_stored_block=A,c._tr_flush_block=C,c._tr_tally=D,c._tr_align=B},{"../utils/common":27}],39:[function(a,b){"use strict";function c(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=c},{}]},{},[9])(9)}),/*!
 *
 * $Id: base64.js,v 2.6 2012/08/24 05:23:18 dankogai Exp dankogai $
 *
 *  Licensed under the MIT license.
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  References:
 *    http://en.wikipedia.org/wiki/Base64
 */
function(a){"use strict";var b;"undefined"!=typeof module&&module.exports&&(b=require("buffer").Buffer);var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=function(a){for(var b={},c=0,d=a.length;d>c;c++)b[a.charAt(c)]=c;return b}(c),e=String.fromCharCode,f=function(a){var b=a.charCodeAt(0);return 128>b?a:2048>b?e(192|b>>>6)+e(128|63&b):e(224|b>>>12&15)+e(128|b>>>6&63)+e(128|63&b)},g=function(a){return a.replace(/[^\x00-\x7F]/g,f)},h=function(a){var b=[0,2,1][a.length%3],d=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),e=[c.charAt(d>>>18),c.charAt(d>>>12&63),b>=2?"=":c.charAt(d>>>6&63),b>=1?"=":c.charAt(63&d)];return e.join("")},i=a.btoa||function(a){return a.replace(/[\s\S]{1,3}/g,h)},j=b?function(a){return new b(a).toString("base64")}:function(a){return i(g(a))},k=function(a,b){return b?j(a).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}):j(a)},l=function(a){return k(a,!0)},m=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}/g,n=function(a){return e(a.length<3?(31&a.charCodeAt(0))<<6|63&a.charCodeAt(1):(15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2))},o=function(a){return a.replace(m,n)},p=function(a){var b=a.length,c=b%4,f=(b>0?d[a.charAt(0)]<<18:0)|(b>1?d[a.charAt(1)]<<12:0)|(b>2?d[a.charAt(2)]<<6:0)|(b>3?d[a.charAt(3)]:0),g=[e(f>>>16),e(f>>>8&255),e(255&f)];return g.length-=[0,0,2,1][c],g.join("")},q=a.atob||function(a){return a.replace(/[\s\S]{1,4}/g,p)},r=b?function(a){return new b(a,"base64").toString()}:function(a){return o(q(a))},s=function(a){return r(a.replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};if(a.Base64={atob:q,btoa:i,fromBase64:s,toBase64:k,utob:g,encode:k,encodeURI:l,btou:o,decode:s},"function"==typeof Object.defineProperty){var t=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",t(function(){return s(this)})),Object.defineProperty(String.prototype,"toBase64",t(function(a){return k(this,a)}))}}}(this),/*! Native Promise Only
    v0.7.6-a (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
function(a,b,c){b[a]=b[a]||c(),"undefined"!=typeof module&&module.exports?module.exports=b[a]:"function"==typeof define&&define.amd&&define(function(){return b[a]})}("Promise","undefined"!=typeof global?global:this,function(){"use strict";function a(a,b){m.add(a,b),l||(l=o(m.drain))}function b(a){var b,c=typeof a;return null==a||"object"!=c&&"function"!=c||(b=a.then),"function"==typeof b?b:!1}function c(){for(var a=0;a<this.chain.length;a++)d(this,1===this.state?this.chain[a].success:this.chain[a].failure,this.chain[a]);this.chain.length=0}function d(a,c,d){var e,f;try{c===!1?d.reject(a.msg):(e=c===!0?a.msg:c.call(void 0,a.msg),e===d.promise?d.reject(TypeError("Promise-chain cycle")):(f=b(e))?f.call(e,d.resolve,d.reject):d.resolve(e))}catch(g){d.reject(g)}}function e(d){var g,i,j=this;if(!j.triggered){j.triggered=!0,j.def&&(j=j.def);try{(g=b(d))?(i=new h(j),g.call(d,function(){e.apply(i,arguments)},function(){f.apply(i,arguments)})):(j.msg=d,j.state=1,j.chain.length>0&&a(c,j))}catch(k){f.call(i||new h(j),k)}}}function f(b){var d=this;d.triggered||(d.triggered=!0,d.def&&(d=d.def),d.msg=b,d.state=2,d.chain.length>0&&a(c,d))}function g(a,b,c,d){for(var e=0;e<b.length;e++)!function(e){a.resolve(b[e]).then(function(a){c(e,a)},d)}(e)}function h(a){this.def=a,this.triggered=!1}function i(a){this.promise=a,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function j(b){if("function"!=typeof b)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var d=new i(this);this.then=function(b,e){var f={success:"function"==typeof b?b:!0,failure:"function"==typeof e?e:!1};return f.promise=new this.constructor(function(a,b){if("function"!=typeof a||"function"!=typeof b)throw TypeError("Not a function");f.resolve=a,f.reject=b}),d.chain.push(f),0!==d.state&&a(c,d),f.promise},this["catch"]=function(a){return this.then(void 0,a)};try{b.call(void 0,function(a){e.call(d,a)},function(a){f.call(d,a)})}catch(g){f.call(d,g)}}var k,l,m,n=Object.prototype.toString,o="undefined"!=typeof setImmediate?function(a){return setImmediate(a)}:setTimeout;try{Object.defineProperty({},"x",{}),k=function(a,b,c,d){return Object.defineProperty(a,b,{value:c,writable:!0,configurable:d!==!1})}}catch(p){k=function(a,b,c){return a[b]=c,a}}m=function(){function a(a,b){this.fn=a,this.self=b,this.next=void 0}var b,c,d;return{add:function(e,f){d=new a(e,f),c?c.next=d:b=d,c=d,d=void 0},drain:function(){var a=b;for(b=c=l=void 0;a;)a.fn.call(a.self),a=a.next}}}();var q=k({},"constructor",j,!1);return k(j,"prototype",q,!1),k(q,"__NPO__",0,!1),k(j,"resolve",function(a){var b=this;return a&&"object"==typeof a&&1===a.__NPO__?a:new b(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");b(a)})}),k(j,"reject",function(a){return new this(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");c(a)})}),k(j,"all",function(a){var b=this;return"[object Array]"!=n.call(a)?b.reject(TypeError("Not an array")):0===a.length?b.resolve([]):new b(function(c,d){if("function"!=typeof c||"function"!=typeof d)throw TypeError("Not a function");var e=a.length,f=Array(e),h=0;g(b,a,function(a,b){f[a]=b,++h===e&&c(f)},d)})}),k(j,"race",function(a){var b=this;return"[object Array]"!=n.call(a)?b.reject(TypeError("Not an array")):new b(function(c,d){if("function"!=typeof c||"function"!=typeof d)throw TypeError("Not a function");g(b,a,function(a,b){c(b)},d)})}),j}),/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==ka?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ia.length;){if(c=ia[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return oa++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:ra?N:sa?Q:qa?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&ya&&d-e===0,g=b&(Aa|Ba)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=na(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===ya||f.eventType===Aa)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ba&&(i>xa||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=ma(l.x)>ma(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:la(a.pointers[c].clientX),clientY:la(a.pointers[c].clientY)},c++;return{timeStamp:na(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:la(a[0].clientX),y:la(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:la(c/b),y:la(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Ca:ma(a)>=ma(b)?a>0?Da:Ea:b>0?Fa:Ga}function I(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],La)-J(a[1],a[0],La)}function L(a,b){return I(b[0],b[1],La)/I(a[0],a[1],La)}function M(){this.evEl=Na,this.evWin=Oa,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Ra,this.evWin=Sa,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ua,this.evWin=Va,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Aa|Ba)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xa,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(ya|za)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===ya)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Aa|Ba)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bb))return bb;var b=q(a,cb),c=q(a,db);return b&&c?cb+" "+db:b||c?b?cb:db:q(a,ab)?ab:_a}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=eb,this.simultaneous={},this.requireFail=[]}function W(a){return a&jb?"cancel":a&hb?"end":a&gb?"move":a&fb?"start":""}function X(a){return a==Ga?"down":a==Fa?"up":a==Da?"left":a==Ea?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function aa(){V.apply(this,arguments),this._timer=null,this._input=null}function ba(){Z.apply(this,arguments)}function ca(){Z.apply(this,arguments)}function da(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ea(a,b){return b=b||{},b.recognizers=m(b.recognizers,ea.defaults.preset),new fa(a,b)}function fa(a,b){b=b||{},this.options=i(b,ea.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),ga(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ga(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function ha(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ia=["","webkit","moz","MS","ms","o"],ja=b.createElement("div"),ka="function",la=Math.round,ma=Math.abs,na=Date.now,oa=1,pa=/mobile|tablet|ip(ad|hone|od)|android/i,qa="ontouchstart"in a,ra=v(a,"PointerEvent")!==d,sa=qa&&pa.test(navigator.userAgent),ta="touch",ua="pen",va="mouse",wa="kinect",xa=25,ya=1,za=2,Aa=4,Ba=8,Ca=1,Da=2,Ea=4,Fa=8,Ga=16,Ha=Da|Ea,Ia=Fa|Ga,Ja=Ha|Ia,Ka=["x","y"],La=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Ma={mousedown:ya,mousemove:za,mouseup:Aa},Na="mousedown",Oa="mousemove mouseup";j(M,y,{handler:function(a){var b=Ma[a.type];b&ya&&0===a.button&&(this.pressed=!0),b&za&&1!==a.which&&(b=Aa),this.pressed&&this.allow&&(b&Aa&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:va,srcEvent:a}))}});var Pa={pointerdown:ya,pointermove:za,pointerup:Aa,pointercancel:Ba,pointerout:Ba},Qa={2:ta,3:ua,4:va,5:wa},Ra="pointerdown",Sa="pointermove pointerup pointercancel";a.MSPointerEvent&&(Ra="MSPointerDown",Sa="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pa[d],f=Qa[a.pointerType]||a.pointerType,g=f==ta,h=s(b,a.pointerId,"pointerId");e&ya&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Aa|Ba)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Ta={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Ua="touchstart",Va="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Ta[a.type];if(b===ya&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Aa|Ba)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}});var Wa={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Xa="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wa[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==ta,e=c.pointerType==va;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Aa|Ba)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ya=v(ja.style,"touchAction"),Za=Ya!==d,$a="compute",_a="auto",ab="manipulation",bb="none",cb="pan-x",db="pan-y";T.prototype={set:function(a){a==$a&&(a=this.compute()),Za&&(this.manager.element.style[Ya]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Za){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bb),f=q(d,db),g=q(d,cb);return e||f&&c&Ha||g&&c&Ia?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var eb=1,fb=2,gb=4,hb=8,ib=hb,jb=16,kb=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hb>d&&b(!0),b(),d>=hb&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kb|eb)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ib|jb|kb)&&(this.state=eb),this.state=this.process(b),void(this.state&(fb|gb|hb|jb)&&this.tryEmit(b))):(this.reset(),void(this.state=kb))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fb|gb),e=this.attrTest(a);return d&&(c&Ba||!e)?b|jb:d||e?c&Aa?b|hb:b&fb?b|gb:fb:kb}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ja},getTouchAction:function(){var a=this.options.direction,b=[];return a&Ha&&b.push(db),a&Ia&&b.push(cb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Ha?(e=0===f?Ca:0>f?Da:Ea,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ca:0>g?Fa:Ga,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fb||!(this.state&fb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(aa,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_a]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Aa|Ba)&&!f)this.reset();else if(a.eventType&ya)this.reset(),this._timer=e(function(){this.state=ib,this.tryEmit()},b.time,this);else if(a.eventType&Aa)return ib;return kb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ib&&(a&&a.eventType&Aa?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=na(),this.manager.emit(this.options.event,this._input)))}}),j(ba,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fb)}}),j(ca,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ha|Ia,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Ha|Ia)?b=a.velocity:c&Ha?b=a.velocityX:c&Ia&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&ma(b)>this.options.velocity&&a.eventType&Aa},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(da,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ab]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&ya&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Aa)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ib,this.tryEmit()},b.interval,this),fb):ib}return kb},failTimeout:function(){return this._timer=e(function(){this.state=kb},this.options.interval,this),kb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ib&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ea.VERSION="2.0.4",ea.defaults={domEvents:!1,touchAction:$a,enable:!0,inputTarget:null,inputClass:null,preset:[[ba,{enable:!1}],[_,{enable:!1},["rotate"]],[ca,{direction:Ha}],[$,{direction:Ha},["swipe"]],[da],[da,{event:"doubletap",taps:2},["tap"]],[aa]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var lb=1,mb=2;fa.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mb:lb},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ib)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fb|gb|hb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ha(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ga(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ea,{INPUT_START:ya,INPUT_MOVE:za,INPUT_END:Aa,INPUT_CANCEL:Ba,STATE_POSSIBLE:eb,STATE_BEGAN:fb,STATE_CHANGED:gb,STATE_ENDED:hb,STATE_RECOGNIZED:ib,STATE_CANCELLED:jb,STATE_FAILED:kb,DIRECTION_NONE:Ca,DIRECTION_LEFT:Da,DIRECTION_RIGHT:Ea,DIRECTION_UP:Fa,DIRECTION_DOWN:Ga,DIRECTION_HORIZONTAL:Ha,DIRECTION_VERTICAL:Ia,DIRECTION_ALL:Ja,Manager:fa,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:da,Pan:$,Swipe:ca,Pinch:_,Rotate:ba,Press:aa,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==ka&&define.amd?define(function(){return ea}):"undefined"!=typeof module&&module.exports?module.exports=ea:a[c]=ea}(window,document,"Hammer"),/*!
// --------------------------------------------------
// easing.js v0.5.4
// Generic set of easing functions with AMD support
// https://github.com/danro/easing-js
// This code may be freely distributed under the MIT license
// http://danro.mit-license.org/
// --------------------------------------------------
// All functions adapted from Thomas Fuchs & Jeremy Kahn
// Easing Equations (c) 2003 Robert Penner, BSD license
// https://raw.github.com/danro/easing-js/master/LICENSE
// --------------------------------------------------
 */
function(a,b){"function"==typeof define?define(b):"undefined"!=typeof module?module.exports=b:this[a]=b}("easing",{easeInQuad:function(a){return Math.pow(a,2)},easeOutQuad:function(a){return-(Math.pow(a-1,2)-1)},easeInOutQuad:function(a){return(a/=.5)<1?.5*Math.pow(a,2):-.5*((a-=2)*a-2)},easeInCubic:function(a){return Math.pow(a,3)},easeOutCubic:function(a){return Math.pow(a-1,3)+1},easeInOutCubic:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)},easeInQuart:function(a){return Math.pow(a,4)},easeOutQuart:function(a){return-(Math.pow(a-1,4)-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*Math.pow(a,4):-.5*((a-=2)*Math.pow(a,3)-2)},easeInQuint:function(a){return Math.pow(a,5)},easeOutQuint:function(a){return Math.pow(a-1,5)+1},easeInOutQuint:function(a){return(a/=.5)<1?.5*Math.pow(a,5):.5*(Math.pow(a-2,5)+2)},easeInSine:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},easeOutExpo:function(a){return 1===a?1:-Math.pow(2,-10*a)+1},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-Math.pow(a-1,2))},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeOutBounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInBack:function(a){var b=1.70158;return a*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return(a-=1)*a*((b+1)*a+b)+1},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},elastic:function(a){return-1*Math.pow(4,-8*a)*Math.sin(2*(6*a-1)*Math.PI/2)+1},swingFromTo:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},swingFrom:function(a){var b=1.70158;return a*a*((b+1)*a-b)},swingTo:function(a){var b=1.70158;return(a-=1)*a*((b+1)*a+b)+1},bounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bouncePast:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?2-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?2-(7.5625*(a-=2.25/2.75)*a+.9375):2-(7.5625*(a-=2.625/2.75)*a+.984375)},easeFromTo:function(a){return(a/=.5)<1?.5*Math.pow(a,4):-.5*((a-=2)*Math.pow(a,3)-2)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,.25)}}),/*!
 *
 * # sML JavaScript Library
 *
 * - "I'm a Simple and Middling Library."
 * - Copyright (c) Satoru MATSUSHIMA - https://github.com/satorumurmur/sML
 * - Licensed under the MIT license. - http://www.opensource.org/licenses/mit-license.php
 *
 * - Wed February 25 22:22:00 2015 +0900
 */
sML=function(){var Version="0.999.14",Build=20150225,sML=function(a){var b="string"==typeof a?[sML.create.apply(this,arguments)]:a.length?a:[a];if(window.__proto__)b.__proto__=sML.SML;else for(var c in sML.SML)b[c]=sML.SML[c];return b};sML.Version=Version,sML.Build=Build;var nUA=navigator.userAgent,v2n=function(a,b){var c=parseFloat(a.replace(b,"$1").replace(/[_\.]/g,",").replace(/\,/,".").replace(/\,/g,""));return isNaN(c)?void 0:c},iOSV=/(iPod|iPhone|iPad)( Simulator)?;/.test(nUA)?v2n(nUA,/^.+? OS ([\d_]+).+$/):void 0,AndV=/Android /.test(nUA)?v2n(nUA,/^.+? Android ([\d\.]+).+$/):void 0;sML.OperatingSystem=sML.OS={OSX:nUA.indexOf("Mac")>-1&&!iOSV?1:void 0,Windows:nUA.indexOf("Windows")>-1?1:void 0,Linux:nUA.indexOf("Linux")>-1&&!AndV?1:void 0,iOS:iOSV,Android:AndV},sML.DeviceName=sML.DN=function(){return sML.OS.OSX?"Mac":sML.OS.Windows?"PC":sML.OS.Linux?"PC":sML.OS.iOS?nUA.replace(/^.+?(iPod|iPhone|iPad)( Simulator)?;.+$/,"$1"):sML.OS.Android?nUA.replace(/^.+?\(.+?; ([^;]+)\).+$/,"$1"):""}(),sML.UserAgent=sML.UA={WebKit:nUA.indexOf("AppleWebKit")>-1?v2n(nUA,/^.+AppleWebKit\/([\d\.]+).+$/):void 0,Safari:nUA.indexOf("Safari/")>-1?v2n(nUA,/^.+Version\/([\d\.]+).+$/):void 0,Chrome:nUA.indexOf("Chrome/")>-1?v2n(nUA,/^.+Chrome\/([\d\.]+).+$/):void 0,Gecko:nUA.indexOf("Gecko/")>-1?v2n(nUA,/^.+rv\:([\d\.]+).+$/):void 0,Firefox:nUA.indexOf("Firefox/")>-1?v2n(nUA,/^.+Firefox\/([\d\.]+).+$/):void 0,Presto:nUA.indexOf("Presto")>-1?v2n(nUA,/^.+Presto\/([\d\.]+).+$/):void 0,Opera:nUA.indexOf("OPR/")>-1?v2n(nUA,/^.+OPR\/([\d\.]+).*$/):void 0,Trident:nUA.indexOf("Trident/")>-1?v2n(nUA,/^.+Trident\/([\d\.]+).*$/):void 0,InternetExplorer:nUA.indexOf("MSIE ")>-1?v2n(nUA,/^.+MSIE ([\d\.]+).*$/):void 0,Flash:void 0},sML.UA.Trident>=7&&(sML.UA.InternetExplorer=v2n(nUA,/^.+rv:([\d\.]+).*$/)),sML.UA.Opera||(sML.UA.Opera=nUA.indexOf("Opera/")>-1?v2n(nUA,/^.+Version\/([\d\.]+).*$/):void 0),sML.Environments=sML.Env=function(a,b){for(var c in b)for(var d in b[c])b[c][d]&&a.push(d);return a}([sML.DeviceName],[sML.OS,sML.UA]);try{sML.UA.Flash=parseFloat(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin.description.replace(/^.+?([\d\.]+).*$/,"$1"))}catch(e){}if(sML.UA.InternetExplorer)try{sML.UA.Flash=parseFloat(new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7").GetVariable("$version").replace(/^[^\d]+(\d+)\,([\d\,]+)$/,"$1.$2").replace(/\,/g,""))}catch(e){}return sML.OS.Mac=sML.OS.OSX,sML.OS.Win=sML.OS.Windows,sML.OS.Lin=sML.OS.Linux,sML.OS.And=sML.OS.Android,sML.UA.WK=sML.UA.WebKit,sML.UA.Sa=sML.UA.Safari,sML.UA.Ch=sML.UA.Chrome,sML.UA.Ge=sML.UA.Gecko,sML.UA.Fx=sML.UA.Firefox,sML.UA.Pr=sML.UA.Presto,sML.UA.Op=sML.UA.Opera,sML.UA.Tr=sML.UA.Trident,sML.UA.IE=sML.UA.InternetExplorer,sML.UA.Fl=sML.UA.Flash,sML.log=function(){try{console.log.apply(console,arguments)}catch(a){}},sML.write=function(){document.open();for(var a=0,b=arguments.length;b>a;a++)document.write(arguments[a]);document.close()},sML.Fill={Prefixes:["webkit","moz","MS","ms","o"],extendElements:function(a){return a},carePrefix:function(a,b){if(b in a)return a[b];b=b[0].toUpperCase()+b.slice(1);for(var c="",d=0,e=this.Prefixes.length;e>d;d++)if(c=this.Prefixes[d]+b,c in a)return a[c];return void 0}},sML.UA.InternetExplorer<9&&(sML.Fill.extendElement=function(a){return a.getElementsByClassName=sML.Fill.getElementsByClassName,a.addEventListener=sML.Fill.addEventListener,a.removeEventListener=sML.Fill.removeEventListener,a},sML.Fill.extendElements=function(a){return sML.Fill.extendElement(a),sML.each(a.getElementsByTagName("*"),function(){sML.Fill.extendElement(this)}),a},sML.Fill.getElementsByClassName=function(a){return this.querySelectorAll("."+a.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/,"."))},sML.Fill.addEventListener=function(a,b){this["FunctionsOn"+a]||(this["FunctionsOn"+a]=[],this["XWrappersOn"+a]=[]);var c=this,d=this["FunctionsOn"+a],e=this["XWrappersOn"+a];if("DOMContentLoaded"==a){var f=function(){"complete"===c.readyState&&b.apply(c,arguments)};a="readystatechange"}else var f=function(){b.apply(c,arguments)};return this.attachEvent("on"+a,f),e.push(f),d.push(b),this},sML.Fill.removeEventListener=function(a,b){for(var c=this["FunctionsOn"+a],d=this["XWrappersOn"+a],e=0,f=c.length;f>e&&c[e]!=b;e++);return"DOMContentLoaded"==a&&(a="readystatechange"),this.detachEvent("on"+a,d[e]),d[e]=c[e]=null,this},window.getComputedStyle=function(a){return a.currentStyle},window.addEventListener=function(a,b){return this.attachEvent("on"+a,b),this},window.removeEventListener=function(a,b){return this.detachEvent("on"+a,b),this},sML.Fill.extendElement(document),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),sML.extendElements(document.documentElement))}),window.Event.prototype.stopPropagation=function(){this.cancelBubble=!0},window.Event.prototype.preventDefault=function(){this.returnValue=!1},Array.prototype.map=function(a,b){if("function"!=typeof a)throw new TypeError;for(var c=[],d=0,e=this.length;e>d;d++)c.push(a.call(b,this[d],d,this));return c},Array.prototype.filter=function(a,b){if("function"!=typeof a)throw new TypeError;for(var c=[],d=0,e=this.length;e>d;d++)a.call(b,this[d],d,this)&&c.push(this[d]);return c},Array.prototype.forEach=function(a,b){if("function"!=typeof a)throw new TypeError;for(var c=0,d=this.length;d>c;c++)a.call(b,this[c],c,this)},["section","article","nav","aside","header","footer","figure"].forEach(function(a){document.createElement(a)})),sML.UA.InternetExplorer<=9&&("undefined"==typeof window.console&&(window.console={}),"function"!=typeof window.console.log&&(window.console.log=function(){})),sML.extendElements=sML.Fill.extendElements,window.requestAnimationFrame=sML.Fill.carePrefix(window,"requestAnimationFrame")||function(a){setTimeout(a,1e3/60)},sML.Event={OnRead:{Done:!1,Functions:[]},OnLoad:{Done:!1,Functions:[]},add:function(a,b,c,d){return a.addEventListener(b,c,d?!0:!1),a},remove:function(a,b,c,d){return a.removeEventListener(b,c,d?!0:!1),a},stopPropagation:function(){/*@cc_on @if (@_jscript_version<9) arguments[0]=event; @end @*/return arguments[0].stopPropagation()},preventDefault:function(){/*@cc_on @if (@_jscript_version<9) arguments[0]=event; @end @*/return arguments[0].preventDefault()}},sML.addEventListener=sML.Event.add,sML.removeEventListener=sML.Event.remove,sML.stopPropagation=sML.Event.stopPropagation,sML.preventDefault=sML.Event.preventDefault,sML.Event.OnRead.doOnRead=sML.Event.OnLoad.doOnLoad=function(){if(!this.Done)for(this.Done=!0;this.Functions.length;)this.Functions.shift()()},sML.Event.OnRead.addEventListener=sML.Event.OnLoad.addEventListener=function(a){return this.Done?a():this.Functions.push(a)},sML.onread=sML.ready=function(a){return sML.Event.OnRead.addEventListener(a)},sML.onload=sML.done=function(a){return sML.Event.OnLoad.addEventListener(a)},document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),sML.Event.OnRead.doOnRead()},!1),window.addEventListener("load",function(){window.removeEventListener("load",arguments.callee,!1),sML.Event.OnRead.doOnRead(),sML.Event.OnLoad.doOnLoad()},!1),sML.Event.OnResizeFont=sML.onResizeFont=sML.onresizefont={RegularFunctions:[],onZoomInFunctions:[],onZoomOutFunctions:[],addEventListener:function(a,b){b&&b>0?this.onZoomInFunctions.push(a):b&&0>b?this.onZoomOutFunctions.push(a):this.RegularFunctions.push(a)},detect:function(a,b){if(!a)var a=document.body;if(!b)var b=200;this.checker=a,this.timer=setInterval(function(){var a=sML.Coord.getElementSize(sML.onResizeFont.checker).h;if(sML.onResizeFont.prevHeight&&sML.onResizeFont.prevHeight!=a){var b=sML.onResizeFont.RegularFunctions;sML.onResizeFont.prevHeight&&sML.onResizeFont.prevHeight<a?b=b.concat(sML.onResizeFont.onZoomInFunctions):sML.onResizeFont.prevHeight&&sML.onResizeFont.prevHeight>a&&(b=b.concat(sML.onResizeFont.onZoomOutFunctions));for(var c=0,d=b.length;d>c;c++)b[c]()}sML.onResizeFont.prevHeight=a},b)},stopDetect:function(){this.timer&&clearTimeout(this.timer)}},sML.addTouchEventObserver=sML.observeTouch=function(a,b){/*! Requires Hammer.js - http://hammerjs.github.io/ - Copyright (c) Jorik Tangelder - Licensed under the MIT license. */
if(a.addTouchEventListener)return a;if(!window.Hammer)return sML.edit(a,{addTouchEventListener:function(){return!1},removeTouchEventListener:function(){return!1}});var c=new Hammer.Manager(a);return(!b||b.Pan)&&c.add(new Hammer.Pan({threshold:0,pointers:0})),(!b||b.Swipe)&&c.add(new Hammer.Swipe).recognizeWith(c.get("pan")),(!b||b.Rotate)&&c.add(new Hammer.Rotate({threshold:0})).recognizeWith(c.get("pan")),(!b||b.Pinch)&&c.add(new Hammer.Pinch({threshold:0})).recognizeWith([c.get("pan"),c.get("rotate")]),(!b||b.DoubleTap)&&c.add(new Hammer.Tap({event:"doubletap",taps:2})),(!b||b.Tap)&&c.add(new Hammer.Tap),sML.edit(a,{TouchEventObserver:c,TouchEventHandlers:[],addTouchEventListener:function(b,c){var d=function(b){c.apply(a,[b.srcEvent,b])};return a.TouchEventHandlers.push([c,d]),a.TouchEventObserver.on(b,d),a},removeTouchEventListener:function(b,c){if(c&&"function"==typeof c){for(var d=[],e=0,f=a.TouchEventHandlers.length;f>e;e++)a.TouchEventHandlers[e][0]==c?a.TouchEventObserver.off(b,a.TouchEventHandlers[e][1]):d.push(a.TouchEventHandlers[e]);a.TouchEventHandlers=d}else a.TouchEventObserver.off(b);return a}})},sML.Chain=function(){this.Functions=arguments.length?sML.toArray(arguments):[],this.add=function(){for(var a=0,b=arguments.length;b>a;a++)this.Functions.push(arguments[a])},this.start=this.next=function(){var a=this.Functions.shift();"function"==typeof a&&a.apply(null,arguments)},this.skip=function(a){if("number"==typeof a)for(var b=0;a>b;b++)this.Functions.shift()}},sML.Timers={setTimeout:function(){var a=Array.prototype.shift.call(arguments),b=Array.prototype.shift.call(arguments);return Array.prototype.unshift.call(arguments,a),Array.prototype.unshift.call(arguments,b),setTimeout.apply(window,arguments)},setInterval:function(){var a=Array.prototype.shift.call(arguments),b=Array.prototype.shift.call(arguments);return Array.prototype.unshift.call(arguments,a),Array.prototype.unshift.call(arguments,b),setInterval.apply(window,arguments)}},sML.setTimeout=sML.Timers.setTimeout,sML.setInterval=sML.Timers.setInterval,sML.Drawer={draw:function(a,b){a.ToBeDrawn||(requestAnimationFrame(function(){b.apply(a,arguments),a.ToBeDrawn=!1}),a.ToBeDrawn=!0)}},sML.draw=sML.Drawer.draw,sML.getElements=sML.getElementsBySelector=function(){for(var a=1,b=arguments.length;b>a;a++)arguments[0]+=","+arguments[a];return document.querySelectorAll(arguments[0])},sML.cloneObject=function(a){var b=function(){};return b.prototype=a,new b},sML.set=sML.edit=sML.setProperties=sML.setMembers=function(a,b,c){if(b){b.ObserveTouch&&(sML.addTouchEventObserver(a),delete b.ObserveTouch);for(var d in b)/^data-/.test(d)?a.setAttribute(d,b[d]):a[d]=b[d]}/*@cc_on @if (@_jscript_version<9) sML.Fill.extendElements(arguments[0]); @end @*/
return c&&sML.CSS.set(a,c),a},sML.create=sML.createElement=function(a,b,c){return sML.set(document.createElement(a),b,c)},sML.changeClass=sML.changeClassName=function(a,b){return b?a.className=b:a.removeAttribute("class"),a.className},sML.addClass=sML.addClassName=function(a,b){if("string"!=typeof b)return a.className;if(b=b.replace(/ +/g," ").replace(/^ /,"").replace(/ $/,""),!b)return a.className;if(a.className){if((" "+a.className+" ").indexOf(" "+b+" ")>-1)return a.className;b=a.className+" "+b}return sML.changeClass(a,b)},sML.removeClass=sML.removeClassName=function(a,b){return a.className?"string"!=typeof b?a.className:(b=b.replace(/ +/g," ").replace(/^ /,"").replace(/ $/,""))?(" "+a.className+" ").indexOf(" "+b+" ")<0?a.className:(b=(" "+a.className+" ").replace(" "+b+" "," ").replace(/ +/g," ").replace(/^ /,"").replace(/ $/,""),sML.changeClass(a,b)):a.className:""},sML.replaceClass=sML.replaceClassName=function(a,b,c){return sML.removeClass(a,b),sML.addClass(a,c),a.className},sML.appendChildren=function(a,b){if(a.length)for(var c=0,d=a.length;d>c;c++)b.appendChild(a[c]);else b.appendChild(a);return a},sML.insertBefore=function(a,b){return b.parentNode.insertBefore(a,b),b.previousSibling},sML.insertAfter=function(a,b){return b.parentNode.insertBefore(a,b.nextSibling),b.nextSibling},sML.replaceElement=function(a,b){return b.parentNode.insertBefore(a,b),a=b.previousSibling,b.parentNode.removeChild(b),a},sML.removeElement=function(a){a.parentNode.removeChild(a)},sML.deleteElement=function(a){a.parentNode&&a.parentNode.removeChild(a),a.innerHTML="",a=null,delete a},sML.hatch=function(){for(var a="",b=0,c=arguments.length;c>b;b++)a+=arguments[b];var d=document.createElement("div"),e=document.createDocumentFragment(),f=function(){d.innerHTML=a;for(var b=0,c=d.childNodes.length;c>b;b++)e.appendChild(d.firstChild)};return sML.UA.InternetExplorer<9?(document.body.appendChild(d).style.display="none",f(),document.body.removeChild(d)):f(),e},sML.getContentDocument=function(a){return sML.UA.IE<8?a.contentWindow.document:a.contentDocument},sML.CSS=sML.S={Prefix:sML.UA.WK?"Webkit":sML.UA.Ge?"Moz":sML.UA.IE?"ms":"",TransitionEnd:sML.UA.WK?"webkitTransitionEnd":sML.UA.Ge?"transitionend":sML.UA.IE?"MSTransitionEnd":"",AnimationEnd:sML.UA.WK?"webkitAnimationEnd":sML.UA.Ge?"animationend":sML.UA.IE?"MSAnimationEnd":"",Catalogue:[],getSFO:function(a){for(var b=0,c=this.Catalogue.length;c>b;b++)if(this.Catalogue[b].Element==a)return this.Catalogue[b];return this.Catalogue[this.Catalogue.push({Element:a})-1]},getComputedStyle:function(a,b){var c=a.currentStyle||document.defaultView.getComputedStyle(a,b?b:"");return c},StyleSheets:[],getStyleSheet:function(a){if(sML.UA.IE<9)return a.styleSheets[a.styleSheets.length-1];for(var b=0,c=this.StyleSheets.length;c>b;b++)if(this.StyleSheets[b].StyleFor==a)return this.StyleSheets[b].StyleSheet;var d=a.createElement("style");return d.appendChild(a.createTextNode("")),a.getElementsByTagName("head")[0].appendChild(d),this.StyleSheets.push({StyleFor:a,StyleSheet:d.sheet}),d.sheet},addRule:function(a,b,c){if("function"==typeof b.join)b=b.join(" ");else if("object"==typeof b){var d=[];for(var e in b)d.push(e+": "+b[e]+";");b=d.join(" ")}var f=this.getStyleSheet(c?c:document);if(f){if(f.addRule){var g=f.rules.length;return f.addRule(a,b,g),g}if(f.insertRule)return f.insertRule(a+"{"+b+"}",f.cssRules.length)}return null},addRules:function(a,b){var c=[];if("function"==typeof a.join)for(var d=0,e=a.length/2;e>d;d++)c.push(this.addRule(a[2*d],a[2*d+1],b));else if("object"==typeof a)for(var f in a)c.push(this.addRule(f,a[f],b));return c},add:function(a,b){return this.addRules(a,b)},removeRule:function(a,b){var c=this.getStyleSheet(b?b:document);if(c){if(c.removeRule)c.removeRule(a);else{if(!c.deleteRule)return null;c.deleteRule(a)}return a}return null},removeRules:function(a,b){for(var c=0,d=a.length;d>c;c++)this.removeRule(a[c],b);return a},remove:function(a,b){return this.removeRules(a,b)},setProperty:function(a,b,c){return a&&b?(/^(animation|background(-s|S)ize|box|break|column|filter|flow|hyphens|region|shape|transform|transition|writing)/.test(b)?a.style[this.Prefix+b.replace(/(-|^)([a-z])/g,function(a,b,c){return c?c.toUpperCase():""})]=c:"float"==b&&(b=sML.UA.IE?"styleFloat":"cssFloat"),a.style[b]=c,a):a},addTransitionEndListener:function(a,b){"function"==typeof b&&(a.sMLTransitionEndListener=b,sML.Event.add(a,this.TransitionEnd,a.sMLTransitionEndListener))},removeTransitionEndListener:function(a){"function"==typeof a.sMLTransitionEndListener&&(sML.Event.remove(a,this.TransitionEnd,a.sMLTransitionEndListener),delete a.sMLTransitionEndListener)},set:function(a,b,c){if(!a||"object"!=typeof b)return a;if(this.removeTransitionEndListener(a),"function"==typeof c&&this.addTransitionEndListener(a,c),!(b instanceof Array)){var d=[];for(var e in b)/^transition/.test(e)?this.setProperty(a,e,b[e]):d[d.push(e)]=b[e];b=d}if(b.length%2<1)for(var f=0,g=b.length/2;g>f;f++)this.setProperty(a,b[2*f],b[2*f+1]);return a},getRGB:function(a){for(var b=a.replace(/rgb\(([\d\., ]+)\)/,"$1").replace(/\s/g,"").split(","),c=0,d=b.length;d>c;c++)b[c]=parseInt(b[c]);return b},getRGBA:function(a){for(var b=a.replace(/rgba?\(([\d\., ]+)\)/,"$1").replace(/\s/g,"").split(","),c=0,d=b.length;d>c;c++)b[c]=parseInt(b[c]);return b[3]||(b[3]=1),b}},sML.style=sML.css=function(a,b,c){return sML.CSS.set(a,b,c)},sML.Easing="object"==typeof window.easing?window.easing:{},sML.Easing.linear=function(a){return a},sML.Easing.getEaser=function(a){return function(b){return b+a/100*(1-b)*b}},sML.Transition=sML.T={Catalogue:[],getSFO:function(a){for(var b=0,c=this.Catalogue.length;c>b;b++)if(this.Catalogue[b].Element==a)return this.Catalogue[b];return this.Catalogue[this.Catalogue.push({Element:a})-1]},begin:function(a,b,c){if(!b)var b={};if(!c)var c={};this.Element=a;var d=this.getSFO(a);d.Timer&&clearTimeout(d.Timer),d.Param={c:0,f:b.f?b.f:10,t:b.t?b.t:10,e:b.e?b.e:null,x:b.x?b.x:null},d.Functions={s:c.s?c.s:null,m:c.m?c.m:null,e:c.e?c.e:null,c:c.c?c.c:null},d.gN=d.getNext=function(a,b,c,e){var f=1,g=d.Param.c/d.Param.f;if(!c&&d.Param.e)var c=d.Param.e;if(!e&&d.Param.x)var e=d.Param.x;return f=c?0==e?g+c/(100*Math.PI)*Math.sin(Math.PI*g):e?(100+e*c)*g/(2*e*c*g+100-e*c):g+c/100*(1-g)*g:g,a+(b-a)*f},d.gC=d.getNextRGBA=function(a,b){var c=[],d=a.length,e=b.length;4==d&&3==e&&(b[3]=1);for(var f=0;d>f;f++)c[f]=Math.round(this.gN(a[f],b[f]));return c},d.Functions.s&&d.Functions.s.call(a,d),function(){d.Param.c++!=d.Param.f?(d.Functions.m&&d.Functions.m.call(a,d),d.Timer=setTimeout(arguments.callee,d.Param.t)):(d.Functions.e&&d.Functions.e.call(a,d),d.Functions.c&&d.Functions.c.call(a,d))}()}},sML.transition=function(){return sML.Transition.begin.apply(sML.Transition,arguments)},sML.Coord=sML.C={getXY:function(a,b){return{X:a,x:a,Y:b,y:b}},getWH:function(a,b){return{Width:a,W:a,w:a,Height:b,H:b,h:b}},getXYTRBLCMWH:function(a,b,c,d,e,f,g,h,i,j){return{X:a,x:a,Y:b,y:b,Top:c,top:c,T:c,t:c,Right:d,right:d,R:d,r:d,Bottom:e,bottom:e,B:e,b:e,Left:f,left:f,L:f,l:f,Center:g,center:g,C:g,c:g,Middle:h,middle:h,M:h,m:h,Width:i,width:i,W:i,w:i,Height:j,height:j,H:j,h:j}},getScreenSize:function(){return this.getWH(screen.availWidth,screen.availHeight)},getScrollSize:function(a){return a&&a!=window&&a!=document||(a=document.documentElement),this.getWH(a.scrollWidth,a.scrollHeight)},getOffsetSize:function(a){return a&&a!=window||(a=document.documentElement),a==document?this.getScrollSize(document.documentElement):this.getWH(a.offsetWidth,a.offsetHeight)},getClientSize:function(a){return a&&a!=window||(a=document.documentElement),a==document?this.getScrollSize(document.documentElement):this.getWH(a.clientWidth,a.clientHeight)},getDocumentSize:function(){return this.getScrollSize(document.documentElement)},getWindowSize:function(){return this.getOffsetSize(document.documentElement)},getElementSize:function(a){return this.getOffsetSize(a)},getWindowCoord:function(){return this.getXY(window.screenLeft||window.screenX,window.screenTop||window.screenY)},getElementCoord:function(a,b){var c=a.offsetLeft,d=a.offsetTop;for(b&&(c=c+a.offsetWidth-this.getOffsetSize(document.documentElement).W);a.offsetParent;)a=a.offsetParent,c+=a.offsetLeft,d+=a.offsetTop;return this.getXY(c,d)},getScrollCoord:function(a){return a&&a!=window?this.getXY(a.scrollLeft,a.scrollTop):this.getXY(window.scrollX||window.pageXOffset||document.documentElement.scrollLeft,window.scrollY||window.pageYOffset||document.documentElement.scrollTop)},getScrollLimitCoord:function(a,b){a&&a!=window||(a=document.documentElement);var c=this.getScrollSize(a),d=this.getClientSize(a);return this.getXY((c.W-d.W)*(b?-1:1),c.H-d.H)},getEventCoord:function(a){return a?this.getXY(a.pageX,a.pageY):this.getXY(0,0)},getCoord:function(a,b){if(b)return this.getCoord_RtL(a);if(a==screen)var c=this.getScreenSize(),d={X:0,Y:0},e={X:c.W,Y:c.H};else if(a==window)var c=this.getOffsetSize(document.documentElement),d=this.getScrollCoord(),e={X:d.X+c.W,Y:d.Y+c.H};else if(a==document)var c=this.getScrollSize(document.documentElement),d={X:0,Y:0},e={X:c.W,Y:c.H};else{if(!a.tagName)return{};var c=this.getOffsetSize(a),d=this.getElementCoord(a),e={X:d.X+c.W,Y:d.Y+c.H}}return this.getXYTRBLCMWH(d.X,d.Y,d.Y,e.X,e.Y,d.X,Math.round((d.X+e.X)/2),Math.round((d.Y+e.Y)/2),c.W,c.H)},getCoord_RtL:function(a){if(a==screen)var b=this.getScreenSize(),c={X:b.W,Y:0},d={X:0,Y:b.H};else if(a==window)var b=this.getOffsetSize(document.documentElement),c=this.getScrollCoord(),d={X:c.X-b.W,Y:c.Y+b.H};else if(a==document)var b=this.getScrollSize(document.documentElement),c={X:0,Y:0},d={X:b.W,Y:b.H};else{if(!a.tagName)return{};var b=this.getElementSize(a),c=this.getElementCoord(a,1),d={X:c.X-b.W,Y:c.Y+b.H}}return this.getXYTRBLCMWH(c.X,c.Y,c.Y,c.X,d.Y,d.X,Math.round((d.X+c.X)/2),Math.round((c.Y+d.Y)/2),b.W,b.H)},isInside:function(a,b,c){var d=this.getOffsetSize(document.documentElement);if(c)var e=this.getScrollCoord(),f={T:e.Y,R:e.X,B:e.Y+d.H,L:e.X-d.W};else var g=this.getScrollCoord(),f={T:g.Y,R:g.X+d.W,B:g.Y+d.H,L:g.X};if(a.tagName){var h=this.getElementSize(a);if(c)var i=this.getElementCoord(a,1),j={T:i.Y,R:i.X,B:i.Y+h.H,L:i.X-h.W};else var k=this.getElementCoord(a),j={T:k.Y,R:k.X+h.W,B:k.Y+h.H,L:k.X};j.C=(j.L+j.R)/2,j.M=(j.T+j.B)/2;var l=j.L>=f.L&&j.L<=f.R,m=j.C>=f.L&&j.C<=f.R,n=j.R>=f.L&&j.R<=f.R,o=j.T>=f.T&&j.T<=f.B,p=j.M>=f.T&&j.M<=f.B,q=j.B>=f.T&&j.B<=f.B,r=b?l&&n:l||m||n,s=b?o&&q:o||p||q}else if("object"==typeof a){if("number"==typeof a.X){var r=a.X>=f.L&&a.X<=f.R;if("number"!=typeof a.Y)return r}if("number"==typeof a.Y){var s=a.Y>=f.T&&a.Y<=f.B;if("number"!=typeof a.X)return s}}return r&&s}},sML.getCoord=function(){return sML.Coord.getCoord.apply(sML.Coord,arguments)},sML.Scroller={scrollTo_Legacy:function(a,b,c,d){b||(b={}),c||(c={}),"function"==typeof c&&(c={c:c}),this.SFO={};var e=b.rtl||b.rl||b.vt||b.vertical||/-rl$/.test(b.writingMode?b.writingMode:b["writing-mode"]?b["writing-mode"]:b.wm?b.wm:void 0);sML.Scroller.Timer&&clearTimeout(sML.Scroller.Timer),"number"==typeof a?a={Y:a}:a?a.tagName&&(a=sML.Coord.getElementCoord(a,e)):a={};var f=this.SFO,g=sML.Coord.getScrollCoord(),h=sML.Coord.getScrollLimitCoord(window,e);f.DC={X:"number"==typeof a.x?a.x:g.X,Y:"number"==typeof a.y?a.y:g.Y},e?(f.DC.X<h.X&&(f.DC.X=h.X),f.DC.X>0&&(f.DC.X=0)):(f.DC.X>h.x&&(f.DC.X=h.X),f.DC.X<0&&(f.DC.X=0)),f.DC.Y>h.Y&&(f.DC.Y=h.Y),f.DC.Y<0&&(f.DC.Y=0),f.Param={P:b.p?b.p:.25,T:b.t?b.t:20},f.Functions={start:c.s?c.s:null,middle:c.m?c.m:null,end:c.e?c.e:null,callback:c.c?c.c:null},d&&sML.Scroller.preventUserScrolling(),f.Functions.start&&f.Functions.start(f),function(){f.cC=sML.Coord.getScrollCoord(),f.mV={X:Math.floor((f.DC.X-f.cC.X)*f.Param.P),Y:Math.floor((f.DC.Y-f.cC.Y)*f.Param.P)},Math.abs(f.mV.X)>1||Math.abs(f.mV.Y)>1?(window.scrollBy(f.mV.X,f.mV.Y),f.Functions.middle&&f.Functions.middle(f),sML.Scroller.Timer=setTimeout(arguments.callee,f.Param.T)):(e?window.scrollBy(f.DC.X-f.cC.X,f.DC.Y-f.cC.Y):window.scrollTo(f.DC.X,f.DC.Y),d&&sML.Scroller.allowUserScrolling(),f.Functions.end&&f.Functions.end(f),f.Functions.callback&&f.Functions.callback(f))}(),d||sML.Scroller.addScrollCancelation()},scrollTo:function(a,b,c,d){{var e=sML.Coord.getScrollCoord(a);sML.Coord.getScrollLimitCoord(a)}if("number"==typeof b)b={X:e.X,Y:b};else if("object"!=typeof b||!b)return;"number"!=typeof b.X&&(b.X=e.X),"number"!=typeof b.Y&&(b.Y=e.Y),c||(c={}),("number"!=typeof c.Duration||c.Duration<0)&&(c.Duration=100);var f=sML.Easing.linear;if("function"==typeof c.Easing)var f=c.Easing;else if("string"==typeof c.Easing)var f=sML.Easing[c.Easing]?sML.Easing[c.Easing]:sML.Easing.linear;else if("number"==typeof c.Easing)var f=sML.Easing.getEaser(c.Easing);"function"==typeof d?d={callback:d}:"object"==typeof d&&d||(d={}),sML.Scroller.Timer&&clearTimeout(sML.Scroller.Timer),c.ForceScroll?sML.Scroller.preventUserScrolling():sML.Scroller.addScrollCancelation(),"function"==typeof d.start&&d.start();var g=a==window?window.scrollTo:function(b,c){a.scrollLeft=b,a.scrollTop=c};!function(a,b,c,d){var e=c.Duration?((new Date).getTime()-a.Time)/c.Duration:1;if(1>e){var h=f(e);g(Math.round(a.X+(b.X-a.X)*h),Math.round(a.Y+(b.Y-a.Y)*h)),"function"==typeof d.middle&&d.middle();var i=arguments.callee;sML.Scroller.Timer=setTimeout(function(){i(a,b,c,d)},10)}else g(b.X,b.Y),"function"==typeof d.end&&d.end(),"function"==typeof d.callback&&d.callback(),c.ForceScroll&&sML.Scroller.allowUserScrolling()}({X:e.X,Y:e.Y,Time:(new Date).getTime()},b,c,d)},addScrollCancelation:function(){sML.addEventListener(document,"mousedown",sML.Scroller.cancelScrolling),sML.addEventListener(document,"keydown",sML.Scroller.cancelScrolling),sML.addEventListener(document,"mousewheel",sML.Scroller.cancelScrolling),sML.addEventListener(document,"DOMMouseScroll",sML.Scroller.cancelScrolling)},cancelScrolling:function(){sML.removeEventListener(document,"mousedown",sML.Scroller.cancelScrolling),sML.removeEventListener(document,"keydown",sML.Scroller.cancelScrolling),sML.removeEventListener(document,"mousewheel",sML.Scroller.cancelScrolling),sML.removeEventListener(document,"DOMMouseScroll",sML.Scroller.cancelScrolling)},preventUserScrolling:function(){sML.addEventListener(document,"mousedown",sML.preventDefault),sML.addEventListener(document,"keydown",sML.preventDefault),sML.addEventListener(document,"mousewheel",sML.preventDefault),sML.addEventListener(document,"DOMMouseScroll",sML.preventDefault)},allowUserScrolling:function(){sML.removeEventListener(document,"mousedown",sML.preventDefault),sML.removeEventListener(document,"keydown",sML.preventDefault),sML.removeEventListener(document,"mousewheel",sML.preventDefault),sML.removeEventListener(document,"DOMMouseScroll",sML.preventDefault)}},sML.scrollTo=function(){var a,b,c,d;return arguments[0]==window||arguments[0].tagName?(a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3]):(a=window,b=arguments[0],c=arguments[1],d=arguments[2]),"object"==typeof b&&("number"==typeof b.x||"number"==typeof b.y)||"object"==typeof c&&("number"==typeof c.p||"number"==typeof c.t)?sML.Scroller.scrollTo_Legacy.apply(sML.Scroller,arguments):sML.Scroller.scrollTo.apply(sML.Scroller,[a,b,c,d])},sML.Ajax=sML.A={open:function(a){try{var b=new XMLHttpRequest}catch(c){try{var b=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{var b=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}if(!b)return sML.log("sML.ShipBuilder could not find XHR.");if("object"!=typeof a||"string"!=typeof a.URI||"function"!=typeof a.onsuccess)return!1;a.Query||(a.Query=null),a.Auth||(a.Auth=["",""]),a.MimeType||(a.MimeType=null),a.onsuccess||(a.onsuccess=function(){}),a.onfailed||(a.onfailed=function(){sML.each(arguments,function(){sML.log(this+"")})}),a.ontimeout||(a.ontimeout=a.onfailed),a.Async!==!1&&(a.Async=!0),a.Method=a.Method&&/^POST$/i.test(a.Method)?"POST":"GET";var d="";if(a.Query)for(var e in a.Query)d+="&"+e+"="+encodeURIComponent(a.Query[e]);return d&&("GET"==a.method?(a.URI=a.URI+(a.URI.indexOf("?")>0?d:d.replace(/^&/,"?")),d=null):"POST"==a.Method&&(d=d.replace(/^&/,""))),b.sMLAjaxTimeout=0,b.sMLAjaxTimeoutTimer=setTimeout(function(){b.sMLAjaxTimeout=1,a.ontimeout("sML.AJAX.get Timeout: "+a.URI)},1e4),a.onstate4=function(c,d){b.sMLAjaxTimeout||(clearTimeout(b.sMLAjaxTimeoutTimer),200==b.status||0==b.status?a.onsuccess(c,d):a.onfailed("sML.AJAX.get Failed: ("+b.status+") "+URL),delete b)},b.onreadystatechange=function(){switch(this.readyState){case 4:return a.onstate4.call(this,this.responseText,this.responseXML)}},a.MimeType&&b.overrideMimeType(a.MimeType),b.open(a.Method,a.URI,a.Async,a.Auth[0],a.Auth[1]),"POST"==a.Method&&b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),b.send(d),b}},sML.ajax=function(){var a={};if("object"==typeof arguments[0]){if(a=arguments[0],"string"!=typeof a.URI)return!1}else{if("string"!=typeof arguments[0])return!1;"object"==typeof arguments[1]&&(a=arguments[1]),a.URI=arguments[0]}if("function"!=typeof a.onsuccess){if("function"!=typeof arguments[1])return!1;a.onsuccess=arguments[1],"function"==typeof arguments[2]&&(a.onfailed=arguments[2]),"function"==typeof arguments[3]&&(a.ontimeout=arguments[3])}return sML.Ajax.open(a)},sML.Location=sML.Loc={RE:new RegExp("^((([a-z]+)://([^/\\?#]+))(/[^\\?#]*))(\\?[^\\?#]*)?(#[^#]*)?$"),getFile:function(a){return(a?a:location.href).replace(this.RE,"$1")},getOrigin:function(a){return(a?a:location.href).replace(this.RE,"$2")},getProtocol:function(a){return(a?a:location.href).replace(this.RE,"$3")},getHost:function(a){return(a?a:location.href).replace(this.RE,"$4")},getPathname:function(a){return(a?a:location.href).replace(this.RE,"$5")},getSearch:function(a){return(a?a:location.href).replace(this.RE,"$6")},getHash:function(a){return(a?a:location.href).replace(this.RE,"$7")},getDirectory:function(a){return this.getFile(a).replace(/\/[^\/]*$/,"")},getId:function(a){return this.getHash(a).replace("#","")},getQueries:function(a){var b=(a?a:location.href).split("?");if(2!=b.length)return{};for(var c={},d=b[1].replace(/#.*$/,"").split("&"),e=0,f=d.length;f>e;e++)if(d[e]){var g=d[e].split("=");g.length<2?g[1]=null:g.length>2&&(g[1]=d[e].replace(g[0]+"=","")),c[g[0]]=g[1]}return c},isIndexFile:function(a){return/index\.(x?html?|php|cgi|[ja]spx?)$/.test(this.getPathname(a))},isSameFile:function(a,b){return this.getFile(a)==(b?this.getOrigin(b):location.protocol+"//"+location.host+location.pathname)},isSameOrigin:function(a,b){return this.getOrigin(a)==(b?this.getOrigin(b):location.protocol+"//"+location.host)},isSameProtocol:function(a,b){return this.getProtocol(a)==(b?this.getProtocol(b):location.protocol)},isSameHost:function(a,b){return this.getHost(a)==(b?this.getHost(b):location.host)},isSameHash:function(a,b){return this.getHash(a)==(b?this.getHash(b):location.hash)},isSameDirectory:function(a,b){return this.getDirectory(a)==(b?this.getDirectory(b):(location.protocol+"//"+location.host+location.pathname).replace(/\/[^\/]*$/,""))},isSameId:function(a,b){return this.getId(a)==(b?this.getId(b):location.hash.replace("#",""))}},sML.getQueries=sML.Location.getQueries,sML.Cookies=sML.cookies={put:function(a,b,c){if(!c)var c=1;var d=new Date;return document.cookie=a+"="+b+"; path=/; expires="+d.toGMTString(d.setTime(d.getTime()+864e5*c)),document.cookie},del:function(a){var b=new Date;return document.cookie=a+"=%00; path=/; expires="+b.toGMTString(b.setTime(b.getTime()-864e5)),document.cookie},get:function(a){for(var b=document.cookie.split("; "),c="",d=0,e=b.length;e>d;d++)if(b[d].substr(0,a.length+1)==a+"="){c=b[d].substr(a.length+1,b[d].length);break}return c}},sML.CookieMonster={Cookies:{},set:function(a,b,c){return this.Cookies[a]||(this.Cookies[a]=this.get(a)),null==c?"undefined"!=typeof this.Cookies[a][b]&&delete this.Cookies[a][b]:this.Cookies[a][b]=c,this.Cookies[a]},put:function(a,b){if(!sML.getLength(this.Cookies[a]))return sML.Cookies.del(a),this.del(a);var c="";for(var d in this.Cookies[a])c+='"'+d+'":"'+this.Cookies[a][d]+'",';return c=encodeURIComponent("{"+c.replace(/\,$/,"")+"}"),sML.Cookies.put(a,c,b),this.Cookies},del:function(a){return this.Cookies[a]&&(sML.Cookies.del(a),delete this.Cookies[a]),this.Cookies},get:function(N,K){if(!this.Cookies[N]){var V="";try{V=eval("("+decodeURIComponent(sML.Cookies.get(N))+")")}catch(e){}this.Cookies[N]="object"==typeof V?V:{}}return K?"undefined"==typeof this.Cookies[N][K]?"":this.Cookies[N][K]:this.Cookies[N]}},sML.map=function(a,b){return Array.prototype.map.call(a,b)},sML.filter=function(a,b){return Array.prototype.filter.call(a,b)},sML.forEach=function(a,b){return Array.prototype.forEach.call(a,b)},sML.foreach=function(a,b,c){for(var d=0,e=a.length;e>d&&b.call(c,a[d],d,a)!==!1;d++);return a},sML.each=function(a,b,c,d){for(var e=c?c:0,f=d?d+1:a.length;f>e&&b.call(a[e],e,a)!==!1;e++);return a},sML.toArray=function(){for(var a=[],b=0,c=arguments.length;c>b;b++)if("undefined"==typeof arguments[b].length||"string"==typeof arguments[b])a.push(arguments[b]);else for(var d=0,e=arguments[b].length;e>d;d++)a.push(arguments[b][d]);return a},sML.firstOf=function(a){return a.length?a[0]:null},sML.lastOf=function(a){return a.length?a[a.length-1]:null},sML.Math={sum:function(){for(var a=0,b=0,c=arguments.length;c>b;b++){var d=0;"number"==typeof arguments[b]?d=arguments[b]:"string"==typeof arguments[b]&&(d=arguments[b].length),a+=d}return a},random:function(a,b){isNaN(a)&&isNaN(b)?(a=0,b=1):isNaN(a)?a=0:isNaN(b)&&(b=0);var c=Math.min(a,b),d=Math.max(a,b);return Math.floor(Math.random()*(d-c+1))+c}},sML.String={pad:function(a,b,c){if(a+="",a.length>=b)return a;"string"!=typeof c&&(c="0");for(var d="";d.length<b;)d+=c;return(d+a).slice(-b)},insertZeroWidthSpace:function(a){return a.replace(/(?=\w)/g,"&#x200B;")},replace:function(a,b){if(b.length%2)return this;for(var c=0,d=b.length/2;d>c;c++)a=a.replace(b[2*c],b[2*c+1]);return a}},sML.getLength=function(a){if("object"==typeof a){if(a instanceof Array)return a.length;var b=0;for(var c in a)b++;return b}return"string"==typeof a?a.length:"number"==typeof a?(""+a).length:null},sML.padZero=sML.zeroPadding=sML.String.padZero=sML.String.pad,sML.insertZeroWidthSpace=sML.String.insertZeroWidthSpace,sML.Range={getRange:function(a,b){if(!a)return null;b||(b=a.Start.Node.ownerDocument);var c=b.createRange();return c.setStart(a.Start.Node,"number"==typeof a.Start.Index?a.Start.Index:a.Start.Node.textContent.indexOf(a.Start.Text)),c.setEnd(a.End.Node,"number"==typeof a.End.Index?a.End.Index:a.End.Node.textContent.indexOf(a.End.Text)+a.End.Text.length),c},flat:function(a){return a.replace(/[\r\n]/g,"")},escape:function(a){return this.flat(a).replace(/([\(\)\{\}\[\]\,\.\-\+\*\?\!\:\^\$\/\\])/g,"\\$1")},distill:function(a,b,c){for(var d="",e=b;c>=e;e++)d+=a[e];return d},find:function(a,b){if(b||(b=document.body),"string"!=typeof a||!a||this.flat(b.textContent).indexOf(a)<0)return null;if(3==b.nodeType)return{Start:{Node:b,Text:a},End:{Node:b,Text:a}};for(var c=[],d=0,e=b.childNodes.length-1,f="",g={},h=0;e>=h;h++){if(this.flat(b.childNodes[h].textContent).indexOf(a)>=0)return this.find(a,b.childNodes[h]);c.push(b.childNodes[h].textContent)}for(f=this.distill(c,d+1,e);f&&this.flat(f).indexOf(a)>=0;)d++,f=this.distill(c,d+1,e);var i=b.childNodes[d],j=0,k=i.textContent.length-1,l="";for(f=this.distill(i.textContent,j,k);this.flat(f)&&!new RegExp("^"+this.escape(f)).test(a);)j++,f=this.distill(i.textContent,j,k);for(l=this.flat(f);3!=i.nodeType;)g=this.find(l,i),i=g.Start.Node,l=g.Start.Text;for(f=this.distill(c,d,e-1);f&&this.flat(f).indexOf(a)>=0;)e--,f=this.distill(c,d,e-1);var m=b.childNodes[e],n=0,o=m.textContent.length-1,p="";for(f=this.distill(m.textContent,n,o);this.flat(f)&&!new RegExp(this.escape(f)+"$").test(a);)o--,f=this.distill(m.textContent,n,o);for(p=this.flat(f);3!=m.nodeType;)g=this.find(p,m),m=g.End.Node,p=g.End.Text;return{Start:{Node:i,Text:l},End:{Node:m,Text:p}}}},sML.Selection={selectRange:function(a){if(!a)return null;var b=window.getSelection();return b.removeAllRanges(),b.addRange(a),a},getSelectedText:sML.UA.IE<9?function(){var a=""+document.selection.createRange().text;return a?a:""}:function(){var a=""+window.getSelection();return a?a:""}},sML.getSelection=function(){return sML.Selection.getSelectedText()},sML.select=function(a,b){return sML.Selection.selectRange(sML.Range.getRange(a,b))},sML.find=function(a,b){return sML.Selection.selectRange(sML.Range.getRange(sML.Range.find(a,b)))},sML.Fullscreen={request:function(a){var b=function(b){return function(c){return c||(c=a),c[b]()}};return a.requestFullscreen?b("requestFullscreen"):a.requestFullScreen?b("requestFullScreen"):a.webkitRequestFullscreen?b("webkitRequestFullscreen"):a.webkitRequestFullScreen?b("webkitRequestFullScreen"):a.mozRequestFullscreen?b("mozRequestFullscreen"):a.mozRequestFullScreen?b("mozRequestFullScreen"):a.msRequestFullscreen?b("msRequestFullscreen"):function(){return!1}}(document.documentElement),exit:function(a){var b=function(b){return function(c){return c||(c=a),c[b]()}};return a.exitFullscreen?b("exitFullscreen"):a.cencelFullScreen?b("cencelFullScreen"):a.webkitExitFullscreen?b("webkitExitFullscreen"):a.webkitCancelFullScreen?b("webkitCancelFullScreen"):a.mozExitFullscreen?b("mozExitFullscreen"):a.mozRequestFullScreen?b("mozRequestFullScreen"):a.msExitFullscreen?b("msExitFullscreen"):function(){return!1}}(document),getElement:function(a){var b=function(b){return function(c){return c||(c=a),c[b]}};return"undefined"!=typeof a.fullscreenElement?b("fullscreenElement"):"undefined"!=typeof a.fullScreenElement?b("fullScreenElement"):"undefined"!=typeof a.webkitFullscreenElement?b("webkitFullscreenElement"):"undefined"!=typeof a.webkitFullScreenElement?b("webkitFullScreenElement"):"undefined"!=typeof a.mozFullscreenElement?b("mozFullscreenElement"):"undefined"!=typeof a.mozFullScreenElement?b("mozFullScreenElement"):"undefined"!=typeof a.msFullscreenElement?b("msFullscreenElement"):function(){return null}}(document)},sML.requestFullscreen=sML.Fullscreen.request,sML.exitFullscreen=sML.Fullscreen.exit,sML.getFullscreenElement=sML.Fullscreen.getElement,sML.SML={each:function(a){return sML.each(this,a),this},set:function(a,b){return this.each(function(){var c=this;sML.set(c,a,b)})},style:function(a){return this.each(function(){var b=this;sML.style(b,a)})},appendChild:function(a){return this.each(function(){var b=this;sML.each(a,function(){b.appendChild(this)})})},preppendChild:function(){return this.each(function(){var a=this;sML.each(Es,function(){a.insertBefore(this,S.firstChild)})})},insertBefore:function(a,b){return this.each(function(){var a=this;sML.each(Es,function(){a.insertBefore(this,b)})})},insertAfter:function(a,b){return this.each(function(){var a=this;sML.each(Es,function(){a.insertBefore(this,b.nextSibling)})})},addClass:function(a){return this.each(function(){var b=this;sML.addClass(b,a)})},removeClass:function(a){return this.each(function(){var b=this;sML.removeClass(b,a)})},replaceClass:function(a,b){return this.each(function(){var c=this;sML.replaceClass(c,a,b)})}},window.addEventListener("unload",function(){window.sML=null,delete window.sML}),sML}(),/*!
 *
 * # BiB/i (core)
 *
 * - "EPUB Reader on Your Web Site."
 * - Copyright (c) Satoru MATSUSHIMA - http://bibi.epub.link/ or https://github.com/satorumurmur/bibi
 * - Licensed under the MIT license. - http://www.opensource.org/licenses/mit-license.php
 *
 * - Sat May 2 18:15:00 2015 +0900 */
Bibi={Version:"0.998.3",Build:20150502.3},A={},B={},C={},L={},O={},P={},R={},S={},X={},O.welcome=function(){if(O.log(1,"Welcome !"),O.HTML=document.getElementsByTagName("html")[0],O.HTML.className="preparing "+sML.Environments.join(" "),O.Head=document.getElementsByTagName("head")[0],O.Body=document.getElementsByTagName("body")[0],O.Title=document.getElementsByTagName("title")[0],(sML.OS.iOS||sML.OS.Android)&&(O.SmartPhone=!0,O.HTML.className=O.HTML.className+" Touch",O.setOrientation=function(){sML.removeClass(O.HTML,"orientation-"+(0==window.orientation?"landscape":"portrait")),sML.addClass(O.HTML,"orientation-"+(0==window.orientation?"portrait":"landscape"))},window.addEventListener("orientationchange",O.setOrientation),O.setOrientation(),sML.OS.iOS&&(O.Head.appendChild(sML.create("meta",{name:"apple-mobile-web-app-capable",content:"yes"})),O.Head.appendChild(sML.create("meta",{name:"apple-mobile-web-app-status-bar-style",content:"white"})))),parent==window)O.HTML.className=O.HTML.className+" window-not-embedded",O.WindowEmbedded=0;else{O.HTML.className=O.HTML.className+" window-embedded";try{location.host==parent.location.host&&(O.WindowEmbedded=1,O.HTML.className=O.HTML.className+" window-embedded-sameorigin")}catch(a){O.WindowEmbedded=-1,O.HTML.className=O.HTML.className+" window-embedded-crossorigin"}}var b=document.body.appendChild(sML.create("div",{id:"checker"}));b.Child=b.appendChild(sML.create("p",{innerHTML:"aA"})),b.Child.offsetWidth<b.Child.offsetHeight?(O.HTML.className=O.HTML.className+" vertical-text-enabled",O.VerticalTextEnabled=!0):(O.HTML.className=O.HTML.className+" vertical-text-not-enabled",O.VerticalTextEnabled=!1),O.DefaultFontSize=Math.min(b.Child.offsetWidth,b.Child.offsetHeight),document.body.removeChild(b),O.found(),O.open()},O.found=function(){C.weaveCartain(),R.Content=O.Body.insertBefore(sML.create("div",{id:"epub-content"}),C.Cartain),R.Content.Main=R.Content.appendChild(sML.create("div",{id:"epub-content-main"})),R.Content.Complementary=R.Content.appendChild(sML.create("div",{id:"epub-content-complementary"})),R.Frame=sML.OS.iOS||sML.OS.Android?R.Content:window},O.open=function(){O.readExtra(),setTimeout(function(){L.getBook(X.book)},sML.OS.iOS||sML.OS.Android?1e3:1)},L.sayLoading=function(a){sML.addClass(O.HTML,"wait-please"),sML.addClass(C.Cartain,"animate"),C.Cartain.Message.note(a?a:"Loading...")},L.shutUpLoading=function(a){sML.removeClass(O.HTML,"wait-please"),sML.removeClass(C.Cartain,"animate"),C.Cartain.Message.note(a?a:"")},L.error=function(a){sML.removeClass(O.HTML,"wait-please"),sML.removeClass(C.Cartain,"animate"),O.log(0,a)},L.download=function(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;b&&e.overrideMimeType(b),e.open("GET",a,!0),e.onloadend=function(){if(200!==e.status){var b="XHR HTTP status: "+e.status+' "'+a+'"';return L.error(b),void d(new Error(b))}c(e)},e.send(null)})},L.requestDocument=function(a){var b,c,d=/\.(xml|opf|ncx)$/i.test(a),e=B.Zipped?Promise.resolve(c):L.download(S.bookshelf+B.Name+"/"+a).then(function(a){return b=a,d||(c=b.responseXML),c});return e.then(function(c){if(c)return c;var e=B.Zipped?A.Files[a]:b.responseText,c=sML.create("object",{innerHTML:d?O.toBibiXML(e):e});return d&&sML.each([c].concat(sML.toArray(c.getElementsByTagName("*"))),function(){this.getElementsByTagName=function(a){return this.querySelectorAll("bibi_"+a.replace(/:/g,"_"))}}),c&&c.childNodes&&c.childNodes.length?c:L.error('Invalid Content. - "'+a+'"')})},L.openDocument=function(a,b){b&&"object"==typeof b&&"function"==typeof b.then||(b={then:function(){return!1}}),L.requestDocument(a).then(b.then)},L.getBook=function(a){var b=function(b){a=b.name,b.size&&/\.epub$/i.test(a)?(X={book:"",bibi:{},pipi:{}},L.initialize(a),L.sayLoading(),O.log(2,"Loading EPUB..."),O.log(3,a),sML.edit(new FileReader,{onerror:function(){O.Body.style.opacity=1,C.Cartain.Message.note("Error. Something trouble...")},onload:function(){O.log(2,"Loaded."),c(this.result)}}).readAsArrayBuffer(b)):C.Cartain.Message.note('Give me <span style="color:rgb(128,128,128);">EPUB</span>. Drop into this window.')},c=function(b){L.preprocessEPUB(b),B.Name=a.replace(/\.epub$/i,""),B.Format="EPUB",B.Zipped=!0,L.openDocument(B.Container.Path,{then:L.readContainer})};if(window.File&&(C.Cartain.Catcher=C.Cartain.appendChild(sML.create("p",{id:"bibi-cartain-catcher",title:"Drop me an EPUB! or Click me!"},{display:"none"})),sML.addTouchEventObserver(C.Cartain.Catcher).addTouchEventListener("tap",function(){this.Input||(this.Input=this.appendChild(sML.create("input",{type:"file",onchange:function(a){b(a.target.files[0]),C.Cartain.Catcher.style.opacity=0}}))),this.Input.click()}),sML.OS.iOS||sML.OS.Android||(document.body.addEventListener("dragenter",function(a){a.preventDefault(),O.Body.style.opacity=.9,sML.addClass(O.HTML,"dragenter")},1),document.body.addEventListener("dragover",function(a){a.preventDefault(),O.Body.style.opacity=.9},1),document.body.addEventListener("dragleave",function(a){a.preventDefault(),O.Body.style.opacity=1,sML.removeClass(O.HTML,"dragenter")},1),document.body.addEventListener("drop",function(a){a.preventDefault(),O.Body.style.opacity=1,b(a.dataTransfer.files[0])},1))),"string"!=typeof a||!a||/\//.test(a))window.File?(C.Cartain.Catcher.style.display="block",C.Cartain.Message.note("Drop an EPUB file into this window, or click and select EPUB file.")):C.Cartain.Message.note("Tell me EPUB name via URL in address-bar.");else if(L.initialize(a),/\.epub$/i.test(a)){var d=function(){L.sayLoading(),O.log(2,"Fetching EPUB..."),O.log(3,a),L.download(S.bookshelf+a,"text/plain;charset=x-user-defined").then(function(a){O.log(2,"Fetched."),c(a.responseText)})};X.pipi.wait?(C.Cartain.createPlayButton({onplay:function(){d(),delete X.pipi.wait}}),C.Cartain.Message.note("")):d()}else L.sayLoading(),B.Name=a,B.Format="EPUB",L.openDocument(B.Container.Path,{then:L.readContainer})},L.initialize=function(a){O.log(2,"Initializing BiB/i..."),L.FileDigit=3,B={Container:{Path:"META-INF/container.xml"},Package:{}},R.Content.Main.style.opacity=0,R.Content.Main.innerHTML=R.Content.Complementary.innerHTML="",R.CoverImage={},R.Navigation={};var b="string"==typeof X.bibi.preset&&X.bibi.preset&&!/\//.test(X.bibi.preset)?X.bibi.preset.replace(/(\.js)?$/,".js"):"default.js",c=function(){["spread-gap","spread-margin-start","spread-margin-end","item-padding-left","item-padding-right","item-padding-top","item-padding-bottom"].forEach(function(a){P[a]="number"!=typeof P[a]||P[a]<0?0:Math.round(P[a])}),P["spread-gap"]%2&&P["spread-gap"]++,X.bibi["book-display-mode"]&&/^(all|each)$/.test(X.bibi["book-display-mode"])&&(P["book-display-mode"]=X.bibi["book-display-mode"]),X.bibi["spread-layout-axis"]&&/^(horizontal|vertical)$/.test(X.bibi["spread-layout-axis"])&&(P["spread-layout-axis"]=X.bibi["spread-layout-axis"]),X.bibi["page-size-format"]&&/^(portrait|landscape|window)$/.test(X.bibi["page-size-format"])&&(P["page-size-format"]=X.bibi["page-size-format"]),O.updateSetting(P)};P.FileName||"default.js"!=b?P.FileName!=b&&(P.loaded=!1,document.getElementById("bibi-preset")&&sML.removeElement(document.getElementById("bibi-preset")),sML.insertAfter(sML.create("script",{id:"bibi-preset",onload:c}),document.getElementById("bibi-script")).src="../../bib/presets/"+b,P.FileName=b):(P.FileName="default.js",c()),O.log(3,"preset: "+b),O.log(3,"bookshelf: "+S.bookshelf),O.log(3,"book: "+a+(/\.epub$/i.test(a)?"":" (Unzipped)")),O.log(2,"Initialized.")},L.preprocessEPUB=function(a){O.log(2,"Preprocessing EPUB..."),A={Files:{},FileCount:{All:0,HTML:0,CSS:0,SVG:0,Bitmap:0,Font:0,Audio:0,Video:0,PDF:0,Etcetra:0},getDataURI:function(a){for(var b in O.ContentTypeList)if(O.ContentTypeList[b].test(a))return"data:"+b+";base64,"+(O.isBin(a)?btoa(A.Files[a]):Base64.encode(A.Files[a]));return""}},a=(new JSZip).load(a);for(var b in a.files)a.files[b]._data&&(A.FileCount.All++,/\.(x?html?)$/i.test(b)?A.FileCount.HTML++:/\.(css)$/i.test(b)?A.FileCount.CSS++:/\.(svg)$/i.test(b)?A.FileCount.SVG++:/\.(gif|jpe?g|png)$/i.test(b)?A.FileCount.Bitmap++:/\.(woff|otf|ttf)$/i.test(b)?A.FileCount.Font++:/\.(m4a|aac|mp3|ogg)$/i.test(b)?A.FileCount.Audio++:/\.(mp4|m4v|ogv|webm)$/i.test(b)?A.FileCount.Video++:/\.(pdf)$/i.test(b)?A.FileCount.PDF++:A.FileCount.Etcetra++,A.Files[b]=O.isBin(b)?a.file(b).asBinary():Base64.btou(a.file(b).asText()));L.FileDigit=(A.FileCount.All+"").length,A.FileCount.All&&O.log(3,sML.String.padZero(A.FileCount.All,L.FileDigit)+" File"+(A.FileCount.All>=2?"s":"")),A.FileCount.HTML&&O.log(4,sML.String.padZero(A.FileCount.HTML,L.FileDigit)+" HTML"+(A.FileCount.HTML>=2?"s":"")),A.FileCount.CSS&&O.log(4,sML.String.padZero(A.FileCount.CSS,L.FileDigit)+" CSS"+(A.FileCount.CSS>=2?"s":"")),A.FileCount.SVG&&O.log(4,sML.String.padZero(A.FileCount.SVG,L.FileDigit)+" SVG"+(A.FileCount.SVG>=2?"s":"")),A.FileCount.Bitmap&&O.log(4,sML.String.padZero(A.FileCount.Bitmap,L.FileDigit)+" Bitmap"+(A.FileCount.Bitmap>=2?"s":"")),A.FileCount.Font&&O.log(4,sML.String.padZero(A.FileCount.Font,L.FileDigit)+" Font"+(A.FileCount.Font>=2?"s":"")),A.FileCount.Audio&&O.log(4,sML.String.padZero(A.FileCount.Audio,L.FileDigit)+" Audio"+(A.FileCount.Audio>=2?"s":"")),A.FileCount.Video&&O.log(4,sML.String.padZero(A.FileCount.Video,L.FileDigit)+" Video"+(A.FileCount.Video>=2?"s":"")),A.FileCount.PDF&&O.log(4,sML.String.padZero(A.FileCount.PDF,L.FileDigit)+" PDF"+(A.FileCount.PDF>=2?"s":"")),A.FileCount.Etcetra&&O.log(4,sML.String.padZero(A.FileCount.Etcetra,L.FileDigit)+" etc."),delete a;var c=replaceResourceRefferences=function(a,b,c){"function"!=typeof c&&(c=function(a){return new RegExp("<\\??[a-zA-Z1-6:-]+[^>]*? "+a+'[ 	]*=[ 	]*[\'"](?!(?:https?|data):)([^"]+?)[\'"]',"g")});var d=A.Files[a].replace(/[\r\n]/g,"\n").replace(/\r/g,"\n"),e=a.replace(/\/?[^\/]+$/,"");for(var f in b){var g=c(f),h=d.match(g);if(h){var i=new RegExp("."+b[f]+"$","i");sML.each(h,function(){var b=this.replace(g,"$1"),c=O.getPath(e,(/^(\.*\/+|#)/.test(b)?"":"./")+b),f=c.split("#"),h=f[0]?f[0]:a,j=f[1]?f[1]:"";i.test(h)&&"string"==typeof A.Files[h]&&(d=d.replace(this,this.replace(b,A.getDataURI(h)+(j?"#"+j:""))))})}}return d},d={CSS:0,SVG:0,HTML:0};for(var e in A.Files)/\.css$/.test(e)&&(A.Files[e]=function(a){var b=arguments.callee;if(!A.Files[a])return"";var d=/@import[ \t]*(?:url\()?["']?(?!(?:https?|data):)(.+?)['"]?(?:\))?[ \t]*;/g,e=A.Files[a].match(d);return e&&sML.each(e,function(){var c=O.getPath(a.replace(/[^\/]+$/,""),this.replace(d,"$1"));A.Files[c]&&(A.Files[a]=A.Files[a].replace(this,b(c)))}),A.Files[a]=c(a,{url:"gif|png|jpe?g|svg|ttf|otf|woff"},function(){return/url\(["']?(?!(?:https?|data):)(.+?)['"]?\)/g}),A.Files[a]}(e),d.CSS++);d.CSS&&O.log(3,sML.String.padZero(d.CSS,L.FileDigit)+" CSS"+(d.CSS>=2?"s":"")+" Preprocessed.");for(var e in A.Files)/\.svg$/.test(e)&&(A.Files[e]=c(e,{href:"css",src:"gif|png|jpe?g|svg|js","xlink:href":"gif|png|jpe?g"}),d.SVG++);d.SVG&&O.log(3,sML.String.padZero(d.SVG,L.FileDigit)+" SVG"+(d.SVG>=2?"s":"")+" Preprocessed.");for(var e in A.Files)/\.x?html?$/.test(e)&&(A.Files[e]=c(e,{href:"css",src:"gif|png|jpe?g|svg|js","xlink:href":"gif|png|jpe?g"}));for(var e in A.Files)/\.x?html?$/.test(e)&&(A.Files[e]=c(e,{src:"x?html?"}),d.HTML++);d.HTML&&O.log(3,sML.String.padZero(d.HTML,L.FileDigit)+" HTML"+(d.HTML>=2?"s":"")+" Preprocessed."),O.log(2,"Preprocessed.")},L.readContainer=function(a){O.log(2,"Reading Container XML..."),O.log(3,B.Container.Path),B.Package.Path=a.getElementsByTagName("rootfile")[0].getAttribute("full-path"),B.Package.Dir=B.Package.Path.replace(/\/?[^\/]+$/,""),O.log(2,"Read."),L.openDocument(B.Package.Path,{then:L.readPackageDocument})},L.readPackageDocument=function(a){O.log(2,"Reading Package Document..."),O.log(3,B.Package.Path);var b=a.getElementsByTagName("metadata")[0],c=a.getElementsByTagName("manifest")[0],d=a.getElementsByTagName("spine")[0],e=c.getElementsByTagName("item"),f=d.getElementsByTagName("itemref");if(e.length<=0)return O.log(0,'"'+B.Package.Path+'" has no <item> in <manifest>.');if(f.length<=0)return O.log(0,'"'+B.Package.Path+'" has no <itemref> in <spine>.');B.Package.Metadata={title:"",creator:"",publisher:"",language:"",titles:[],creators:[],publishers:[],languages:[]},B.Package.Manifest={items:{},nav:{},"cover-image":{},"toc-ncx":{}},B.Package.Spine={itemrefs:[]},sML.each(b.getElementsByTagName("meta"),function(){if(!this.getAttribute("refines")){if(this.getAttribute("property")){var a=this.getAttribute("property").replace(/^dcterms:/,"");/^(title|creator|publisher|language)$/.test(a)?B.Package.Metadata[a+"s"].push(this.textContent):B.Package.Metadata[a]||(B.Package.Metadata[a]=this.textContent)}this.getAttribute("name")&&this.getAttribute("content")&&(B.Package.Metadata[this.getAttribute("name")]=this.getAttribute("content"))}}),B.Package.Metadata.titles.length||sML.each(a.getElementsByTagName("dc:title"),function(){return B.Package.Metadata.titles.push(this.textContent),!1}),B.Package.Metadata.creators.length||sML.each(a.getElementsByTagName("dc:creator"),function(){B.Package.Metadata.creators.push(this.textContent)}),B.Package.Metadata.publishers.length||sML.each(a.getElementsByTagName("dc:publisher"),function(){B.Package.Metadata.publishers.push(this.textContent)}),B.Package.Metadata.languages.length||sML.each(a.getElementsByTagName("dc:language"),function(){B.Package.Metadata.languages.push(this.textContent)}),B.Package.Metadata.languages.length||(B.Package.Metadata.languages[0]="en"),B.Package.Metadata.title=B.Package.Metadata.titles.join(", "),B.Package.Metadata.creator=B.Package.Metadata.creators.join(", "),B.Package.Metadata.publisher=B.Package.Metadata.publishers.join(", "),B.Package.Metadata.language=B.Package.Metadata.languages.join(", "),B.Package.Metadata["rendition:layout"]||(B.Package.Metadata["rendition:layout"]="reflowable"),B.Package.Metadata["rendition:orientation"]||(B.Package.Metadata["rendition:orientation"]="auto"),B.Package.Metadata["rendition:spread"]||(B.Package.Metadata["rendition:spread"]="auto"),B.Package.Metadata.cover||(B.Package.Metadata.cover=""),O.getMetadata=function(){return B.Package.Metadata};var g=d.getAttribute("toc");sML.each(e,function(){var a={id:this.getAttribute("id")||"",href:this.getAttribute("href")||"","media-type":this.getAttribute("media-type")||"",properties:this.getAttribute("properties")||"",fallback:this.getAttribute("fallback")||""};a.id&&a.href&&(B.Package.Manifest.items[a.id]=a,function(b){/ nav /.test(b)&&(B.Package.Manifest.nav.Path=O.getPath(B.Package.Dir,a.href)),/ cover-image /.test(b)&&(B.Package.Manifest["cover-image"].Path=O.getPath(B.Package.Dir,a.href))}(" "+a.properties+" "),g&&a.id==g&&(B.Package.Manifest["toc-ncx"].Path=O.getPath(B.Package.Dir,a.href)))}),B.Package.Spine["page-progression-direction"]=d.getAttribute("page-progression-direction"),B.Package.Spine["page-progression-direction"]&&/^(ltr|rtl)$/.test(B.Package.Spine["page-progression-direction"])||(B.Package.Spine["page-progression-direction"]="default");var h=[/(rendition:layout)-(.+)/,/(rendition:orientation)-(.+)/,/(rendition:spread)-(.+)/,/(rendition:page-spread)-(.+)/,/(page-spread)-(.+)/];sML.each(f,function(){var a={idref:this.getAttribute("idref")||"",linear:this.getAttribute("linear")||"",properties:this.getAttribute("properties")||"","page-spread":"","rendition:layout":B.Package.Metadata["rendition:layout"],"rendition:orientation":B.Package.Metadata["rendition:orientation"],"rendition:spread":B.Package.Metadata["rendition:spread"]};a.properties=a.properties.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ").split(" "),h.forEach(function(b){a.properties.forEach(function(c){return b.test(c)?(a[c.replace(b,"$1")]=c.replace(b,"$2").replace("rendition:",""),!1):void 0})}),a["rendition:page-spread"]&&(a["page-spread"]=a["rendition:page-spread"]),a["rendition:page-spread"]=a["page-spread"],a.viewport={content:null,width:null,height:null},a.viewBox={content:null,width:null,height:null},B.Package.Spine.itemrefs.push(a)}),B.IDFragments=[],B.Package.Metadata.title&&(B.IDFragments.push(B.Package.Metadata.title),O.log(3,"title: "+B.Package.Metadata.title)),B.Package.Metadata.creator&&(B.IDFragments.push(B.Package.Metadata.creator),O.log(3,"creator: "+B.Package.Metadata.creator)),B.Package.Metadata.publisher&&(B.IDFragments.push(B.Package.Metadata.publisher),O.log(3,"publisher: "+B.Package.Metadata.publisher)),B.IDFragments.length&&(O.Title.innerHTML="",O.Title.appendChild(document.createTextNode("BiB/i | "+B.IDFragments.join(" - ").replace(/&amp;?/gi,"&").replace(/&lt;?/gi,"<").replace(/&gt;?/gi,">")))),C.createPanel(),C.createPanelMisc(),C.createPanelNavigation(),C.createPanelMenu(),C.createSwitches(),O.log(2,"Read."),delete a,O.updateSetting({Reset:!0}),L.prepareSpine()},L.prepareSpine=function(){if(O.log(2,"Preparing Spine..."),R.Content.Main.innerHTML=R.Content.Complementary.innerHTML="",R.Spreads=[],R.Items=[],R.Pages=[],"rtl"==S.PPD)var a="right",b="left";else var a="left",b="right";sML.each(B.Package.Spine.itemrefs,function(c){var d=this,e=sML.create("iframe",{className:"item",id:"item-"+sML.String.padZero(c,L.FileDigit),scrolling:"no",allowtransparency:"true"});if(e.ItemRef=d,e.Path=O.getPath(B.Package.Dir,B.Package.Manifest.items[d.idref].href),e.Dir=e.Path.replace(/\/?[^\/]+$/,""),e.IsPrePaginated="pre-paginated"==d["rendition:layout"],"pre-paginated"==d["rendition:layout"]&&c){var f=R.Items[c-1];"pre-paginated"==f.ItemRef["rendition:layout"]&&f.ItemRef["page-spread"]==a&&d["page-spread"]==b&&(e.Pair=f,f.Pair=e)}if(e.Pair)var g=e.Pair.Spread;else{var h=R.Content.Main.appendChild(sML.create("div",{className:"spread-box"})),g=h.appendChild(sML.create("div",{className:"spread"}));"pre-paginated"==d["rendition:layout"]&&sML.addClass(h,"pre-paginated"),g.SpreadBox=h,g.Items=[],g.Pages=[],g.SpreadIndex=R.Spreads.length,R.Spreads.push(g)}var i=g.appendChild(sML.create("div",{className:"item-box"}));d["page-spread"]&&sML.addClass(i,"page-spread-"+d["page-spread"]),e.Spread=g,e.ItemBox=i,e.Pages=[],e.ItemIndexInSpread=g.Items.length,g.Items.push(e),e.ItemIndex=R.Items.length,R.Items.push(e)}),O.log(3,sML.String.padZero(R.Items.length,L.FileDigit)+" Items"),O.log(2,"Prepared."),L.createCover()},L.createCover=function(){O.log(2,"Creating Cover..."),B.Package.Manifest["cover-image"].Path&&(R.CoverImage.Path=B.Package.Manifest["cover-image"].Path),C.Cartain.Cover.Info=C.Cartain.Cover.appendChild(sML.create("p",{id:"bibi-cartain-cover-info",innerHTML:function(){var a=[];return B.Package.Metadata.title&&a.push("<strong>"+B.Package.Metadata.title+"</strong>"),B.Package.Metadata.creator&&a.push("<em>"+B.Package.Metadata.creator+"</em>"),B.Package.Metadata.publisher&&a.push("<span>"+B.Package.Metadata.publisher+"</span>"),a.join(" ")}()})),R.CoverImage.Path?(O.log(3,R.CoverImage.Path),C.Cartain.Cover.className=[C.Cartain.Cover.className,"with-cover-image"].join(" "),sML.create("img",{onload:function(){sML.style(C.Cartain.Cover,{backgroundImage:"url("+this.src+")",opacity:1}),O.log(2,"Created."),L.loadNavigation()}}).src=function(){return B.Zipped?A.getDataURI(R.CoverImage.Path):S.bookshelf+B.Name+"/"+R.CoverImage.Path}()):(O.log(3,"No Cover Image."),C.Cartain.Cover.className=[C.Cartain.Cover.className,"without-cover-image"].join(" "),O.log(2,"Created."),L.loadNavigation())},L.loadNavigation=function(){if(B.Package.Manifest.nav.Path)R.Navigation.Path=B.Package.Manifest.nav.Path,R.Navigation.Type="NavigationDocument";else{if(O.log(2,"No Navigation Document."),!B.Package.Manifest["toc-ncx"].Path)return O.log(2,"No TOC-NCX."),L.loadItems();R.Navigation.Path=B.Package.Manifest["toc-ncx"].Path,R.Navigation.Type="TOC-NCX"}L.openDocument(R.Navigation.Path,{then:L.createNavigation})},L.createNavigation=function(a){if(O.log(2,"Making Navigation..."),O.log(3,R.Navigation.Path),"NavigationDocument"==R.Navigation.Type)sML.each(a.querySelectorAll("nav"),function(){sML.each(this.querySelectorAll("*"),function(){this.removeAttribute("style")}),C.Panel.Navigation.Item.appendChild(this)});else{var b=a.getElementsByTagName("navMap")[0];sML.each(b.getElementsByTagName("navPoint"),function(){sML.insertBefore(sML.create("a",{href:this.getElementsByTagName("content")[0].getAttribute("src"),innerHTML:this.getElementsByTagName("text")[0].innerHTML}),this.getElementsByTagName("navLabel")[0]),sML.removeElement(this.getElementsByTagName("navLabel")[0]),sML.removeElement(this.getElementsByTagName("content")[0]);var a=sML.create("li");a.setAttribute("id",this.getAttribute("id")),a.setAttribute("playorder",this.getAttribute("playorder")),sML.insertBefore(a,this).appendChild(this),a.previousSibling&&a.previousSibling.tagName&&!/^a$/i.test(a.previousSibling.tagName)?a.previousSibling.appendChild(a):sML.insertBefore(sML.create("ul"),a).appendChild(a)}),C.Panel.Navigation.Item.innerHTML="<nav>"+b.innerHTML.replace(/<(bibi_)?navPoint( [^>]+)?>/gi,"").replace(/<\/(bibi_)?navPoint>/gi,"")+"</nav>"}L.postprocessLinkage(R.Navigation.Path,C.Panel.Navigation.Item,"InBibiNavigation"),R.resetNavigation(),O.log(2,"Made."),delete a,X.pipi.wait?(L.shutUpLoading(),C.Cartain.createPlayButton({onplay:function(){L.loadItems()}}),C.Cartain.Message.note("")):L.loadItems()},L.loadItems=function(){O.log(2,"Loading Items..."),O.Body.style.backgroundImage="none",sML.removeClass(O.HTML,"with-poster"),R.resetStage(),L.LoadedItems=0,R.ToRelayout=!1,L.listenResizingWhileLoading=function(){R.ToRelayout=!0},window.addEventListener("resize",L.listenResizingWhileLoading),R.Items.forEach(function(a){L.loadItem(a)}),setTimeout(function(){return L.LoadedItems<R.Items.length?setTimeout(arguments.callee,400):(document.body.style.display="",R.resetPages(),O.log(2,"Loaded."),void L.start())},10)},L.loadItem=function(a){var b=a.Path;if(a.Loaded=!1,a.LongWaited=!1,/\.(x?html?)$/i.test(b))B.Zipped?(L.writeItemHTML(a,A.Files[b]),setTimeout(L.postprocessItem,10,a)):(a.src=S.bookshelf+B.Name+"/"+b,a.onload=function(){setTimeout(L.postprocessItem,10,a)},a.ItemBox.appendChild(a));else if(/\.(svg)$/i.test(b))if(a.IsSVG=!0,B.Zipped)L.writeItemHTML(a,!1,"",A.Files[b].replace(/<\?xml-stylesheet (.+?)[ \t]?\?>/g,'<link rel="stylesheet" $1 />'));else{var c=S.bookshelf+B.Name+"/"+b;L.download(c).then(function(b){L.writeItemHTML(a,!1,'<base href="'+c+'" />',b.responseText.replace(/<\?xml-stylesheet (.+?)[ \t]?\?>/g,'<link rel="stylesheet" $1 />'))})}else/\.(gif|jpe?g|png)$/i.test(b)?(a.IsBitmap=!0,L.writeItemHTML(a,!1,"",'<img alt="" src="'+(B.Zipped?A.getDataURI(b):S.bookshelf+B.Name+"/"+b)+'" />')):/\.(pdf)$/i.test(b)&&(a.IsPDF=!0,L.writeItemHTML(a,!1,"",'<iframe     src="'+(B.Zipped?A.getDataURI(b):S.bookshelf+B.Name+"/"+b)+'" />'));O.log(3,sML.String.padZero(a.ItemIndex+1,L.FileDigit)+"/"+sML.String.padZero(B.Package.Spine.itemrefs.length,L.FileDigit)+" "+(b?b:"... Not Found."))},L.writeItemHTML=function(a,b,c,d){a.ItemBox.appendChild(a),a.contentDocument.open(),a.contentDocument.write(b?b:["<html>","<head>"+c+"</head>",'<body onload="parent.L.postprocessItem(parent.R.Items['+a.ItemIndex+"]); document.body.removeAttribute('onload'); return false;\">"+d+"</body>","</html>"].join("")),a.contentDocument.close()},L.postprocessItem=function(a){var b=a.ItemRef;a.HTML=sML.edit(a.contentDocument.getElementsByTagName("html")[0],{Item:a}),a.Head=sML.edit(a.contentDocument.getElementsByTagName("head")[0],{Item:a}),a.Body=sML.edit(a.contentDocument.getElementsByTagName("body")[0],{Item:a}),sML.each(a.Body.querySelectorAll("link"),function(){a.Head.appendChild(this)}),S["epub-additional-stylesheet"]&&a.Head.appendChild(sML.create("link",{rel:"stylesheet",href:S["epub-additional-stylesheet"]})),S["epub-additional-script"]&&a.Head.appendChild(sML.create("script",{src:S["epub-additional-script"]})),a.StyleSheets=[],sML.CSS.add({html:"-webkit-text-size-adjust: 100%;"},a.contentDocument),sML.each(a.HTML.querySelectorAll("link, style"),function(){if(/^link$/i.test(this.tagName)){if(!/^(alternate )?stylesheet$/.test(this.rel))return;if((sML.UA.Safari||sML.OS.iOS)&&"alternate stylesheet"==this.rel)return}a.StyleSheets.push(this)});var c=a.contentDocument.querySelectorAll("body>*");if(1==c.length&&(/^svg$/i.test(c[0].tagName)?a.SingleSVG=!0:/^img$/i.test(c[0].tagName)&&(a.SingleIMG=!0)),sML.each(a.Body.getElementsByTagName("img"),function(){this.Bibi={DefaultStyle:{margin:this.style.margin?this.style.margin:"",width:this.style.width?this.style.width:"",height:this.style.height?this.style.height:"","vertical-align":this.style.verticalAlign?this.style.verticalAlign:"","page-break-before":this.style.pageBreakBefore?this.style.pageBreakBefore:"","page-break-after":this.style.pageBreakAfter?this.style.pageBreakAfter:""}}}),sML.UA.InternetExplorer&&sML.each(a.Body.getElementsByTagName("svg"),function(){var a=this.getElementsByTagName("image");if(1==a.length){var b=a[0];b.getAttribute("width")&&b.getAttribute("height")&&(this.setAttribute("width",b.getAttribute("width")),this.setAttribute("height",b.getAttribute("height")))}}),sML.each(a.Head.getElementsByTagName("meta"),function(){if("viewport"==this.name&&(b.viewport.content=this.getAttribute("content"),b.viewport.content)){var a=1*b.viewport.content.replace(/^.*?width=([^\, ]+).*$/,"$1"),c=1*b.viewport.content.replace(/^.*?height=([^\, ]+).*$/,"$1");isNaN(a)||isNaN(c)||(b.viewport.width=a,b.viewport.height=c)}}),"pre-paginated"==b["rendition:layout"]&&!(b.viewport.width*b.viewport.height))if(a.SingleSVG){if(c[0].getAttribute("viewBox")){b.viewBox.content=c[0].getAttribute("viewBox");var d=b.viewBox.content.split(" ");if(4==d.length){var e=1*d[2]-1*d[0],f=1*d[3]-1*d[1];e&&f&&("100%"!=c[0].getAttribute("width")&&c[0].setAttribute("width","100%"),"100%"!=c[0].getAttribute("height")&&c[0].setAttribute("height","100%"),b.viewport.width=b.viewBox.width=e,b.viewport.height=b.viewBox.height=f)}}}else a.SingleIMG&&(b.viewport.width=parseInt(getComputedStyle(c[0]).width),b.viewport.height=parseInt(getComputedStyle(c[0]).height));L.postprocessLinkage(a.Path,a.Body),setTimeout(function(){if(/*!Item.LongWaited &&*/a.contentDocument.styleSheets.length<a.StyleSheets.length)return setTimeout(arguments.callee,100);if(sML.UA.Gecko||sML.UA.InternetExplorer<12){a.AdditionalStyles=[];var b=sML.UA.Gecko?function(a){/ (-(webkit|epub)-)?writing-mode: vertical-rl; /.test(a.cssText)?a.style.writingMode="vertical-rl":/ (-(webkit|epub)-)?writing-mode: vertical-lr; /.test(a.cssText)?a.style.writingMode="vertical-lr":/ (-(webkit|epub)-)?writing-mode: horizontal-tb; /.test(a.cssText)&&(a.style.writingMode="horizontal-tb")}:function(a){/ (-(webkit|epub)-)?writing-mode: vertical-rl; /.test(a.cssText)?a.style.writingMode=/ direction: rtl; /.test(a.cssText)?"bt-rl":"tb-rl":/ (-(webkit|epub)-)?writing-mode: vertical-lr; /.test(a.cssText)?a.style.writingMode=/ direction: rtl; /.test(a.cssText)?"bt-lr":"tb-lr":/ (-(webkit|epub)-)?writing-mode: horizontal-tb; /.test(a.cssText)&&(a.style.writingMode=/ direction: rtl; /.test(a.cssText)?"rl-tb":"lr-tb")};sML.each(a.contentDocument.styleSheets,function(){for(var a=this,c=a.cssRules.length,d=0;c>d;d++){var e=this.cssRules[d];e.cssRules?arguments.callee.call(e):e.styleSheet?arguments.callee.call(e.styleSheet):b(e)}})}!function(){var b=getComputedStyle(a.HTML),c=function(){return/^(vertical|horizontal)-/.test(b["-webkit-writing-mode"])?"-webkit-writing-mode":/^(vertical|horizontal)-/.test(b["writing-mode"])||sML.UA.InternetExplorer>=11?"writing-mode":void 0}();sML.style(a.HTML,{"writing-mode":getComputedStyle(a.Body)[c]}),a.HTML.WritingMode=function(){return c?/^vertical-/.test(b[c])?("rtl"==b.direction?"bt":"tb")+"-"+(/-lr$/.test(b[c])?"lr":"rl"):/^horizontal-/.test(b[c])?("rtl"==b.direction?"rl":"lr")+"-"+(/-bt$/.test(b[c])?"bt":"tb"):/^(lr|rl|tb|bt)-/.test(b[c])?b[c]:void 0:"rtl"==b.direction?"rl-tb":"lr-tb"}()}(),a.Body.style["margin"+function(){return/-rl$/.test(a.HTML.WritingMode)?"Left":/-lr$/.test(a.HTML.WritingMode)?"Right":"Bottom"}()]=0,a.HTML.style&&(a.ItemBox.style.background=a.contentDocument.defaultView.getComputedStyle(a.HTML).background,a.HTML.style.background=""),a.Body.style&&(a.style.background=a.contentDocument.defaultView.getComputedStyle(a.Body).background,a.Body.style.background=""),R.ToRelayout||(R.resetItem(a),R.resetSpread(a.Spread)),a.contentWindow.addEventListener("keydown",C.listenKeys,!1),a.Loaded=!0,L.LoadedItems++,O.showStatus("Loaded... ( "+L.LoadedItems+"/"+R.Items.length+" Items )")},100)},L.postprocessLinkage=function(a,b,c){var d=a.replace(/\/?([^\/]+)$/,""),e=a.replace(/^.+?([^\/]+)$/,"$1");sML.each(b.getElementsByTagName("a"),function(b){var f=sML.addTouchEventObserver(this);f.NavAIndex=b;var g=f.getAttribute("href");if(!g)return void(c&&(f.addEventListener("click",function(a){a.preventDefault()}),f.addEventListener("mousedown",function(a){a.stopPropagation()}),f.addTouchEventListener("tap",function(a){return a.stopPropagation(),!1}),sML.addClass(f,"bibi-navigation-inactive-link")));if(/^[a-zA-Z]+:/.test(g))return f.setAttribute("target","_blank");var h=O.getPath(d,(/^\.*\/+/.test(g)?"":"./")+(/^#/.test(g)?e:"")+g),i=h.split("#"),j=i[0]?i[0]:a,k=i[1]?i[1]:"",l=function(a){if(a.stopPropagation(),this.Target){var b=this,c=R.Started?function(){R.focus(b.Target)}:function(){C.Cartain.PlayButton.play(b.Target,b.NavAIndex)};b.InBibiNavigation?C.Panel.toggle(c):c()}return!1};R.Items.forEach(function(a){return j==a.Path?(f.setAttribute("data-bibi-original-href",g),f.setAttribute("href","bibi://"+B.Name+"/"+g),f.InBibiNavigation=c,f.Target={Item:a,Element:k?"#"+k:null},f.addEventListener("click",function(a){a.preventDefault()}),f.addEventListener("mousedown",function(a){a.stopPropagation()}),void f.addTouchEventListener("tap",l)):void 0}),k&&/^epubcfi\(.+\)$/.test(k)&&(f.setAttribute("data-bibi-original-href",g),f.setAttribute("href","bibi://"+B.Name+"/#"+k),f.InBibiNavigation=c,f.Target=O.getEPUBCFITarget(k),f.addEventListener("click",function(a){a.preventDefault()}),f.addEventListener("mousedown",function(a){a.stopPropagation()}),f.addTouchEventListener("tap",l)),c&&"number"==typeof X.pipi.nav&&b==X.pipi.nav&&f.Target&&(X.bibi.To=f.Target)})},L.start=function(){C.createArrows(),L.shutUpLoading(),R.layout({Target:X.bibi.To?X.bibi.To:"head"}),window.removeEventListener("resize",L.listenResizingWhileLoading),delete L.listenResizingWhileLoading,sML.style(R.Content.Main,{transition:"opacity 0.75s ease-in-out",opacity:1}),sML.style(C.Switches.Panel,{display:"block"}),sML.style(C.Arrows,{opacity:1}),X.bibi.To&&sML.style(C.Arrows.Back,{opacity:1}),sML.style(C.Arrows.Forward,{opacity:1}),setTimeout(function(){C.Cartain.close(function(){sML.removeClass(O.HTML,"preparing"),setTimeout(function(){[C.Arrows.Back,C.Arrows.Forward].forEach(function(a){sML.style(a,{opacity:""})}),document.body.click()},500)})},1),L.shutUpLoading(),window.addEventListener(O.SmartPhone?"orientationchange":"resize",R.onresize),window.addEventListener("scroll",R.onscroll),O.SmartPhone||window.addEventListener("keydown",C.listenKeys,!1),O.WindowEmbedded&&window.addEventListener("message",C.listenMessage,!1),R.Started=!0,O.log(1,"Enjoy!")},R.resetStage=function(){R.StageSize={},R.StageSize.Width=O.HTML.clientWidth,R.StageSize.Height=O.HTML.clientHeight,R.StageSize.Breadth=R.StageSize[S.SIZE.B]-S["spread-margin-start"]-S["spread-margin-end"],R.StageSize.Length=R.StageSize[S.SIZE.L]-2*S["spread-gap"],R.Content.Main.style.padding=R.Content.Main.style.width=R.Content.Main.style.height="",R.Content.Main.style["padding"+S.BASE.S]=R.Content.Main.style["padding"+S.BASE.E]=S["spread-margin-start"]+"px",R.Content.Main.style.background=S["book-background"]},R.getItemInnerText=function(a){var b="InnerText";return"undefined"!=typeof a.Body.innerText?b=a.Body.innerText:"undefined"!=typeof a.Body.textContent&&(b=a.Body.textContent),b.replace(/[\r\n\s\t ]/g,"")},R.resetItem=function(a){a.Reset=!1,a.Reflowable="pre-paginated"!=a.ItemRef["rendition:layout"]||!a.ItemRef.viewport[S.SIZE.b]||!a.ItemRef.viewport[S.SIZE.l],a.Reflowable?R.resetItem_Reflowable(a):R.resetItem_PrePagenated(a),a.Reset=!0},R.shock=function(a){var b=0,c=a.HTML,d=a.Body;

b=c.clientWidth,b=c.clientHeight,b=c.scrollWidth,b=c.scrollHeight,b=c.offsetWidth,b=c.offsetHeight,b=d.clientWidth,b=d.clientHeight,b=d.scrollWidth,b=d.scrollHeight,b=d.offsetWidth,b=d.offsetHeight},R.resetItem_Reflowable=function(a){var b=(a.ItemIndex,a.ItemRef,a.ItemBox),c=a.Spread;a.Pages=[],a.scrolling="no";var d=R.getItemInnerText(a);a.IsSingleImageItem=!d&&a.Body.querySelectorAll("img, svg").length-a.Body.querySelectorAll("svg img").length==1;var e=R.StageSize.Breadth-(S["item-padding-"+S.BASE.s]+S["item-padding-"+S.BASE.e]),f=R.StageSize.Length-(S["item-padding-"+S.BASE.b]+S["item-padding-"+S.BASE.a]),g=e,h=f,i=S["item-padding-"+S.BASE.a]+S["spread-gap"]+S["item-padding-"+S.BASE.b],j=1.414/.96;if(("width"==S.SIZE.l&&"portrait"==S["page-size-format"]||"height"==S.SIZE.l&&"landscape"==S["page-size-format"])&&(j=1/j),h=Math.min(f,Math.floor(g*j)),!a.IsSingleImageItem){var k=Math.floor((f-i)/2);h=k>h?k:f}b.style[S.SIZE.b]=g+(S["item-padding-"+S.BASE.s]+S["item-padding-"+S.BASE.e])+"px",a.style["padding-"+S.BASE.b]=S["item-padding-"+S.BASE.b]+"px",a.style["padding-"+S.BASE.a]=S["item-padding-"+S.BASE.a]+"px",a.style["padding-"+S.BASE.s]=S["item-padding-"+S.BASE.s]+"px",a.style["padding-"+S.BASE.e]=S["item-padding-"+S.BASE.e]+"px",a.style[S.SIZE.b]=g+"px",a.style[S.SIZE.l]=h+"px",a.HTML.style[S.SIZE.b]="",a.HTML.style[S.SIZE.l]="",a.HTML.style[S.SIZE.b]=g+"px",a.HTML.style[S.SIZE.l]=h+"px",sML.style(a.HTML,{"column-width":"","column-gap":"","column-rule":""}),a.Columned=!1,a.ColumnBreadth=0,a.ColumnLength=0,a.ColumnGap=0;var l=sML.CSS.addRule("*","word-wrap: break-word;",a.contentDocument);if(!d&&1==a.Body.getElementsByTagName("iframe").length){var m=a.Body.getElementsByTagName("iframe")[0];m.style[S.SIZE.b]=m.style[S.SIZE.l]="100%"}if(a.IsSingleImageItem){if(S["fit-images"]&&(sML.style(a.HTML,{"transform-origin":"",transformOrigin:"",transform:""}),a.Body["scroll"+S.SIZE.B]>g||a.Body["scroll"+S.SIZE.L]>h)){var n=Math.floor(100*Math.min(g/a.Body["scroll"+S.SIZE.B],h/a.Body["scroll"+S.SIZE.L]))/100,o={"lr-tb":"0 0","rl-tb":"100% 0","tb-rl":"100% 0","bt-rl":"100% 100%","tb-lr":"0 0","bt-lr":"0 100%"}[a.HTML.WritingMode];sML.style(a.HTML,{"transform-origin":o,transform:"scale("+n+")"})}}else if(S["fit-images"]&&"in-single-image-only-item"!=S["fit-images"]&&sML.each(a.Body.getElementsByTagName("img"),function(){this.style.display=this.Bibi.DefaultStyle.display,this.style.verticalAlign=this.Bibi.DefaultStyle["vertical-align"],this.style.width=this.Bibi.DefaultStyle.width,this.style.height=this.Bibi.DefaultStyle.height;var b=Math.floor(Math.min(parseInt(getComputedStyle(a.Body)[S.SIZE.b]),g)),c=Math.floor(Math.min(parseInt(getComputedStyle(a.Body)[S.SIZE.l]),h));(parseInt(getComputedStyle(this)[S.SIZE.b])>=b||parseInt(getComputedStyle(this)[S.SIZE.l])>=c)&&("inline"==getComputedStyle(this).display&&(this.style.display="inline-block"),this.style.verticalAlign="top",parseInt(getComputedStyle(this)[S.SIZE.b])>=b&&(this.style[S.SIZE.b]=b+"px",this.style[S.SIZE.l]="auto"),parseInt(getComputedStyle(this)[S.SIZE.l])>=c&&(this.style[S.SIZE.l]=c+"px",this.style[S.SIZE.b]="auto"))}),("each"==S["book-display-mode"]||a.Body["scroll"+S.SIZE.B]>g)&&(a.Columned=!0,a.ColumnBreadth=g,a.ColumnLength=h,a.ColumnGap=i,sML.style(a.HTML,{"column-width":a.ColumnLength+"px","column-gap":a.ColumnGap+"px","column-rule":""})),S["page-breaking"]){var p;p=a.Body["offset"+S.SIZE.B]<=g?["vertical"==S.SLA?"Top":"Left",window["inner"+S.SIZE.L],S.SIZE.L,S.SIZE.l,S.BASE.a]:["vertical"==S.SLA?"Left":"Top",g,S.SIZE.B,S.SIZE.b,S.BASE.e],sML.each(a.contentDocument.querySelectorAll("html>body *"),function(){var a=getComputedStyle(this);if("always"==a.pageBreakBefore||"always"==a.pageBreakAfter){this.BibiPageBreakerBefore&&(this.BibiPageBreakerBefore.style[p[3]]=""),this.BibiPageBreakerAfter&&(this.BibiPageBreakerAfter.style[p[3]]="");for(var b=this,c=b["offset"+p[0]],d=0;b.offsetParent;)b=b.offsetParent,c+=b["offset"+p[0]];"rtl"==S.SLD&&(c=window.innerWidth+-1*c-this["offset"+p[2]]),"always"==a.pageBreakBefore&&(this.BibiPageBreakerBefore||(this.BibiPageBreakerBefore=sML.insertBefore(sML.create("span",{className:"bibi-page-breaker-before"},{display:"block"}),this)),d=p[1]-c%p[1],d==p[1]&&(d=0),this.BibiPageBreakerBefore.style[p[3]]=d+"px"),"always"==a.pageBreakAfter&&(c+=d+this["offset"+p[2]],this.style["margin-"+p[4]]=0,this.BibiPageBreakerAfter||(this.BibiPageBreakerAfter=sML.insertAfter(sML.create("span",{className:"bibi-page-breaker-after"},{display:"block"}),this)),d=p[1]-c%p[1],d==p[1]&&(d=0),this.BibiPageBreakerAfter.style[p[3]]=d+"px")}})}if(sML.CSS.removeRule(l,a.contentDocument),a.IsSingleImageItem)var q=h;else if(sML.UA.InternetExplorer>=10)var q=a.Body["client"+S.SIZE.L];else var q=a.HTML["scroll"+S.SIZE.L];var r=Math.ceil((q+i)/(h+i));q=(h+i)*r-i,b.style[S.SIZE.l]=q+(S["item-padding-"+S.BASE.b]+S["item-padding-"+S.BASE.a])+"px",a.style[S.SIZE.l]=q+"px";for(var s=0;r>s;s++){var t=b.appendChild(sML.create("span",{className:"page"}));t.style["padding"+S.BASE.B]=S["item-padding-"+S.BASE.b]+"px",t.style["padding"+S.BASE.A]=S["item-padding-"+S.BASE.a]+"px",t.style["padding"+S.BASE.S]=S["item-padding-"+S.BASE.s]+"px",t.style["padding"+S.BASE.E]=S["item-padding-"+S.BASE.e]+"px",t.style[S.SIZE.b]=g+"px",t.style[S.SIZE.l]=h+"px",t.style[S.BASE.b]=(h+i)*s+"px",t.Item=a,t.Spread=c,t.PageIndexInItem=a.Pages.length,a.Pages.push(t)}return a},R.resetItem_PrePagenated=function(a){var b=(a.ItemIndex,a.ItemRef),c=a.ItemBox,d=a.Spread;a.Pages=[],a.HTML.style.margin=a.HTML.style.padding=a.Body.style.margin=a.Body.style.padding=0;var e=R.StageSize.Breadth,f=R.StageSize.Length;a.style["padding"+S.BASE.B]=a.style["padding"+S.BASE.A]=a.style["padding"+S.BASE.S]=a.style["padding"+S.BASE.E]=0,"ttb"!=S["spread-layout-direction"]||"right"!=b["page-spread"]&&"left"!=b["page-spread"]||(e/=2);var g=Math.min(Math.min(b.viewport[S.SIZE.b],e)/b.viewport[S.SIZE.b],Math.min(b.viewport[S.SIZE.l],f)/b.viewport[S.SIZE.l]);f=Math.floor(b.viewport[S.SIZE.l]*g),e=Math.floor(b.viewport[S.SIZE.b]*(f/b.viewport[S.SIZE.l])),a.style[S.SIZE.l]=c.style[S.SIZE.l]=f+"px",a.style[S.SIZE.b]=c.style[S.SIZE.b]=e+"px",sML.style(a.HTML,{width:b.viewport.width+"px",height:b.viewport.height+"px","transform-origin":"0 0",transformOrigin:"0 0",transform:"scale("+g+")"});var h=c.appendChild(sML.create("span",{className:"page"}));return"right"==b["page-spread"]?h.style.right=0:h.style.left=0,h.style[S.SIZE.b]=e+"px",h.style[S.SIZE.l]=f+"px",h.Item=a,h.Spread=d,h.PageIndexInItem=a.Pages.length,a.Pages.push(h),a},R.resetSpread=function(a){var b=a.SpreadBox;b.style["margin"+S.BASE.B]=b.style["margin"+S.BASE.A]="",b.style["margin"+S.BASE.E]=b.style["margin"+S.BASE.S]="auto",b.style.padding="",1==a.Items.length?(b.style[S.SIZE.b]=a.style[S.SIZE.b]=a.Items[0].ItemBox.style[S.SIZE.b],b.style[S.SIZE.l]=a.style[S.SIZE.l]=a.Items[0].ItemBox.style[S.SIZE.l]):(b.style.width=a.style.width=Math.ceil(parseFloat(a.Items[0].ItemBox.style.width)+parseFloat(a.Items[1].ItemBox.style.width))+"px",b.style.height=a.style.height=Math.ceil(Math.max(parseFloat(a.Items[0].ItemBox.style.height),parseFloat(a.Items[1].ItemBox.style.height)))+"px"),a.style["border-radius"]=S["spread-border-radius"],a.style["box-shadow"]=S["spread-box-shadow"]},R.resetPages=function(){return R.Pages.forEach(function(a){a.parentNode.removeChild(a),delete a}),R.Pages=[],R.Spreads.forEach(function(a){a.Pages=[],a.Items.forEach(function(b){b.Pages.forEach(function(b){b.PageIndexInSpread=a.Pages.length,a.Pages.push(b),b.PageIndex=R.Pages.length,R.Pages.push(b)})})}),R.Pages},R.resetNavigation=function(){if(sML.style(C.Panel.Navigation.Item,{"float":""}),"rtl"==S.PPD){{C.Panel.Navigation.Item.scrollWidth-window.innerWidth}C.Panel.Navigation.Item.scrollWidth<window.innerWidth&&sML.style(C.Panel.Navigation.Item,{"float":"right"}),C.Panel.Navigation.ItemBox.scrollLeft=C.Panel.Navigation.ItemBox.scrollWidth-window.innerWidth}},R.layoutSpread=function(a){var b=a.SpreadBox,c=!1,d=!1;c=0==a.SpreadIndex,d=a.SpreadIndex==R.Spreads.length-1,b.style.padding="";var e=0,f=0;"vertical"==S.SLA?1==a.Items.length&&("right"==a.Items[0].ItemRef["page-spread"]?("ltr"==S.PPD&&(e+=a.offsetWidth),"rtl"==S.PPD&&(f+=a.offsetWidth),b.style.paddingLeft=a.offsetWidth+"px"):"left"==a.Items[0].ItemRef["page-spread"]&&("ltr"==S.PPD&&(f+=a.offsetWidth),"rtl"==S.PPD&&(e+=a.offsetWidth),b.style.paddingRight=a.offsetWidth+"px")):b["offset"+S.SIZE.B]<R.StageSize.Breadth&&(f+=Math.floor((R.StageSize.Breadth-b["offset"+S.SIZE.B])/2),e+=R.StageSize.Breadth-b["offset"+S.SIZE.B]-f,e&&(b.style["padding"+S.BASE.S]=e+"px"),f&&(b.style["padding"+S.BASE.E]=f+"px"));var g=0,h=0;c?(g=Math.floor((R.StageSize.Length-b["offset"+S.SIZE.L])/2),g<S["spread-gap"]&&(g=S["spread-gap"])):g="reflowable"==B.Package.Metadata["rendition:layout"]?S["spread-gap"]:Math.floor(R.StageSize.Length/2),d&&(h+=Math.ceil((R.StageSize.Length-b["offset"+S.SIZE.L])/2),h<S["spread-gap"]&&(h=S["spread-gap"])),g&&(b.style["padding"+S.BASE.B]=g+"px"),h&&(b.style["padding"+S.BASE.A]=h+"px");var i=0;R.Spreads.forEach(function(a){i+=a.SpreadBox["offset"+S.SIZE.L]}),R.Content.Main.style[S.SIZE.b]="",R.Content.Main.style[S.SIZE.l]=i+"px"},R.layout=function(a){if(R.Layouted&&R.ToRelayout||O.log(2,"Laying Out..."),R.Layouted=!0,window.removeEventListener("scroll",R.onscroll),window.removeEventListener(O.SmartPhone?"orientationchange":"resize",R.onresize),a||(a={}),!a.Target){var b=R.getCurrentPages().Start;a.Target={ItemIndex:b.Item.ItemIndex,PageProgressInItem:b.PageIndexInItem/b.Item.Pages.length}}if(a.Setting&&O.updateSetting(a.Setting),a.Reset||R.ToRelayout){R.ToRelayout=!1,R.resetStage();for(var c=R.Spreads.length,d=0;c>d;d++){O.showStatus("Rendering... ( "+(d+1)+"/"+c+" Spreads )");for(var e=R.Spreads[d].Items.length,f=0;e>f;f++)R.resetItem(R.Spreads[d].Items[f]);R.resetSpread(R.Spreads[d])}R.resetPages(),R.resetNavigation()}R.Columned=!1;for(var g=0,h=R.Items.length;h>g;g++){var i=R.Items[g].HTML.style;if(i["-webkit-column-width"]||i["-moz-column-width"]||i["-ms-column-width"]||i["column-width"]){R.Columned=!0;break}}return a.Target=R.getTarget(a.Target),R.Spreads.forEach(function(b){R.layoutSpread(b,a.Target)}),R.focus(a.Target,{Duration:0,Easing:0}),O.log(3,"rendition:layout: "+B.Package.Metadata["rendition:layout"]),O.log(3,"page-progression-direction: "+S["page-progression-direction"]),O.log(3,"spread-layout-axis: "+S["spread-layout-axis"]),O.log(3,"book-display-mode: "+S["book-display-mode"]),O.log(2,"Laid Out."),"function"==typeof doAfter&&doAfter(),window.addEventListener(O.SmartPhone?"orientationchange":"resize",R.onresize),window.addEventListener("scroll",R.onscroll),S},R.Relayouting=0,R.relayout=function(a){if(!R.Started)return a&&a.Setting&&O.updateSetting(a.Setting),C.Cartain.PlayButton.play();if(!R.Relayouting){R.Relayouting++;var b=R.getCurrentPages(),c=b.Start?{ItemIndex:b.Start.Item.ItemIndex,PageProgressInItem:b.Start.PageIndexInItem/b.Start.Item.Pages.length}:{ItemIndex:0,PageProgressInItem:0};setTimeout(function(){sML.style(R.Content.Main,{transition:"opacity 0.4s ease",opacity:0}),window.removeEventListener("scroll",R.onscroll),window.removeEventListener(O.SmartPhone?"orientationchange":"resize",R.onresize),sML.addClass(O.HTML,"preparing"),setTimeout(function(){R.layout({Target:c,Reset:!0,Setting:a&&a.Setting?a.Setting:void 0}),R.Relayouting--,R.Relayouting||setTimeout(function(){sML.removeClass(O.HTML,"preparing"),window.addEventListener(O.SmartPhone?"orientationchange":"resize",R.onresize),window.addEventListener("scroll",R.onscroll),sML.style(R.Content.Main,{transition:"opacity 0.4s ease",opacity:1})},100)},100)},222)}},R.onscroll=function(){},R.onresize=function(){R.Timer_onresize&&clearTimeout(R.Timer_onresize),R.Timer_onresize=setTimeout(function(){R.relayout()},888)},R.changeView=function(a,b){if("paged"==a)"all"==S.BDM&&R.relayout({Setting:{"book-display-mode":"each","spread-layout-axis":"rtl"==B.Package.Spine["page-progression-direction"]||"pre-paginated"==B.Package.Metadata["rendition:layout"]?"vertical":"horizontal"}});else{var c="vertical"!=b?"horizontal":"vertical";("each"==S.BDM||c!=S.SLA)&&(R.Spreads.forEach(function(a){a.style.opacity=1}),R.relayout({Setting:{"book-display-mode":"all","spread-layout-axis":c,"page-size-format":P["page-size-format"]}}))}},R.changeBookDisplayMode=function(a){"each"==a?R.changeView("paged"):R.changeView("scroll","horizontal")},R.changeSpreadLayoutAxis=function(a){R.changeView("scroll",a)},R.getTarget=function(a){if("string"==typeof a?a={Edge:a}:"number"==typeof a&&(a={Item:R.Items[a]}),"object"!=typeof a||!a)return null;if(a.tagName&&(TargetElement=a,a={},"number"==typeof TargetElement.SpreadIndex?a.Item=TargetElement.Items[0]:"number"==typeof TargetElement.ItemIndex?a.Item=TargetElement:"number"==typeof TargetElement.PageIndex?a.Page=TargetElement:a.Element=TargetElement),"string"==typeof a.Edge){if("head"==a.Edge)return{Edge:"head",EdgeTRBL:"ttb"==S.SLD?"T":"rtl"==S.SLD?"R":"L",Item:R.Items[0],Page:R.Pages[0]};if("foot"==a.Edge)return{Edge:"foot",EdgeTRBL:"ttb"==S.SLD?"B":"rtl"==S.SLD?"L":"R",Item:R.Items[R.Items.length-1],Page:R.Pages[R.Pages.length-1]}}return a.Item||"number"!=typeof a.ItemIndex||(a.Item=R.Items[a.ItemIndex]),a.Page&&!a.Page.parentElement&&delete a.Page,a.Element?(a.Element.tagName?a.Item=a.Element.ownerDocument.body.Item?a.Element.ownerDocument.body.Item:null:"string"==typeof a.Element&&a.Item&&(a.Element=a.Item.contentDocument.querySelector(a.Element),a.Element||delete a.Element),a.Page=a.Item.Pages[0]):a.Page?a.Item=a.Page.Item:"number"==typeof a.PageIndexInItem&&a.Item?a.Page=a.Item.Pages[a.PageIndexInItem]:"number"==typeof a.PageProgressInItem&&a.Item?a.Page=a.Item.Pages[Math.floor(a.Item.Pages.length*a.PageProgressInItem)]:"number"==typeof a.PageIndex&&(a.Page=R.Pages[a.PageIndex],a.Item=a.Page.Item),a.Item?(a.Page||(a.Page=a.Item.Pages[0]),a):null},R.getCurrentPages=function(){var a=sML.Coord.getScrollCoord(R.Frame),b=sML.Coord.getClientSize(R.Frame);a={Left:a.X,Right:a.X+b.Width,Top:a.Y,Bottom:a.Y+b.Height};for(var c=[],d=null,e=0,f=b[S.SIZE.L]/2,g=R.Pages.length,h=0;g>h;h++)if("none"!=R.Pages[h].style.display){var i=sML.getCoord(R.Pages[h]),j=Math.min(a[S.BASE.A]/R.Scale*S.AXIS.PM,i[S.BASE.A]*S.AXIS.PM)-Math.max(a[S.BASE.B]/R.Scale*S.AXIS.PM,i[S.BASE.B]*S.AXIS.PM),k=Math.abs(a[S.BASE.B]/R.Scale+a[S.BASE.A]/R.Scale-(i[S.BASE.B]+i[S.BASE.a]));if(j=0>=j||!i[S.SIZE.L]||isNaN(j)?-1:Math.round(j/i[S.SIZE.L]*100),e>j){if(c.length)break}else j==e?c.push(R.Pages[h]):j>e&&(c[0]=R.Pages[h],e=j),f>k&&(d=R.Pages[h],f=k)}return{All:c,Start:c[0],Center:d,End:c[c.length-1]}},R.getPageGroup=function(a){a=R.getTarget(a);for(var b="a"==a.Side?-1:1,c=[],d=0,e=document.documentElement["client"+S.SIZE.L],f=a.Page.PageIndex;f>=0&&f<R.Pages.length&&(!a.Item.IsPrePaginated||R.Pages[f].Spread==a.Page.Spread)&&!(e-R.Pages[f]["offset"+S.SIZE.L]<0);f+=b)if(c.push(R.Pages[f]),"ttb"!=S.SLD||!R.Pages[f].Item.Pair||R.Pages[f].Item.Pair!=a.Page.Item){var g=0>f?S["spread-gap"]:0;e-=R.Pages[f]["offset"+S.SIZE.L]+g,d+=R.Pages[f]["offset"+S.SIZE.L]+g}var h=Math.floor(e/2),i=h;return"a"==a.Side&&(c.reverse(),i+=d-a.Page["offset"+S.SIZE.L]),{Page:a.Page,Pages:c,Length:d,MarginBeforeGroup:h,MarginBeforePage:i}},R.focus=function(a,b){var c=R.getTarget(a);if("object"!=typeof c||!c)return!1;if(c.Edge){var d=/^[TL]$/.test(c.EdgeTRBL)?0:R.Content.Main["offset"+[S.SIZE.L]]-sML.Coord.getClientSize(R.Frame)[S.SIZE.L];return sML.scrollTo(R.Frame,"ttb"==S.SLD?{Y:d*R.Scale}:{X:d*R.Scale},b),!1}var e,d,f,g="ttb"==S.SLD?["Top","Left"]:["Left","Top"],h={Element:c.Element,TextNodeIndex:c.TextNodeIndex,TermStep:c.TermStep};if(c.Element){e=c.Item.Pages[0];for(var i=e["offset"+g[0]];e.offsetParent;)e=e.offsetParent,i+=e["offset"+g[0]];e=c.Element;for(var j=e["offset"+g[0]],k=e["offset"+g[1]];e.offsetParent;)e=e.offsetParent,j+=e["offset"+g[0]],k+=e["offset"+g[1]];sML.getCoord(c.Element)[S.BASE.s]>c.Item["offset"+S.SIZE.B]-S["item-padding-"+S.BASE.s]-S["item-padding-"+S.BASE.e]?(j=0==k?0:"rtl"!=S.PPD?(c.Item.ColumnLength+c.Item.ColumnGap)*Math.floor(k/c.Item.ColumnBreadth)-S["item-padding-"+S.BASE.b]:(c.Item.ColumnLength+c.Item.ColumnGap)*Math.ceil(k/c.Item.ColumnBreadth)-S["item-padding-"+S.BASE.a],"rtl"==S.SLD&&(j=c.Item.offsetWidth-j)):"rtl"==S.SLD&&(j+=c.Element.offsetWidth),i+=S["item-padding-"+g[0].toLowerCase()]+j,c.Item.Pages.forEach(function(a){var b=sML.getCoord(a)[S.BASE.b];return(i+8)*S.AXIS.PM<b*S.AXIS.PM?!1:void(d=b)}),"rtl"==S.SLD?d+=S["spread-gap"]:d-=S["spread-gap"],"number"==typeof h.TextNodeIndex&&R.pointTextLocation(h),f=c.Item.Spread}else{var l=R.getPageGroup(c);for(e=l.Pages[0],d=e["offset"+g[0]];e.offsetParent;)e=e.offsetParent,d+=e["offset"+g[0]];if("rtl"==S.SLD&&(d+=Math.floor(l.Pages[0]["offset"+S.SIZE.L])),window["inner"+S.SIZE.L]>l.Pages[0]["offset"+S.SIZE.L]){var m=Math.floor((window["inner"+S.SIZE.L]-l.Length)/2);m>0&&(d-=m*S.AXIS.PM)}f=l.Pages[0].Spread}return"rtl"==S.SLD&&(d-=window["inner"+S.SIZE.L]),sML.scrollTo(R.Frame,"ttb"==S.SLD?{Y:d*R.Scale}:{X:d*R.Scale},b,"each"==S.BDM?{end:function(){R.Spreads.forEach(function(a){a==f&&(a.style.opacity=1)}),sML.removeClass(O.HTML,"flipping-ltr"),sML.removeClass(O.HTML,"flipping-rtl")}}:void 0),!1},R.pointTextLocation=function(a){if("number"==typeof a.TextNodeIndex){var b=a.Element.childNodes[a.TextNodeIndex];if(b&&b.textContent){var c={Start:{Node:b,Index:0},End:{Node:b,Index:b.textContent.length}};if(a.TermStep)if(a.TermStep.Preceding||a.TermStep.Following){if(c.Start.Index=a.TermStep.Index,c.End.Index=a.TermStep.Index,a.TermStep.Preceding&&(c.Start.Index-=a.TermStep.Preceding.length),a.TermStep.Following&&(c.End.Index+=a.TermStep.Following.length),c.Start.Index<0||b.textContent.length<c.End.Index)return;if(b.textContent.substr(c.Start.Index,c.End.Index-c.Start.Index)!=a.TermStep.Preceding+a.TermStep.Following)return}else if(a.TermStep.Side&&"a"==a.TermStep.Side){for(c.Start.Node=b.parentNode.firstChild;c.Start.Node.childNodes.length;)c.Start.Node=c.Start.Node.firstChild;c.End.Index=a.TermStep.Index-1}else{for(c.Start.Index=a.TermStep.Index,c.End.Node=b.parentNode.lastChild;c.End.Node.childNodes.length;)c.End.Node=c.End.Node.lastChild;c.End.Index=c.End.Node.textContent.length}return sML.select(c)}}},R.page=function(a){-1!=a&&(a=1);var b=R.getCurrentPages(),c=0>a?b.Start:b.End,d=c.PageIndex+a;if(0>d)return R.focus({Edge:"head"});if(d>R.Pages.length-1)return R.focus({Edge:"foot"});var e=R.Pages[d];"vertical"==S.SLA&&e.Item.Pair&&c.Item.Pair==e.Item&&(d+=a>0?1:-1),"horizontal"==S.SLA&&e.Item.Pair&&window["inner"+S.SIZE.L]>2*e.Item[S.SIZE.L]&&(0>a&&0==e.PageIndexInSpread&&(e=e.Spread.Pages[1]),a>0&&1==e.PageIndexInSpread&&(e=e.Spread.Pages[0]));var f=function(){R.focus({Page:e,Side:a>0?"b":"a"},"each"==S["book-display-mode"]?{Duration:1}:void 0)};"each"==S["book-display-mode"]?(sML.style(R.Content,{transition:"ease-out 0.05s"}),sML.addClass(O.HTML,"flipping-"+(a*("rtl"==S["page-progression-direction"]?1:-1)>0?"rtl":"ltr")),setTimeout(function(){sML.style(R.Content,{transition:"none"}),f()},50)):f()},R.scroll=function(a){return-1!=a&&(a=1),sML.scrollTo(R.Frame,function(b){switch(S.SLD){case"ttb":return{Y:b.Y+(R.StageSize.Length+S["spread-gap"])*a};case"ltr":return{X:b.X+(R.StageSize.Length+S["spread-gap"])*a};case"rtl":return{X:b.X+(R.StageSize.Length+S["spread-gap"])*a*-1}}}(sML.Coord.getScrollCoord(R.Frame)))},R.move=function(a){(R.Columned||"pre-paginated"==B.Package.Metadata["rendition:layout"]?R.page:R.scroll)(a)},R.to=function(a){return R.focus(O.getBibitoTarget(a))},R.Scale=1,R.zoom=function(a){("number"!=typeof a||0>=a)&&(a=1);var b=R.getCurrentPages().Start;sML.style(R.Content.Main,{"transform-origin":"rtl"==S.SLD?"100% 0":"0 0"}),1==a?(O.HTML.style.overflow="",sML.style(R.Content.Main,{transform:""})):(sML.style(R.Content.Main,{transform:"scale("+a+")"}),O.HTML.style.overflow="auto"),setTimeout(function(){R.focus(b,{Duration:1})},0),R.Scale=a},C.weaveCartain=function(){C.Cartain=document.getElementById("bibi-cartain"),sML.edit(C.Cartain,{State:1,open:function(a){return 1==this.State?"function"==typeof a?a():this.State:(this.State=1,this.style.display="block",this.style.zIndex=100,sML.style(this,{transition:"0.5s ease-out",transform:"translate"+S.AXIS.XY+"(0)",opacity:.75},function(){"function"==typeof a&&a()}),this.State)},close:function(a){return 0==this.State?"function"==typeof a?a():this.State:(this.State=0,this.Message.style.opacity=0,sML.style(this,{transition:"0.5s ease-in",transform:"translate"+S.AXIS.XY+"("+-1*S.AXIS.PM*240+"%)",opacity:0},function(){sML.style(this,{transition:"none",transform:"translate"+S.AXIS.XY+"("+240*S.AXIS.PM+"%)"}),this.style.zIndex=1,this.style.display="none","function"==typeof a&&a()}),this.State)},toggle:function(a){return 0==this.State?this.open(a):this.close(a)}}),C.Cartain.Powered=C.Cartain.appendChild(sML.create("p",{id:"bibi-cartain-powered",innerHTML:O.getLogo({Linkify:!0})})),C.Cartain.Cover=C.Cartain.insertBefore(sML.create("div",{id:"bibi-cartain-cover"}),C.Cartain.Powered),C.Cartain.Mark=C.Cartain.insertBefore(sML.create("div",{id:"bibi-cartain-mark",className:"animate"}),C.Cartain.Powered),C.Cartain.Message=C.Cartain.insertBefore(sML.create("p",{id:"bibi-cartain-message",className:"animate"}),C.Cartain.Powered);for(var a=1;8>=a;a++)C.Cartain.Mark.appendChild(sML.create("span",{className:"dot"+a}));C.Cartain.createPlayButton=function(a){var b=(sML.OS.iOS||sML.OS.Android?"Tap":"Click")+" to Open";C.Cartain.PlayButton=C.Cartain.appendChild(sML.create("p",{id:"bibi-cartain-playbutton",title:b,innerHTML:'<span class="non-visual">'+b+" to Open</span>",play:function(b,c){if(O.SmartPhone){var d=location.href.replace(/&wait=[^&]+/g,"");return"number"==typeof c&&(d=[d,"pipi(nav:"+c+")"].join(/#/.test(d)?",":"#")),window.open(d)}b&&(X.bibi.To=b),L.sayLoading(),this.removeTouchEventListener("tap"),sML.style(this,{opacity:0,cursor:"default"}),a.onplay()}})),sML.addTouchEventObserver(C.Cartain.PlayButton).addTouchEventListener("tap",function(a){this.play(),sML.stopPropagation(a)})},C.Cartain.Message.note=function(a){return C.Cartain.Message.innerHTML=a,a}},C.createPanel=function(){C.Panel?C.Panel.innerHTML="":C.Panel=O.Body.appendChild(sML.create("div",{id:"bibi-panel",State:0,open:function(a){return 1==this.State?"function"==typeof a?a():this.State:(this.State=1,C.Switches.Panel.toggleState(this.State),sML.addClass(O.HTML,"panel-opened"),setTimeout(a,250),this.State)},close:function(a){return 0==this.State?"function"==typeof a?a():this.State:(this.State=0,C.Switches.Panel.toggleState(this.State),sML.removeClass(O.HTML,"panel-opened"),setTimeout(a,250),this.State)},toggle:function(a){return 0==this.State?this.open(a):this.close(a)}}))},C.createPanelMisc=function(){C.Panel.Misc=C.Panel.appendChild(sML.create("div",{id:"bibi-panel-misc",innerHTML:O.getLogo({Linkify:!0})}))},C.createPanelNavigation=function(){C.Panel.Navigation=C.Panel.appendChild(sML.create("div",{id:"bibi-panel-navigation"})),C.Panel.Navigation.ItemBox=C.Panel.Navigation.appendChild(sML.create("div",{id:"bibi-panel-navigation-item-box"})),C.Panel.Navigation.Item=C.Panel.Navigation.ItemBox.appendChild(sML.create("div",{id:"bibi-panel-navigation-item"})),sML.OS.iOS||sML.OS.Android||sML.addTouchEventObserver(C.Panel.Navigation.ItemBox).addTouchEventListener("tap",function(){C.Panel.toggle()})},C.createPanelMenu=function(){C.Panel.Menu=C.Panel.appendChild(sML.create("div",{id:"bibi-panel-menu"}));var a={};a.Item='<span class="bibi-shape bibi-shape-item"></span>',a.Spread='<span class="bibi-shape bibi-shape-spread">'+a.Item+a.Item+"</span>",a.SpreadsS='<span class="bibi-shape bibi-shape-spreads bibi-shape-spreads-single">'+a.Spread+"</span>",a.SpreadsV='<span class="bibi-shape bibi-shape-spreads bibi-shape-spreads-vertical">'+a.Spread+a.Spread+a.Spread+"</span>",a.SpreadsH='<span class="bibi-shape bibi-shape-spreads bibi-shape-spreads-horizontal">'+a.Spread+a.Spread+a.Spread+"</span>",C.Panel.Menu.view=C.Panel.Menu.appendChild(sML.create("ul",{id:"bibi-panel-menu-view"})),C.Panel.Menu.view.Buttons={"display-each":C.Panel.Menu.view.appendChild(sML.create("li",{className:"display-each",innerHTML:'<span class="bibi-icon bibi-icon-each"       title="Paged View">'+a.SpreadsS+"</span>"})),"layout-horizontal":C.Panel.Menu.view.appendChild(sML.create("li",{className:"layout-horizontal",innerHTML:'<span class="bibi-icon bibi-icon-horizontal" title="Scroll View (Horizontal)">'+a.SpreadsH+"</span>"})),"layout-vertical":C.Panel.Menu.view.appendChild(sML.create("li",{className:"layout-vertical",innerHTML:'<span class="bibi-icon bibi-icon-vertical"   title="Scroll View (Vertical)">'+a.SpreadsV+"</span>"}))},sML.addTouchEventObserver(C.Panel.Menu.view.Buttons["display-each"]).addTouchEventListener("tap",function(){C.Panel.toggle(function(){R.changeView("paged")})}),sML.addTouchEventObserver(C.Panel.Menu.view.Buttons["layout-horizontal"]).addTouchEventListener("tap",function(){C.Panel.toggle(function(){R.changeView("scroll","horizontal")})}),sML.addTouchEventObserver(C.Panel.Menu.view.Buttons["layout-vertical"]).addTouchEventListener("tap",function(){C.Panel.toggle(function(){R.changeView("scroll","vertical")})}),sML.each(C.Panel.Menu.getElementsByClassName("bibi-icon"),function(){this.innerHTML='<span class="non-visual">'+this.title+"</span>"+this.innerHTML})},C.createSwitches=function(){C.Switches?C.Switches.innerHTML="":C.Switches=O.Body.appendChild(sML.create("div",{id:"bibi-switches"},{transition:"opacity 0.75s linear"}));var a=function(a){this.State="number"==typeof a?a:Math.abs(this.State-1);var b=B.Package.Metadata.languages[0].split("-")[0],c=(b&&/^(ja)$/.test(b)?this.Labels[this.State][b]+" / ":"")+this.Labels[this.State].en;return this.title=c,this.innerHTML='<span class="non-visual">'+c+"</span>",this.State};C.Switches.Panel=C.Switches.appendChild(sML.create("span",{className:"bibi-icon bibi-switch bibi-switch-panel",State:0,Labels:[{ja:"",en:"Open Menu"},{ja:"",en:"Close Menu"}],toggleState:a})),sML.addTouchEventObserver(C.Switches.Panel).addTouchEventListener("tap",function(){return C.Panel.toggle()}),function(){return document.body.requestFullscreen||document.body.requestFullScreen?!0:document.body.webkitRequestFullscreen||document.body.webkitRequestFullScreen?!0:document.body.mozRequestFullscreen||document.body.mozRequestFullScreen?!0:document.body.msRequestFullscreen?!0:!1}()?(sML.addClass(O.HTML,"fullscreen-enabled"),O.WindowEmbedded||(C.Switches.Fullscreen=C.Switches.appendChild(sML.create("span",{className:"bibi-icon bibi-switch bibi-switch-fullscreen",State:0,Labels:[{ja:"",en:"Enter Fullscreen"},{ja:"",en:"Exit Fullscreen"}],toggleState:a,enter:function(){sML.requestFullscreen(O.HTML),this.toggleState(1)},exit:function(){sML.exitFullscreen(),this.toggleState(0)},toggle:function(){return sML.getFullscreenElement()?this.exit():this.enter()}})),sML.addTouchEventObserver(C.Switches.Fullscreen).addTouchEventListener("tap",function(){return this.toggle()}))):sML.addClass(O.HTML,"fullscreen-not-enabled"),sML.each(C.Switches.getElementsByClassName("bibi-switch"),function(){this.toggleState(0)})},C.createArrows=function(){C.Arrows?C.Arrows.innerHTML="":C.Arrows=R.Content.appendChild(sML.create("div",{id:"bibi-arrows"},{transition:"opacity 0.75s linear",opacity:0})),C.Arrows.Back=C.Arrows.appendChild(sML.create("div",{title:"Back",className:"bibi-arrow",id:"bibi-arrow-back",DistanceToMove:-1})),C.Arrows.Forward=C.Arrows.appendChild(sML.create("div",{title:"Forward",className:"bibi-arrow",id:"bibi-arrow-forward",DistanceToMove:1})),[C.Arrows.Back,C.Arrows.Forward].forEach(function(a){a.addEventListener("mouseover",function(){a.Timer_tap&&clearTimeout(a.Timer_tap),sML.addClass(a,"shown")}),a.addEventListener("mouseout",function(){sML.removeClass(a,"shown")}),sML.addTouchEventObserver(a).addTouchEventListener("tap",function(){R.move(a.DistanceToMove),sML.addClass(a,"shown"),a.Timer_tap&&clearTimeout(a.Timer_tap),a.Timer_tap=setTimeout(function(){sML.removeClass(a,"shown")},500)})})},C.listenKeys=function(a){if(R.Started){a.preventDefault();var b=parent!=window&&parent.Bibi?parent:window;b.C.KeyCode=a.keyCode;var c=null;if("rtl"==S["page-progression-direction"])switch(a.keyCode){case 37:c=1;break;case 38:c=-1;break;case 39:c=-1;break;case 40:c=1}else switch(a.keyCode){case 37:c=-1;break;case 38:c=-1;break;case 39:c=1;break;case 40:c=1}return c?b.R.page(c):void 0}},C.listenMessage=function(){return!1},O.updateSetting=function(a){if("object"!=typeof a)return S;var b=S.BDM,c=S.SLA,d=S.SLD,e=S.PSF,f=S.PPD;if(a.Reset){for(var g in S)delete S[g];for(var g in P)S[g]=P[g];S["page-progression-direction"]=B.Package.Spine["page-progression-direction"],"default"==S["page-progression-direction"]&&(S["page-progression-direction"]=P["page-progression-direction"]),delete a.Reset}for(var g in a)S[g]=a[g];return/^https?:\/\//.test(S.bookshelf)||(S.bookshelf=O.getPath(location.href.split("?")[0].replace(/[^\/]*$/,"")+S.bookshelf)),"rtl"!=S["page-progression-direction"]||O.VerticalTextEnabled||"pre-paginated"==B.Package.Metadata["rendition:layout"]||(S["page-progression-direction"]="ltr"),"auto"==S["spread-layout-axis"]&&(S["spread-layout-axis"]=B.Package.Spine["page-progression-direction"]),"default"==S["spread-layout-axis"]&&(S["spread-layout-axis"]="pre-paginated"==B.Package.Metadata["rendition:layout"]?S["page-progression-direction"]:"vertical"),"vertical"!=S["spread-layout-axis"]&&(S["spread-layout-axis"]="horizontal"),"vertical"==S["spread-layout-axis"]&&(S["spread-layout-direction"]="ttb"),"horizontal"==S["spread-layout-axis"]&&(S["spread-layout-direction"]="rtl"!=S["page-progression-direction"]?"ltr":"rtl"),S.BDM=S["book-display-mode"],S.SLA=S["spread-layout-axis"],S.SLD=S["spread-layout-direction"],S.PPD=S["page-progression-direction"],S.PSF=S["page-size-format"],"vertical"==S.SLA?(S.SIZE={b:"width",B:"Width",l:"height",L:"Height",w:"breadth",W:"Breadth",h:"length",H:"Length"},S.AXIS={XY:"Y",YX:"X",PM:1},S.BASE="ltr"==S.PPD?{b:"top",B:"Top",a:"bottom",A:"Bottom",s:"left",S:"Left",e:"right",E:"Right",c:"center",m:"middle"}:{b:"top",B:"Top",a:"bottom",A:"Bottom",s:"right",S:"Right",e:"left",E:"Left",c:"center",m:"middle"}):(S.SIZE={b:"height",B:"Height",l:"width",L:"Width",w:"length",W:"Length",h:"breadth",H:"Breadth"},"ltr"==S.PPD?(S.AXIS={XY:"X",YX:"Y",PM:1},S.BASE={b:"left",B:"Left",a:"right",A:"Right",s:"top",S:"Top",e:"bottom",E:"Bottom",c:"middle",m:"center"}):(S.AXIS={XY:"X",YX:"Y",PM:-1},S.BASE={b:"right",B:"Right",a:"left",A:"Left",s:"top",S:"Top",e:"bottom",E:"Bottom",c:"middle",m:"center"})),b!=S.BDM&&sML.replaceClass(O.HTML,"display-"+b,"display-"+S.BDM),c!=S.SLA&&sML.replaceClass(O.HTML,"spread-"+c,"spread-"+S.SLA),d!=S.SLD&&sML.replaceClass(O.HTML,"spread-"+d,"spread-"+S.SLD),e!=S.PSF&&sML.replaceClass(O.HTML,"page-"+e,"page-"+S.PSF),f!=S.PPD&&sML.replaceClass(O.HTML,"page-"+f,"page-"+S.PPD),S},O.readExtra=function(){if(O.EPUBCFI=BibiEPUBCFI,X=O.parseHash(),X.book=sML.getQueries().book,history.replaceState&&history.replaceState(null,null,location.href.replace(/[\,#]pipi\([^\)]*\)$/g,"")),!X.book){var a=location.pathname.split("/"),b=a[a.length-1];""!=b&&"index.html"!=b&&(X.book=b.replace(/\.html$/,""))}X.bibi?(X.bibi={Data:X.bibi},X.bibi.Data.replace(" ","").split(",").forEach(function(a){var b=a.split(":");if(b[0]){if(!b[1])switch(b[0]){case"all":case"each":b[1]=b[0],b[0]="book-display-mode";break;case"horizontal":case"vertical":b[1]=b[0],b[0]="spread-layout-axis";break;case"window":case"portrait":case"landscape":b[1]=b[0],b[0]="page-size-format";break;default:return}switch(b[0]){case"preset":b[1]=b[1].replace(/(\.js)?$/,".js");break;case"to":b[1]=O.getBibitoTarget(b[1]);break;case"book-display-mode":case"spread-layout-axis":case"page-size-format":break;default:return}X.bibi[b[0]]=b[1]}})):X.bibi={},X.pipi?(X.pipi={Data:X.pipi},X.pipi.Data.replace(" ","").split(",").forEach(function(a){var b=a.split(":");if(b[0]){if(!b[1])switch(b[0]){case"wait":b[1]=!0,b[0]="wait";

break;case"autostart":b[1]=!0,b[0]="autostart";break;default:return}switch(b[0]){case"wait":case"autostart":break;case"poster":b[1]=decodeURIComponent(b[1].replace("_BibiKakkoClose_",")").replace("_BibiKakkoOpen_","("));break;case"nav":b[1]=1*b[1];break;default:return}X.pipi[b[0]]=b[1]}})):X.pipi={},X.pipi.wait=!X.pipi.autostart&&(X.pipi.wait||parent!=window),X.pipi.poster&&(sML.addClass(O.HTML,"with-poster"),O.Body.style.backgroundImage="url("+X.pipi.poster+")"),!X.bibi.To&&X.epubcfi&&(X.bibi.To=O.getEPUBCFITarget(X.epubcfi))},O.parseHash=function(){if(!location.hash)return{};var a=location.hash.replace(/^#/,""),b=0,c={},d=function(){for(var d=b,e="";/[a-z_]/.test(a.charAt(b));)b++;if("("!=a.charAt(b))return null;for(e=a.substr(d,b-1-d+1),b++;")"!=a.charAt(b);)b++;c[e]=a.substr(d,b-d+1).replace(/^[a-z_]+\(/,"").replace(/\)$/,""),b++};return function(){for(d();","==a.charAt(b);)b++,d()}(),c},O.getBibitoTarget=function(a){if("number"==typeof a&&(a=""+a),"string"!=typeof a||!/^[1-9][0-9]*(-[1-9][0-9]*(\.[1-9][0-9]*)*)?$/.test(a))return null;var b="",c=a.split("-"),d=parseInt(c[0]),e=c[1]?c[1]:null;return e&&e.split(".").forEach(function(a){b+=">*:nth-child("+a+")"}),{BibitoString:a,ItemIndex:d-1,Element:b?"body"+b:null}},O.getEPUBCFITarget=function(a){var b=O.EPUBCFI.parse(a);if(!b||b.Path.Steps.length<2||!b.Path.Steps[1].Index||b.Path.Steps[1].Index%2==1)return null;var c=b.Path.Steps[1].Index/2-1,d=null,e=null,f=null,g=null;return b.Path.Steps[2]&&b.Path.Steps[2].Steps&&(d="",b.Path.Steps[2].Steps.forEach(function(a,c){return"IndirectPath"==a.Type?(g=a,!1):"TermStep"==a.Type?(f=a,!1):a.Index%2==1&&(e=a.Index-1,c!=b.Path.Steps[2].Steps.length-2)?!1:void(null===e&&(d=a.ID?"#"+a.ID:d+">*:nth-child("+a.Index/2+")"))}),d&&/^>/.test(d)&&(d="html"+d),d||(d=null)),{CFI:b,CFIString:a,ItemIndex:c,Element:d,TextNodeIndex:e,TermStep:f,IndirectPath:g}},O.getLogo=function(a){var b=sML.UA.InternetExplorer<9?['<span class="bibi-type-B">B</span>','<span class="bibi-type-i">i</span>','<span class="bibi-type-B">B</span>','<span class="bibi-type-slash">/</span>','<span class="bibi-type-i">i</span>'].join(""):'<img alt="BiB/i" src="../../bib/i/res/images/bibi-logo.png" />';return["<",a.Linkify?"a":"span",' class="bibi-logo"',a.Linkify?' href="http://bibi.epub.link/" target="_blank" title="BiB/i | Web Site"':"",">",b,"</",a.Linkify?"a":"span",">"].join("")},O.Log=(!parent||parent==window)&&console&&console.log,O.log=function(a,b){if(O.Log&&b&&"string"==typeof b&&(O.showStatus(b),!O.SmartPhone)){switch(a){case 0:b="[ERROR] "+b;break;case 1:b="---------------- "+b+" ----------------";break;case 2:b=b;break;case 3:b=" - "+b;break;case 4:b="   . "+b}console.log("BiB/i: "+b)}},O.showStatus=function(a){C.Cartain&&C.Cartain.Message&&C.Cartain.Message.note(a),O.SmartPhone||(O.statusClearer&&clearTimeout(O.statusClearer),window.status="BiB/i: "+a,O.statusClearer=setTimeout(function(){window.status=""},3210))},O.isBin=function(a){return/\.(gif|jpe?g|png|ttf|otf|woff|mp[g34]|m4[av]|ogg|webm|pdf)$/i.test(a)},O.getPath=function(a){for(var b=1;b<arguments.length;b++)arguments[0]+="/"+arguments[b];for(arguments[0].replace(/^([a-zA-Z]+:\/\/[^\/]+)?\/*(.*)$/,function(){a=[arguments[1],arguments[2]]});/([^:\/])\/{2,}/.test(a[1]);)a[1]=a[1].replace(/([^:\/])\/{2,}/g,"$1/");for(;/\/\.\//.test(a[1]);)a[1]=a[1].replace(/\/\.\//g,"/");for(;/[^\/]+\/\.\.\//.test(a[1]);)a[1]=a[1].replace(/[^\/]+\/\.\.\//g,"");return a[1]=a[1].replace(/^(\.*\/)+/g,""),a[0]?a.join("/"):a[1]},O.toBibiXML=function(a){return a.replace(/<\?[^>]*?\?>/g,"").replace(/<(\/?)([\w\d]+):/g,"<$1$2_").replace(/<(\/?)(opf_)?([^!\?\/ >]+)/g,"<$1bibi_$3").replace(/<([\w\d_]+) ([^>]+?)\/>/g,"<$1 $2></$1>")},O.ContentTypeList={"image/gif":/\.gif$/i,"image/png":/\.png$/i,"image/jpeg":/\.jpe?g$/i,"image/svg+xml":/\.svg$/i,"font/truetype":/\.ttf$/i,"font/opentype":/\.otf$/i,"font/woff":/\.woff$/i,"text/css":/\.css$/i,"text/javascript":/\.js$/i,"text/html":/\.html?$/i,"application/xhtml+xml":/\.xhtml$/i,"application/xml":/\.xml$/i,"application/pdf":/\.pdf$/i},sML.ready(O.welcome),/*!
 *
 * # BiB/i EPUBCFI Utilities
 *
 * - "EPUBCFI Utilities (for BiB/i, or Others)"
 * - Copyright (c) Satoru MATSUSHIMA - http://bibi.epub.link/ or https://github.com/satorumurmur/bibi
 * - Licensed under the MIT license. - http://www.opensource.org/licenses/mit-license.php
 *
 * - Wed February 4 23:15:00 2015 +0900
 */
BibiEPUBCFI={Version:"0.32.2",Build:20150204.1,CFIString:"",Current:0,parse:function(a,b){if(!a||"string"!=typeof a)return null;try{a=decodeURIComponent(a)}catch(c){return this.log(0,"Unregulated URIEncoding."),null}return b&&"string"==typeof b&&"function"==typeof this["parse"+b]||(b="Fragment"),"Fragment"==b&&(a=a.replace(/^(epubcfi\()?/,"epubcfi(").replace(/(\))?$/,")")),this.CFIString=a,this.Current=0,this.Log&&this.LogCancelation&&(this.log(1,"BiB/i EPUB-CFI"),this.log(2,"parse"),this.log(3,"CFIString: "+this.CFIString)),this["parse"+b]()},parseFragment:function(){var a=this.Current,b={};return this.parseString("epubcfi(")?(b=this.parseCFI(),null===b?this.cancel(a):this.parseString(")")?b:this.cancel(a,"Fragment")):this.cancel(a,"Fragment")},parseCFI:function(){var a=this.Current,b={Type:"CFI",Path:{}};if(b.Path=this.parsePath(),!b.Path)return this.cancel(a,"CFI");if(this.parseString(",")){if(b.Start=this.parseLocalPath(),!b.Start.Steps.length&&!b.Start.TermStep)return this.cancel(a,"CFI > Range");if(!this.parseString(","))return this.cancel(a,"CFI > Range");if(b.End=this.parseLocalPath(),!b.End.Steps.length&&!b.End.TermStep)return this.cancel(a,"CFI > Range")}return b},parsePath:function(){var a=this.Current,b={Type:"Path",Steps:[]},c={};return b.Steps[0]=this.parseStep(),b.Steps[0]&&(c=this.parseLocalPath())?(b.Steps=b.Steps.concat(c.Steps),b):this.cancel(a,"Path")},parseLocalPath:function(){var a=(this.Current,{Type:"LocalPath",Steps:[]}),b=a,c=null,d=null;for(c=this.parseStep("Local");null!==c&&(b.Steps.push(c),c=this.parseStep("Local"));)if("IndirectStep"==c.Type){var e={Type:"IndirectPath",Steps:[]};b.Steps.push(e),b=e}else if("TermStep"==c.Type){d=c;break}return d&&b.Steps.push(d),a.Steps.length?a:null},parseStep:function(a){var b=this.Current,c={};if(this.parseString("/"))c.Type="Step";else if(a&&this.parseString("!/"))c.Type="IndirectStep";else{if(!a||!this.parseString(":"))return this.cancel(b,"Step");c.Type="TermStep"}if(c.Index=this.parseString(/^(0|[1-9][0-9]*)/),null===c.Index)return this.cancel(b,"Step");if(c.Index=parseInt(c.Index),this.parseString("[")){if("TermStep"!=c.Type){if(c.ID=this.parseString(/^[a-zA-Z_:][a-zA-Z0-9_:\-\.]+/),!c.ID)return this.cancel(b,"Step > Assertion > ID")}else{var d=[],e=null,f=/^((\^[\^\[\]\(\)\,\;\=])|[_a-zA-Z0-9%\- ])*/;if(d.push(this.parseString(f)),this.parseString(",")&&d.push(this.parseString(f)),d[0]&&(c.Preceding=d[0]),d[1]&&(c.Following=d[1]),this.parseString(/^;s=/)&&(e=this.parseString(/^[ab]/)),e&&(c.Side=e),!c.Preceding&&!c.Following&&!c.Side)return this.cancel(b,"Step > Assertion > TextLocation")}if(!this.parseString("]"))return this.cancel(b,"Step > Assertion")}return c},parseString:function(a){var b=null;if(a instanceof RegExp){var c=this.CFIString.substr(this.Current,this.CFIString.length-this.Current);a.test(c)&&(a=c.match(a)[0],this.Current+=a.length,b=a)}else this.CFIString.substr(this.Current,a.length)===a&&(this.Current+=a.length,b=a);return this.correct(b)},correct:function(a){return this.Log&&this.LogCorrection&&a&&this.log(3,a),a},cancel:function(a,b){return this.Log&&this.LogCancelation&&this.log(4,"cancel: parse"+b+" ("+a+"-"+this.Current+"/"+this.CFIString.length+")"),"number"==typeof a&&(this.Current=a),null},log:function(a,b){this.Log&&console&&console.log&&(0==a?b="[ERROR] "+b:1==a?b="---------------- "+b+" ----------------":2==a?b=b:3==a?b=" - "+b:4==a&&(b="   . "+b),console.log("BiB/i EPUB-CFI: "+b))}};